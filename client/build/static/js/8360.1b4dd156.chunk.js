"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[8360],{70877:(e,l,a)=>{a.d(l,{A:()=>t});var s=a(62582),o=a(11645),n=a(97775),i=a(70579);const t=e=>{const{breadCrumbParent:l,breadCrumbParent2:a,breadCrumbParent3:t,breadCrumbActive:r}=e;return(0,i.jsx)(o.A,{children:(0,i.jsxs)(n.A,{className:"hp-d-flex hp-flex-wrap",children:[(0,i.jsx)(n.A.Item,{children:(0,i.jsx)(s.N_,{to:"/",children:"Home"})}),"Components"===l?(0,i.jsx)(n.A.Item,{children:(0,i.jsx)(s.N_,{to:"/components/components-page",children:"Components"})}):(0,i.jsx)(n.A.Item,{children:l}),a&&(0,i.jsx)(n.A.Item,{children:a}),t&&(0,i.jsx)(n.A.Item,{children:t}),(0,i.jsx)(n.A.Item,{children:r})]})})}},58360:(e,l,a)=>{a.r(l),a.d(l,{default:()=>C});var s=a(65043),o=a(40854),n=a.n(o),i=a(94376),t=a(64435),r=a(75932),c=a(89421),d=a(86904),m=a(21261),u=a(47419),h=a(11645),p=a(60521),v=a(43886),A=a(39998),x=a(73754),y=(a(70877),a(4689),a(77717)),g=a(59893),j=a(75155),f=a(70579);function C(){var e,l,a;const[o,C]=(0,s.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[b,k]=(0,s.useState)([]),[I]=i.A.useForm(),[N]=i.A.useForm(),S=[{title:"Company Name",dataIndex:"companyName",key:"companyName",render:e=>(0,f.jsx)("a",{children:e})},{title:"Company Address",dataIndex:"companyAddress",key:"companyAddress"},{title:"Company Contact",dataIndex:"companyContact",key:"companyContact"},{title:"Action",key:"action",render:(e,l)=>{var a;return(0,f.jsxs)(t.A,{size:"middle",children:[(0,f.jsx)(r.A,{title:"Add Client",children:(0,f.jsx)(c.A,{size:"middle",icon:(0,f.jsx)(g.A,{}),onClick:()=>ie(l)})}),(0,f.jsx)(r.A,{title:"View Officials",children:(0,f.jsx)(c.A,{size:"middle",icon:(0,f.jsx)(j.A,{}),disabled:1!==(null===o||void 0===o||null===(a=o.user)||void 0===a?void 0:a.roleId),onClick:()=>re(l)})})]})}}],[w,E]=(0,s.useState)(!1),[z,P]=(0,s.useState)(!1),[F,T]=(0,s.useState)(),[O,_]=(0,s.useState)([]),[q,R]=(0,s.useState)(""),[Q,V]=(0,s.useState)(!1),[J,B]=(0,s.useState)(""),[H,U]=(0,s.useState)(""),[Y,D]=(0,s.useState)(""),[G,K]=(0,s.useState)(""),[L,M]=(0,s.useState)(""),[W,X]=(0,s.useState)(""),[Z,$]=(0,s.useState)([]),[ee,le]=(0,s.useState)([]),ae=async()=>{try{var e;const l=await n().get("http://127.0.0.1:8083/api/clients?companyId=".concat(null===o||void 0===o||null===(e=o.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===o||void 0===o?void 0:o.accessToken}});console.log(l.data,"data");const a=l.data.map((e=>({value:e.id,label:e.companyName})));console.log("Options",a),k(a),le(l.data)}catch(l){console.error("Error fetching clients:",null===l||void 0===l?void 0:l.message)}},se=async()=>{if(J)try{var e;const l=await n().post("http://127.0.0.1:8083/api/clients",{companyName:J,companyId:null===o||void 0===o||null===(e=o.user)||void 0===e?void 0:e.companyId,companyAddress:L,companyContact:W},{headers:{Authorization:null===o||void 0===o?void 0:o.accessToken}});console.log(l),ae(),ne(),d.A.success({message:"Successfully Created",description:"A client with this name is created.",style:{backgroundColor:"#52c41a",color:"#fff"}})}catch(a){var l;409===(null===(l=a.response)||void 0===l?void 0:l.status)?d.A.error({message:"Conflict Error",description:"A client with this name already exists. Please choose a different name.",style:{backgroundColor:"#f5222d",color:"#fff"}}):d.A.error({message:"Error",description:"An error occurred while adding the client. Please try again.",style:{backgroundColor:"#f5222d",color:"#fff"}})}else d.A.error({message:"Validation Error",description:"Please fill in all required fields.",style:{backgroundColor:"#f5222d",color:"#fff"}})},oe=async()=>{if(H&&Y)try{var e;const s=await n().post("http://127.0.0.1:8083/api/clients",{clientName:H,companyId:F.id,Email:Y,userCompanyId:o.user.companyId},{headers:{Authorization:null===o||void 0===o?void 0:o.accessToken}});var l,a;if(console.log(s),"This email already exist!"===(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.message))console.log("ERROR"),d.A.error({message:"".concat(null===s||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message),style:{backgroundColor:"#ff0000",color:"#fff"}});else console.log("SUCCESS"),d.A.success({message:"".concat(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message),style:{backgroundColor:"#52c41a",color:"#fff"}});ae(),te()}catch(s){console.error("Error adding client official:",s)}else d.A.error({message:"Validation Error",description:"Please fill in all required fields.",style:{backgroundColor:"#f5222d",color:"#fff"}})};(0,s.useEffect)((()=>{var e;C(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),(async()=>{try{var e;const l=await n().get("http://127.0.0.1:8083/api/projects?companyId=".concat(null===o||void 0===o||null===(e=o.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===o||void 0===o?void 0:o.accessToken}});console.log(l);const a=new Set,s=null===l||void 0===l?void 0:l.data.reduce(((e,l)=>(a.has(l.title)||(a.add(l.title),e.push({value:l.id,label:l.title,code:l.code})),e)),[]);$(s)}catch(l){console.error("Error fetching departments:",null===l||void 0===l?void 0:l.message)}})(),ae()}),[]);const ne=()=>{V(!1)},ie=e=>{T(e),P(!0)},te=()=>{P(!1)},re=e=>{console.log("record",e),console.log(e,"recordingggg"),(async e=>{try{console.log(e,"id");const l=await n().get("http://127.0.0.1:8083/api/clients/official?companyId=".concat(e.id),{headers:{Authorization:null===o||void 0===o?void 0:o.accessToken}});console.log(l.data,"data"),_(l.data)}catch(l){console.error("Error fetching employees:",null===l||void 0===l?void 0:l.message)}})(e),E(!0)},ce=()=>{R(""),E(!1)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.A,{title:"Employees",width:400,centered:!0,visible:w,onCancel:ce,footer:null,closeIcon:(0,f.jsx)(x.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,f.jsx)(u.A,{justify:"space-between",align:"center",children:(0,f.jsx)(h.A,{span:30,children:(0,f.jsxs)(i.A,{layout:"vertical",name:"basic",children:[(0,f.jsxs)(y.A,{children:[(0,f.jsx)("h3",{children:"Our Employees"}),(0,f.jsx)("ul",{children:O.map(((e,l)=>(0,f.jsxs)("li",{children:[(0,f.jsx)("strong",{children:e.clientName})," - ",(0,f.jsx)("span",{style:{color:"blue"},children:e.Email})]},l)))})]}),(0,f.jsx)(u.A,{children:(0,f.jsx)(h.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,f.jsx)(c.A,{block:!0,onClick:ce,children:"Cancel"})})})]})})})}),(0,f.jsx)(m.A,{title:"Add Company",width:416,centered:!0,visible:Q,onCancel:ne,footer:null,closeIcon:(0,f.jsx)(x.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,f.jsxs)(i.A,{form:I,onFinish:()=>{I.validateFields().then((e=>{se(),I.resetFields()}))},layout:"vertical",name:"basic",children:[(0,f.jsx)(i.A.Item,{label:"Company Name:",name:"firstName",rules:[{required:!0,message:"Please input your Company Name!"}],children:(0,f.jsx)(p.A,{value:J,onChange:e=>B(e.target.value)})}),(0,f.jsx)(i.A.Item,{label:"Address :",name:"companyAddress",children:(0,f.jsx)(p.A,{id:"companyAddress",value:L,onChange:e=>M(e.target.value)})}),(0,f.jsx)(i.A.Item,{label:"Contact :",name:"companyContact",children:(0,f.jsx)(p.A,{id:"companyContact",value:W,onChange:e=>X(e.target.value)})}),(0,f.jsxs)(u.A,{children:[(0,f.jsx)(h.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,f.jsx)(c.A,{block:!0,type:"primary",htmlType:"submit",children:"Add Company"})}),(0,f.jsx)(h.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,f.jsx)(c.A,{block:!0,onClick:ne,children:"Cancel"})})]})]})}),(0,f.jsx)(m.A,{title:"Add Client",width:416,centered:!0,visible:z,onCancel:te,footer:null,closeIcon:(0,f.jsx)(x.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,f.jsxs)(i.A,{form:N,onFinish:()=>{N.validateFields().then((e=>{oe(),N.resetFields()}))},layout:"vertical",name:"basic",children:[(0,f.jsx)(i.A.Item,{label:"Client Name:",name:"clientName",rules:[{required:!0,message:"Please input your Name!"}],children:(0,f.jsx)(p.A,{value:H,onChange:e=>U(e.target.value)})}),(0,f.jsx)(i.A.Item,{label:"Email :",name:"email",rules:[{required:!0,message:"Please input your Email!"}],children:(0,f.jsx)(p.A,{id:"email",value:Y,onChange:e=>D(e.target.value)})}),(0,f.jsxs)(u.A,{children:[(0,f.jsx)(h.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,f.jsx)(c.A,{block:!0,type:"primary",htmlType:"submit",children:"Add Client"})}),(0,f.jsx)(h.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,f.jsx)(c.A,{block:!0,onClick:te,children:"Cancel"})})]})]})}),(0,f.jsx)("div",{style:{textAlign:"right",marginBottom:"16px"},children:(0,f.jsx)(c.A,{type:"primary",onClick:()=>{V(!0)},style:{marginRight:"10px"},disabled:1!=(null===o||void 0===o||null===(l=o.user)||void 0===l?void 0:l.roleId),children:"Add Company"})}),1===(null===o||void 0===o||null===(a=o.user)||void 0===a?void 0:a.roleId)?(0,f.jsx)(v.A,{columns:S,dataSource:ee,bordered:!0,size:"middle",title:()=>"All Clients Information"}):(0,f.jsxs)("div",{children:[(0,f.jsx)(A.A,{}),(0,f.jsx)("p",{children:"You do not have permissions to view."})]})]})}}}]);
//# sourceMappingURL=8360.1b4dd156.chunk.js.map