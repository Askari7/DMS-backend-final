"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[7996],{17996:(e,n,t)=>{t.r(n),t.d(n,{default:()=>h});var a=t(65043),r=t(70610),o=t(94376),l=t(15627),i=t(60521),s=t(78186),c=t(89421),d=t(91688),u=t(40854),p=t.n(u),v=t(70579);const{Option:m}=r.A,f=e=>{var n;let{onSubmit:t}=e;const[u]=o.A.useForm(),[f,h]=(0,a.useState)(""),[g,y]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[A,k]=(0,a.useState)(""),[C,I]=(0,a.useState)(!1),[j,E]=(0,a.useState)(JSON.parse(null===(n=localStorage)||void 0===n?void 0:n.getItem("user"))),[O,S]=(0,a.useState)([]),[N,w]=(0,a.useState)(""),F=async()=>{try{var e,n;console.log(N,"department"),console.log("firstName",x);const t=await p().post("http://54.81.250.98:8083/api/users",{email:f,firstName:x,lastName:A,department:N[0].title,departmentId:N[0].id,roleId:g,companyId:null===j||void 0===j||null===(e=j.user)||void 0===e?void 0:e.companyId},{headers:{Authorization:null===j||void 0===j?void 0:j.accessToken}});console.log(t,"response"),l.Ay.success(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)}catch(t){console.error("Error adding user:",t)}},P=(0,d.useHistory)();return(0,a.useEffect)((()=>{(async()=>{try{var e;const n=await p().get("http://54.81.250.98:8083/api/departments?companyId=".concat(null===j||void 0===j||null===(e=j.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===j||void 0===j?void 0:j.accessToken}}),t=[];for(const e of null===n||void 0===n?void 0:n.data)t.push({value:{id:null===e||void 0===e?void 0:e.id,title:null===e||void 0===e?void 0:e.title},label:null===e||void 0===e?void 0:e.title});S(t)}catch(n){console.error("Error fetching departments:",null===n||void 0===n?void 0:n.message)}})()}),[]),(0,v.jsxs)(o.A,{form:u,onFinish:()=>{console.log("data from form",f,x,A,g,N),u.validateFields().then((e=>{F(),t(e),u.resetFields()}))},layout:"vertical",children:[(0,v.jsx)("div",{style:{textAlign:"center",marginTop:20},children:(0,v.jsx)("h2",{children:"Add Employees"})}),(0,v.jsx)(o.A.Item,{name:"firstName",label:"First Name",rules:[{required:!0}],children:(0,v.jsx)(i.A,{value:x,onChange:e=>b(e.target.value)})}),(0,v.jsx)(o.A.Item,{name:"lastName",label:"Last Name",rules:[{required:!0}],children:(0,v.jsx)(i.A,{value:A,onChange:e=>k(e.target.value)})}),(0,v.jsx)(o.A.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email"}],children:(0,v.jsx)(i.A,{value:f,onChange:e=>h(e.target.value)})}),(0,v.jsx)(o.A.Item,{name:"designation",label:"Designation",rules:[{required:!0}],children:(0,v.jsxs)(r.A,{onChange:e=>{switch(e){case"Head":y("2");break;case"Senior":y("3");break;case"Junior":y("4");break;case"Designer":y("5");break;default:y("")}},children:[(0,v.jsx)(m,{value:"Head",children:"Head of Dept"}),(0,v.jsx)(m,{value:"Senior",children:"Senior Engineer"}),(0,v.jsx)(m,{value:"Junior",children:"Junior Engineer"}),(0,v.jsx)(m,{value:"Designer",children:"Designer"})]})}),(0,v.jsx)(o.A.Item,{name:"department",label:"Department",rules:[{required:!0}],children:(0,v.jsx)(s.A.Group,{options:O,value:N,onChange:w})}),(0,v.jsx)(o.A.Item,{style:{textAlign:"center"},children:(0,v.jsx)(c.A,{type:"primary",htmlType:"submit",children:"Add Employee"})})," ",(0,v.jsx)("div",{style:{textAlign:"center",marginTop:20},children:(0,v.jsx)(c.A,{type:"primary",htmlType:"submit",onClick:()=>{P.push("/pages/config_document_number")},children:"Proceed"})}),C&&(0,v.jsx)(MdrTemplate,{})]})};t(91439);const h=()=>{const[e,n]=(0,a.useState)([]);return(0,v.jsx)("div",{style:{display:"flex",textAlign:"center"},children:(0,v.jsx)("div",{style:{flex:1,marginRight:"20px"},children:(0,v.jsx)(f,{onSubmit:t=>{if(t.id=e.length+1,"Head"===t.designation)t.managerId=null;else if("Senior"===t.designation){const n=e.find((e=>"Head"===e.designation&&e.department===t.department));t.managerId=n?n.id:null}else if("Junior"===t.designation){const n=e.find((e=>"Senior"===e.designation&&e.department===t.department));t.managerId=n?n.id:null}else if("Designer"===t.designation){const n=e.find((e=>"Junior"===e.designation&&e.department===t.department));t.managerId=n?n.id:null}n([...e,t]),console.log("my employees",t)}})})})}},91439:(e,n,t)=>{t.d(n,{A:()=>c});var a=t(65043),r=t(21450),o=t(85369),l=t(40854),i=t.n(l),s=t(70579);const c=e=>{var n;let{employees:t}=e;const[l,c]=(0,a.useState)(JSON.parse(null===(n=localStorage)||void 0===n?void 0:n.getItem("user"))),[d,u]=(0,a.useState)();(0,a.useEffect)((()=>{p()}));const p=async()=>{try{var e;const n=await i().get("http://54.81.250.98:8083/api/users/company/?companyId=".concat(null===l||void 0===l||null===(e=l.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===l||void 0===l?void 0:l.accessToken}});console.log(n.data,"company name"),u(n.data)}catch(n){console.error("Error fetching documents:",null===n||void 0===n?void 0:n.message)}};console.log(t,"employees");const v=(e,n)=>[...e.values()].find((e=>null===e.department&&null===n.department||5===n.roleId&&e.department===n.department?e.roleId===n.roleId-1:5===n.roleId&&"Piping"===n.department?1===e.roleId:4===n.roleId&&"Process"===n.department?2===e.roleId&&"Process"===e.department:2===n.roleId||e.department===n.department?e.roleId===n.roleId-1:5===n.roleId&&"Instrumentation"===n.department&&1===e.roleId)),m=e=>{const n=0===e.children.length;return(0,s.jsxs)(r.n,{label:(0,s.jsxs)("div",{style:{backgroundColor:(e=>{switch(e){case 1:return"#FFD700";case 2:return"#87CEEB";case 3:return"#90EE90";case 4:return"#FFA07A";case 5:return"#DDA0DD";default:return"#FFFFFF"}})(e.roleId),padding:"4px",borderRadius:"16px",fontWeight:"bold",cursor:n?"default":"pointer"},children:[e.lastName,"-",e.department,"-",e.roleTitle,n&&(0,s.jsx)(o.sHz,{style:{marginLeft:"2px",fontSize:"20px",color:"#008000"}})]}),children:[e.children.map((e=>m(e)))," "]},e.id.toString())};return(0,s.jsx)("div",{style:{overflowX:"auto"},children:(0,s.jsx)(r.P,{label:(0,s.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#333"},children:2==l.user.roleId?l.user.department:d}),children:(e=>{const n=new Map;e.forEach((e=>{n.set(e.id,{...e,children:[]})})),console.log(n,"employeeMap");const t=[];return n.forEach((e=>{const a=e.roleId,r=e.department;if(2==l.user.roleId)if(r&&2===a)t.push(e);else{const t=v(n,e);t&&t.children.push(e)}else if(r||1!==a){const t=v(n,e);t&&t.children.push(e)}else t.push(e)})),console.log(t,"tree"),t})(t).map((e=>m(e)))})})}},78186:(e,n,t)=>{t.d(n,{A:()=>I});var a=t(64467),r=t(58168),o=t(65043),l=t(98139),i=t.n(l),s=t(79688),c=t(60436),d=t(5544),u=t(18574),p=t(25055),v=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t},m=o.createContext(null),f=function(e,n){var t=e.defaultValue,l=e.children,s=e.options,f=void 0===s?[]:s,h=e.prefixCls,g=e.className,y=e.style,x=e.onChange,b=v(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),A=o.useContext(p.QO),C=A.getPrefixCls,I=A.direction,j=o.useState(b.value||t||[]),E=(0,d.A)(j,2),O=E[0],S=E[1],N=o.useState([]),w=(0,d.A)(N,2),F=w[0],P=w[1];o.useEffect((function(){"value"in b&&S(b.value||[])}),[b.value]);var D=function(){return f.map((function(e){return"string"===typeof e?{label:e,value:e}:e}))},K=C("checkbox",h),T="".concat(K,"-group"),M=(0,u.A)(b,["value","disabled"]);f&&f.length>0&&(l=D().map((function(e){return o.createElement(k,{prefixCls:K,key:e.value.toString(),disabled:"disabled"in e?e.disabled:b.disabled,value:e.value,checked:-1!==O.indexOf(e.value),onChange:e.onChange,className:"".concat(T,"-item"),style:e.style},e.label)})));var _={toggleOption:function(e){var n=O.indexOf(e.value),t=(0,c.A)(O);-1===n?t.push(e.value):t.splice(n,1),"value"in b||S(t);var a=D();null===x||void 0===x||x(t.filter((function(e){return-1!==F.indexOf(e)})).sort((function(e,n){return a.findIndex((function(n){return n.value===e}))-a.findIndex((function(e){return e.value===n}))})))},value:O,disabled:b.disabled,name:b.name,registerValue:function(e){P((function(n){return[].concat((0,c.A)(n),[e])}))},cancelValue:function(e){P((function(n){return n.filter((function(n){return n!==e}))}))}},q=i()(T,(0,a.A)({},"".concat(T,"-rtl"),"rtl"===I),g);return o.createElement("div",(0,r.A)({className:q,style:y},M,{ref:n}),o.createElement(m.Provider,{value:_},l))},h=o.forwardRef(f);const g=o.memo(h);var y=t(5753),x=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t},b=function(e,n){var t,l=e.prefixCls,c=e.className,d=e.children,u=e.indeterminate,v=void 0!==u&&u,f=e.style,h=e.onMouseEnter,g=e.onMouseLeave,b=e.skipGroup,A=void 0!==b&&b,k=x(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),C=o.useContext(p.QO),I=C.getPrefixCls,j=C.direction,E=o.useContext(m),O=o.useRef(k.value);o.useEffect((function(){null===E||void 0===E||E.registerValue(k.value),(0,y.A)("checked"in k||!!E||!("value"in k),"Checkbox","`value` is not a valid prop, do you mean `checked`?")}),[]),o.useEffect((function(){if(!A)return k.value!==O.current&&(null===E||void 0===E||E.cancelValue(O.current),null===E||void 0===E||E.registerValue(k.value)),function(){return null===E||void 0===E?void 0:E.cancelValue(k.value)}}),[k.value]);var S=I("checkbox",l),N=(0,r.A)({},k);E&&!A&&(N.onChange=function(){k.onChange&&k.onChange.apply(k,arguments),E.toggleOption&&E.toggleOption({label:d,value:k.value})},N.name=E.name,N.checked=-1!==E.value.indexOf(k.value),N.disabled=k.disabled||E.disabled);var w=i()((t={},(0,a.A)(t,"".concat(S,"-wrapper"),!0),(0,a.A)(t,"".concat(S,"-rtl"),"rtl"===j),(0,a.A)(t,"".concat(S,"-wrapper-checked"),N.checked),(0,a.A)(t,"".concat(S,"-wrapper-disabled"),N.disabled),t),c),F=i()((0,a.A)({},"".concat(S,"-indeterminate"),v));return o.createElement("label",{className:w,style:f,onMouseEnter:h,onMouseLeave:g},o.createElement(s.A,(0,r.A)({},N,{prefixCls:S,className:F,ref:n})),void 0!==d&&o.createElement("span",null,d))},A=o.forwardRef(b);A.displayName="Checkbox";const k=A;var C=k;C.Group=g,C.__ANT_CHECKBOX=!0;const I=C},79688:(e,n,t)=>{t.d(n,{A:()=>f});var a=t(58168),r=t(64467),o=t(80045),l=t(89379),i=t(23029),s=t(92901),c=t(85501),d=t(52962),u=t(65043),p=t(98139),v=t.n(p),m=function(e){(0,c.A)(t,e);var n=(0,d.A)(t);function t(e){var a;(0,i.A)(this,t),(a=n.call(this,e)).handleChange=function(e){var n=a.props,t=n.disabled,r=n.onChange;t||("checked"in a.props||a.setState({checked:e.target.checked}),r&&r({target:(0,l.A)((0,l.A)({},a.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},a.saveInput=function(e){a.input=e};var r="checked"in e?e.checked:e.defaultChecked;return a.state={checked:r},a}return(0,s.A)(t,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,n=this.props,t=n.prefixCls,l=n.className,i=n.style,s=n.name,c=n.id,d=n.type,p=n.disabled,m=n.readOnly,f=n.tabIndex,h=n.onClick,g=n.onFocus,y=n.onBlur,x=n.onKeyDown,b=n.onKeyPress,A=n.onKeyUp,k=n.autoFocus,C=n.value,I=n.required,j=(0,o.A)(n,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),E=Object.keys(j).reduce((function(e,n){return"aria-"!==n.substr(0,5)&&"data-"!==n.substr(0,5)&&"role"!==n||(e[n]=j[n]),e}),{}),O=this.state.checked,S=v()(t,l,(e={},(0,r.A)(e,"".concat(t,"-checked"),O),(0,r.A)(e,"".concat(t,"-disabled"),p),e));return u.createElement("span",{className:S,style:i},u.createElement("input",(0,a.A)({name:s,id:c,type:d,required:I,readOnly:m,disabled:p,tabIndex:f,className:"".concat(t,"-input"),checked:!!O,onClick:h,onFocus:g,onBlur:y,onKeyUp:A,onKeyDown:x,onKeyPress:b,onChange:this.handleChange,autoFocus:k,ref:this.saveInput,value:C},E)),u.createElement("span",{className:"".concat(t,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return"checked"in e?(0,l.A)((0,l.A)({},n),{},{checked:e.checked}):null}}]),t}(u.Component);m.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};const f=m}}]);
//# sourceMappingURL=7996.8fc5a4fa.chunk.js.map