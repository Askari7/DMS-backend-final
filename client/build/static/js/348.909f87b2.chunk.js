"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[348],{59408:(e,t,a)=>{a.d(t,{c:()=>o});a(33280);var l=a(83144),n=a(82496);const o=()=>{var e;const t=null===(e=localStorage)||void 0===e?void 0:e.getItem("user");return console.log(t,"loggin"),t?null:(0,n.jsx)(l.Redirect,{to:"/pages/authentication/login"})}},5348:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var l=a(69060),n=a(84196),o=a(26701),i=a(39322),r=a(38088),s=a(9992),c=a(80336),d=a(48004),u=a(28711),m=a(57156),p=a(29512),v=a(74421),h=a(19056),x=a(38112),g=a(26536),j=a.n(g),y=a(59408),f=a(82496);const I=[{title:"Project Id",dataIndex:"id",key:"id"},{title:"Project Title",dataIndex:"title",key:"title"},{title:"Client Email",dataIndex:"clientEmail",key:"clientEmail"},{title:"Author Id",dataIndex:"authorId",key:"authorId"},{title:"Author Name",dataIndex:"authorName",key:"authorName"},{title:"Project Code",dataIndex:"code",key:"code"},{title:"Status",dataIndex:"status",key:"status"},{title:"No of Users",dataIndex:"noOfUsers",key:"noOfUsers"},{title:"Action",key:"action",render:(e,t)=>(0,f.jsx)(n.c,{size:"middle",children:(0,f.jsx)("a",{onClick:()=>(e=>{e.delete=!0,fetchData().catch((e=>{console.error("Error deleting project:",e)}))})(t),children:"Delete"})})}];function b(){var e,t;const[a,n]=(0,l.useState)([]),[g,b]=(0,l.useState)(""),[k,N]=(0,l.useState)(!1),[C,E]=(0,l.useState)(!1),[z,w]=(0,l.useState)(""),[P,O]=(0,l.useState)(""),[A,D]=(0,l.useState)(""),[T,F]=(0,l.useState)([]),[G,M]=(0,l.useState)(""),[U,q]=(0,l.useState)(""),[B,_]=(0,l.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[J,R]=(0,l.useState)([]),[$,L]=(0,l.useState)([]),[W,H]=(0,l.useState)([]),[K,Q]=(0,l.useState)([]),[V,X]=(0,l.useState)(""),Y=()=>{q(""),M(""),w(""),D(""),b(""),F([]),N(!1)},Z=async()=>{console.log("inside");try{var e,t,a,l,n;const i=await j().post("http://54.81.250.98:8083/api/projects/",{title:z,departmentId:T,status:"Initialized",noOfUsers:0,clientEmail:A,code:U,companyId:null===B||void 0===B||null===(e=B.user)||void 0===e?void 0:e.companyId,authorId:null===B||void 0===B||null===(t=B.user)||void 0===t?void 0:t.id,authorName:"".concat(null===B||void 0===B||null===(a=B.user)||void 0===a?void 0:a.firstName," ").concat(null===B||void 0===B||null===(l=B.user)||void 0===l?void 0:l.lastName)},{headers:{Authorization:null===B||void 0===B?void 0:B.accessToken}});console.log(i),o.cp.success(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message),q(""),M(""),w(""),D(""),F([]),N(!1),ee()}catch(i){console.error("Error adding projects:",i)}},ee=async()=>{try{var e;const t=await j().get("http://54.81.250.98:8083/api/projects?companyId=".concat(null===B||void 0===B||null===(e=B.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===B||void 0===B?void 0:B.accessToken}});console.log("Project response data",t.data),R(t.data);const a=[];for(const e of null===t||void 0===t?void 0:t.data)a.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title});console.log(a),H(a)}catch(t){console.error("Error fetching projects:",null===t||void 0===t?void 0:t.message)}};(0,l.useEffect)((()=>{var e;_(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),(async()=>{try{var e;const t=await j().get("http://54.81.250.98:8083/api/clients?companyId=".concat(null===B||void 0===B||null===(e=B.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===B||void 0===B?void 0:B.accessToken}}),a=new Set,l=null===t||void 0===t?void 0:t.data.reduce(((e,t)=>(a.has(t.email)||(a.add(t.email),e.push({value:t.email,label:t.email,name:t.email})),e)),[]);Q(l)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}})(),(async()=>{try{var e;const t=await j().get("http://54.81.250.98:8083/api/departments?companyId=".concat(null===B||void 0===B||null===(e=B.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===B||void 0===B?void 0:B.accessToken}}),a=[];for(const e of null===t||void 0===t?void 0:t.data)a.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title});L(a)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}})(),ee()}),[]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.c,{title:"Add Project",width:416,centered:!0,onFinish:()=>{Z(),q(""),M(""),w(""),D(""),F([]),N(!1)},visible:k,onCancel:Y,footer:null,closeIcon:(0,f.jsx)(x.M5$,{className:"remix-icon text-color-black-100",size:24}),children:(0,f.jsxs)(r.c,{layout:"vertical",name:"basic",children:[(0,f.jsx)(r.c.Item,{label:"Project Code",name:"projCode",children:(0,f.jsx)(s.c,{value:P,onChange:e=>q(e.target.value)})}),"          ",(0,f.jsx)(r.c.Item,{label:"Project Name",name:"projName",children:(0,f.jsx)(s.c,{value:z,onChange:e=>w(e.target.value)})}),(0,f.jsx)(r.c.Item,{label:"Client Email",name:"clientEmail",rules:[{required:!0,message:"Please select Client Email"}],children:(0,f.jsx)(c.default,{options:K,value:A,onChange:e=>D(e)})}),(0,f.jsx)(r.c.Item,{label:"Departments",name:"departmentIds",rules:[{required:!0,message:"Please select at least one department"}],children:(0,f.jsx)(d.c.Group,{options:$,value:T,onChange:F})}),(0,f.jsx)(r.c.Item,{label:"Start Date",name:"startDate",rules:[{required:!0,message:"Please select start date"}],children:(0,f.jsx)(u.c,{style:{width:"100%"}})}),(0,f.jsx)(r.c.Item,{label:"End Date",name:"endDate",rules:[{required:!0,message:"Please select end date"}],children:(0,f.jsx)(u.c,{style:{width:"100%"}})}),(0,f.jsxs)(m.c,{children:[(0,f.jsx)(p.c,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,f.jsx)(v.c,{block:!0,type:"primary",htmlType:"submit",onClick:()=>Z(),children:"Add"})}),(0,f.jsx)(p.c,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,f.jsx)(v.c,{block:!0,onClick:Y,children:"Cancel"})})]})]})}),(0,f.jsx)(i.c,{title:"Document Permissions",width:416,centered:!0,visible:C,onCancel:()=>{E(!1)},footer:null,closeIcon:(0,f.jsx)(x.M5$,{className:"remix-icon text-color-black-100",size:24}),children:(0,f.jsxs)(r.c,{layout:"vertical",name:"basic",children:[(0,f.jsx)(r.c.Item,{label:"Project Name",name:"projectId",children:(0,f.jsx)(c.default,{options:W,value:V,onChange:e=>X(e)})}),(0,f.jsxs)(m.c,{children:[(0,f.jsx)(p.c,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,f.jsx)(v.c,{block:!0,type:"primary",htmlType:"submit",onClick:()=>Z(),children:"Add"})}),(0,f.jsx)(p.c,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,f.jsx)(v.c,{block:!0,onClick:Y,children:"Cancel"})})]})]})}),(0,f.jsx)("div",{style:{textAlign:"right",marginBottom:"16px"},children:(0,f.jsx)(v.c,{type:"primary",onClick:()=>{N(!0)},disabled:1!=(null===B||void 0===B||null===(t=B.user)||void 0===t?void 0:t.roleId),children:"Add Project"})}),(0,f.jsx)(h.c,{columns:I,dataSource:S(J)}),(0,f.jsx)(y.c,{})]})}const S=e=>{const t={};e.forEach((e=>{const a=e.title;t[a]?t[a].departmentNames.push(e.departmentName+","):t[a]={...e,departmentNames:[e.departmentName+","]}}));return Object.values(t).map((e=>({...e,departmentName:e.departmentNames.join("")})))}},84196:(e,t,a)=>{a.d(t,{U:()=>v,c:()=>x});var l=a(45072),n=a(52536),o=a(32920),i=a(69060),r=a(264),s=a.n(r),c=a(6776),d=a(33832);function u(e){var t=e.className,a=e.direction,o=e.index,r=e.marginDirection,s=e.children,c=e.split,d=e.wrap,u=i.useContext(v),m=u.horizontalSize,p=u.verticalSize,h=u.latestIndex,x={};return u.supportFlexGap||("vertical"===a?o<h&&(x={marginBottom:m/(c?2:1)}):x=(0,l.c)((0,l.c)({},o<h&&(0,n.c)({},r,m/(c?2:1))),d&&{paddingBottom:p})),null===s||void 0===s?null:i.createElement(i.Fragment,null,i.createElement("div",{className:t,style:x},s),o<h&&c&&i.createElement("span",{className:"".concat(t,"-split"),style:x},c))}var m=a(38304),p=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(a[l[n]]=e[l[n]])}return a},v=i.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),h={small:8,middle:16,large:24};const x=function(e){var t,a=i.useContext(d.MT),r=a.getPrefixCls,x=a.space,g=a.direction,j=e.size,y=void 0===j?(null===x||void 0===x?void 0:x.size)||"small":j,f=e.align,I=e.className,b=e.children,S=e.direction,k=void 0===S?"horizontal":S,N=e.prefixCls,C=e.split,E=e.style,z=e.wrap,w=void 0!==z&&z,P=p(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),O=(0,m.c)(),A=i.useMemo((function(){return(Array.isArray(y)?y:[y,y]).map((function(e){return function(e){return"string"===typeof e?h[e]:e||0}(e)}))}),[y]),D=(0,o.c)(A,2),T=D[0],F=D[1],G=(0,c.c)(b,{keepEmpty:!0}),M=void 0===f&&"horizontal"===k?"center":f,U=r("space",N),q=s()(U,"".concat(U,"-").concat(k),(t={},(0,n.c)(t,"".concat(U,"-rtl"),"rtl"===g),(0,n.c)(t,"".concat(U,"-align-").concat(M),M),t),I),B="".concat(U,"-item"),_="rtl"===g?"marginLeft":"marginRight",J=0,R=G.map((function(e,t){return null!==e&&void 0!==e&&(J=t),i.createElement(u,{className:B,key:"".concat(B,"-").concat(t),direction:k,index:t,marginDirection:_,split:C,wrap:w},e)})),$=i.useMemo((function(){return{horizontalSize:T,verticalSize:F,latestIndex:J,supportFlexGap:O}}),[T,F,J,O]);if(0===G.length)return null;var L={};return w&&(L.flexWrap="wrap",O||(L.marginBottom=-F)),O&&(L.columnGap=T,L.rowGap=F),i.createElement("div",(0,l.c)({className:q,style:(0,l.c)((0,l.c)({},L),E)},P),i.createElement(v.Provider,{value:$},R))}}}]);
//# sourceMappingURL=348.909f87b2.chunk.js.map