{"version":3,"file":"static/js/745.c1d44e8d.chunk.js","mappings":"8SA0BA,MAAMA,EAAU,CACd,CACEC,MAAO,KACPC,UAAW,KACXC,IAAK,MAEP,CACEF,MAAO,SACPC,UAAW,mBACXC,IAAK,oBAGP,CACEF,MAAO,UACPC,UAAW,SACXC,IAAK,UAEP,CACEF,MAAO,WACPC,UAAW,cACXC,IAAK,eAGP,CACEF,MAAO,WACPC,UAAW,eACXC,IAAK,gBAGP,CACEF,MAAO,UACPC,UAAW,cACXC,IAAK,gBAGHC,EAAqB,CACzB,CACEC,MAAO,WACPC,MAAO,YAET,CACED,MAAO,WACPC,MAAO,YAET,CACED,MAAO,UACPC,MAAO,YAII,SAASC,IAAuB,IAADC,EAAAC,EAC5C,MAAOC,EAAgCC,IACrCC,EAAAA,EAAAA,WAAS,IACJC,EAAYC,IAAcF,EAAAA,EAAAA,UAAS,KACnCG,EAAaC,IAAeJ,EAAAA,EAAAA,UAAS,KACrCK,EAAgBC,IAAqBN,EAAAA,EAAAA,UAAS,KAE9CO,EAAKC,IAAUR,EAAAA,EAAAA,UAAS,KAExBS,EAAwBC,IAA6BV,EAAAA,EAAAA,WAAS,IAE9DW,EAAMC,IAAWZ,EAAAA,EAAAA,UAASa,KAAKC,MAAkB,QAAblB,EAACmB,oBAAY,IAAAnB,OAAA,EAAZA,EAAcoB,QAAQ,WAC3DC,EAAMC,IAAWlB,EAAAA,EAAAA,UAAS,KAC1BmB,EAA2BC,IAA0BpB,EAAAA,EAAAA,UAAS,KAC9DqB,EAASC,IAActB,EAAAA,EAAAA,UAAS,KAEhCuB,EAAsBC,IAA2BxB,EAAAA,EAAAA,UAAS,IA8F3DyB,EAAgCA,KACpCjB,EAAO,IACPT,GAAkC,EAAM,EAWpC2B,EAAYC,UAChB,IAAK,IAADC,EACF,MAAMC,QAAiBC,IAAAA,IAAU,gEAADC,OACsC,OAAJpB,QAAI,IAAJA,GAAU,QAANiB,EAAJjB,EAAMA,YAAI,IAAAiB,OAAN,EAAJA,EAAYI,WAC5E,CACEC,QAAS,CACPC,cAAmB,OAAJvB,QAAI,IAAJA,OAAI,EAAJA,EAAMwB,eAK3BjB,EAAQW,EAASZ,KACnB,CAAE,MAAOmB,GACPC,QAAQD,MAAM,8BAAoC,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOE,QACtD,GASF,OAPAC,EAAAA,EAAAA,YAAU,KAAO,IAADC,EACd5B,EAAQC,KAAKC,MAAkB,QAAb0B,EAACzB,oBAAY,IAAAyB,OAAA,EAAZA,EAAcxB,QAAQ,UAEzCU,IAzDiBC,WACjB,IAAK,IAADc,EACF,MAAMZ,QAAiBC,IAAAA,IAAU,gDAADC,OACsB,OAAJpB,QAAI,IAAJA,GAAU,QAAN8B,EAAJ9B,EAAMA,YAAI,IAAA8B,OAAN,EAAJA,EAAYT,UAAS,aACrE,CACEC,QAAS,CACPC,cAAmB,OAAJvB,QAAI,IAAJA,OAAI,EAAJA,EAAMwB,eAK3BE,QAAQK,IAAY,OAARb,QAAQ,IAARA,OAAQ,EAARA,EAAUZ,KAAM,UAC5B,MAAM0B,EAAU,GAChB,IAAK,MAAMC,KAAgB,OAARf,QAAQ,IAARA,OAAQ,EAARA,EAAUZ,KAC3B0B,EAAQE,KAAK,CACXnD,MAAW,OAAJkD,QAAI,IAAJA,OAAI,EAAJA,EAAME,GACbrD,MAAM,GAADsC,OAAS,OAAJa,QAAI,IAAJA,OAAI,EAAJA,EAAMG,UAAS,KAAAhB,OAAQ,OAAJa,QAAI,IAAJA,OAAI,EAAJA,EAAMI,YAIvC5C,EAAYuC,EACd,CAAE,MAAOP,GACPC,QAAQD,MAAM,8BAAoC,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOE,QACtD,GAmCAW,GAxFetB,WACf,IAAK,IAADuB,EACF,MAAMrB,QAAiBC,IAAAA,IAAU,wDAADC,OAC8B,OAAJpB,QAAI,IAAJA,GAAU,QAANuC,EAAJvC,EAAMA,YAAI,IAAAuC,OAAN,EAAJA,EAAYlB,WACpE,CACEC,QAAS,CACPC,cAAmB,OAAJvB,QAAI,IAAJA,OAAI,EAAJA,EAAMwB,eAKrBQ,EAAU,GAChB,IAAK,MAAMC,KAAgB,OAARf,QAAQ,IAARA,OAAQ,EAARA,EAAUZ,KAC3B0B,EAAQE,KAAK,CACXnD,MAAW,OAAJkD,QAAI,IAAJA,OAAI,EAAJA,EAAME,GACbrD,MAAW,OAAJmD,QAAI,IAAJA,OAAI,EAAJA,EAAMvD,MACbkC,qBAA0B,OAAJqB,QAAI,IAAJA,OAAI,EAAJA,EAAMrB,qBAC5B4B,aAAkB,OAAJP,QAAI,IAAJA,OAAI,EAAJA,EAAMO,eAIxBjD,EAAWyC,EACb,CAAE,MAAOP,GACPC,QAAQD,MAAM,8BAAoC,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOE,QACtD,GAiEAc,EAAU,GACT,KAEDC,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAC,SAAA,EACEC,EAAAA,EAAAA,KAACC,EAAAA,EAAK,CACJpE,MAAM,qBACNqE,MAAO,IACPC,UAAQ,EACRC,QAAS9D,EACT+D,SAAUpC,EACVqC,OAAQ,KACRC,WACEP,EAAAA,EAAAA,KAACQ,EAAAA,IAAW,CAACC,UAAU,kCAAkCC,KAAM,KAChEX,UAEDF,EAAAA,EAAAA,MAACc,EAAAA,EAAI,CAACC,OAAO,WAAWC,KAAK,QAAOd,SAAA,EAClCC,EAAAA,EAAAA,KAACW,EAAAA,EAAKG,KAAI,CACR7E,MAAM,MACN4E,KAAK,MACLE,MAAO,CACL,CACEC,UAAU,EACVlC,QAAS,sBAEXiB,UAEFC,EAAAA,EAAAA,KAACiB,EAAAA,EAAM,CACL9B,QAAS1C,EACTP,MAAOa,EACPmE,SAAWhF,GAAUc,EAAOd,QAGhC8D,EAAAA,EAAAA,KAACW,EAAAA,EAAKG,KAAI,CACR7E,MAAM,QACN4E,KAAK,QACLE,MAAO,CACL,CACEC,UAAU,EACVlC,QAAS,sBAEXiB,UAEFC,EAAAA,EAAAA,KAACiB,EAAAA,EAAM,CACL9B,QAASxC,EACTT,MAAOW,EACPqE,SAAWhF,GAAUY,EAAkBZ,QAG3C8D,EAAAA,EAAAA,KAACW,EAAAA,EAAKG,KAAI,CAAC7E,MAAM,cAAc4E,KAAK,cAAad,UAC/CC,EAAAA,EAAAA,KAACmB,EAAAA,EAASC,MAAK,CACbjC,QAASnD,EACTqF,aAAc,EACdH,SAnHMI,IAChBzC,QAAQK,IAAI,aAAcoC,GAC1BxD,EAAWwD,EAAc,OAqHnBzB,EAAAA,EAAAA,MAAC0B,EAAAA,EAAG,CAAAxB,SAAA,EACFC,EAAAA,EAAAA,KAACwB,EAAAA,EAAG,CAACC,GAAI,GAAIC,KAAM,GAAIjB,UAAU,sBAAqBV,UACpDC,EAAAA,EAAAA,KAAC2B,EAAAA,EAAM,CACLC,OAAK,EACLC,KAAK,UACLC,SAAS,SACTC,QAASA,IAzLD5D,WACpB,IAAK,IAAD6D,EAAAC,EACF,MAAM5D,QAAiBC,IAAAA,KACrB,qDACA,CACE4D,iBAAkBnF,EAClBoF,OAAQtF,EACR2B,UAAe,OAAJrB,QAAI,IAAJA,GAAU,QAAN6E,EAAJ7E,EAAMA,YAAI,IAAA6E,OAAN,EAAJA,EAAYxD,UACvB4D,eAAuB,OAAPvE,QAAO,IAAPA,OAAO,EAAPA,EAASwE,SAAS,WAClCC,eAAuB,OAAPzE,QAAO,IAAPA,OAAO,EAAPA,EAASwE,SAAS,YAClCE,gBAAwB,OAAP1E,QAAO,IAAPA,OAAO,EAAPA,EAASwE,SAAS,aAErC,CACE5D,QAAS,CACPC,cAAmB,OAAJvB,QAAI,IAAJA,OAAI,EAAJA,EAAMwB,eAM3BE,QAAQK,IAAIb,GACZS,EAAAA,GAAQ0D,QAAgB,OAARnE,QAAQ,IAARA,GAAc,QAAN4D,EAAR5D,EAAUZ,YAAI,IAAAwE,OAAN,EAARA,EAAgBnD,SAChC9B,EAAO,IACPF,EAAkB,IAClBgB,EAAW,IACXI,IACA3B,GAAkC,EACpC,CAAE,MAAOqC,GAEe,wCAAb,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOE,UACTA,EAAAA,GAAQF,MAAM,mDAElB,GAyJ2B6D,GAAgB1C,SAChC,WAKHC,EAAAA,EAAAA,KAACwB,EAAAA,EAAG,CAACC,GAAI,GAAIC,KAAM,GAAIjB,UAAU,kCAAiCV,UAChEC,EAAAA,EAAAA,KAAC2B,EAAAA,EAAM,CAACC,OAAK,EAACG,QAAS9D,EAA8B8B,SAAC,sBAQ9DC,EAAAA,EAAAA,KAAA,OAAK0C,MAAO,CAAEC,UAAW,QAASC,aAAc,QAAS7C,UACvDC,EAAAA,EAAAA,KAAC2B,EAAAA,EAAM,CACLE,KAAK,UACLE,QA9M4Bc,KAClCtG,GAAkC,EAAK,EA8MjCuG,SAAgC,IAAlB,OAAJ3F,QAAI,IAAJA,GAAU,QAANd,EAAJc,EAAMA,YAAI,IAAAd,OAAN,EAAJA,EAAY0G,QAAYhD,SACnC,uBAIHC,EAAAA,EAAAA,KAACgD,EAAAA,EAAK,CAACpH,QAASA,EAASqH,WAAYxF,EAAMyF,UAAQ,EACnDrH,MAAOA,IAAM,4BACbyE,OAAQA,IAAM,+BAGpB,C","sources":["view/pages/document-permission/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport {\n  Button,\n  Form,\n  Row,\n  Col,\n  Space,\n  Table,\n  Select,\n  Input,\n  DatePicker,\n  TimePicker,\n  Modal,\n  message,\n  Upload,\n} from \"antd\";\nimport { RiCloseFill, RiCalendarLine } from \"react-icons/ri\";\nimport axios from \"axios\";\nimport { Checkbox } from \"antd\";\n\n// import InfoProfile from \"./personel-information\";\n// import MenuProfile from \"./menu\";\n// import PasswordProfile from \"./password-change\";\n// import ProtectedAppPage from \"../Protected\";\n\nconst columns = [\n  {\n    title: \"ID\",\n    dataIndex: \"id\",\n    key: \"id\",\n  },\n  {\n    title: \"MDR ID\",\n    dataIndex: \"masterDocumentId\",\n    key: \"masterDocumentId\",\n  },\n\n  {\n    title: \"User ID\",\n    dataIndex: \"userId\",\n    key: \"userId\",\n  },\n  {\n    title: \"Reviewer\",\n    dataIndex: \"allowReview\",\n    key: \"allowReview\",\n  },\n\n  {\n    title: \"Approver\",\n    dataIndex: \"allowApprove\",\n    key: \"allowApprove\",\n  },\n\n  {\n    title: \"Creator\",\n    dataIndex: \"allowCreate\",\n    key: \"allowCreate\",\n  },\n];\nconst permissionsOptions = [\n  {\n    label: \"Reviewer\",\n    value: \"Reviewer\",\n  },\n  {\n    label: \"Approver\",\n    value: \"Approver\",\n  },\n  {\n    label: \"Creator\",\n    value: \"Creator\",\n  },\n];\n\nexport default function DocumentPermissions() {\n  const [DocumentPermissionModalVisible, setDocumentPermissionModalVisible] =\n    useState(false);\n  const [mdrOptions, setMdrData] = useState([]);\n  const [userOptions, setUserData] = useState([]);\n  const [permissionUser, setpermissionUser] = useState(\"\");\n\n  const [mdr, setMDR] = useState(\"\");\n\n  const [permissionModalVisible, setPermissionModalVisible] = useState(false);\n\n  const [user, setUser] = useState(JSON.parse(localStorage?.getItem(\"user\")));\n  const [data, setData] = useState([]);\n  const [DocumentPermissionOptions, setDocumentPermissions] = useState([]);\n  const [checked, setChecked] = useState([]);\n\n  const [DocumentPermissionId, setDocumentPermissionId] = useState(\"\");\n\n  const DocumentPermissionModalShow = () => {\n    setDocumentPermissionModalVisible(true);\n  };\n  const addPermission = async () => {\n    try {\n      const response = await axios.post(\n        \"http://54.81.250.98:8083/api/documents/permissions\",\n        {\n          masterDocumentId: mdr,\n          userId: permissionUser,\n          companyId: user?.user?.companyId,\n          createDocument: checked?.includes(\"Creator\"),\n          reviewDocument: checked?.includes(\"Reviewer\"),\n          approveDocument: checked?.includes(\"Approver\"),\n        },\n        {\n          headers: {\n            Authorization: user?.accessToken,\n            // Add other headers if needed\n          },\n        }\n      );\n      // Handle the response as needed\n      console.log(response);\n      message.success(response?.data?.message);\n      setMDR(\"\");\n      setpermissionUser(\"\");\n      setChecked([]);\n      fetchData();\n      setDocumentPermissionModalVisible(false);\n    } catch (error) {\n      // Handle errors\n      if (error?.message == \"Request failed with status code 403\") {\n        message.error(\"Permission Denied to create document on this MDR\");\n      }\n    }\n  };\n  const fetchMDR = async () => {\n    try {\n      const response = await axios.get(\n        `http://54.81.250.98:8083/api/documents/mdr?companyId=${user?.user?.companyId}`,\n        {\n          headers: {\n            Authorization: user?.accessToken,\n            // Add other headers if needed\n          },\n        }\n      );\n      const options = [];\n      for (const item of response?.data) {\n        options.push({\n          value: item?.id,\n          label: item?.title,\n          DocumentPermissionId: item?.DocumentPermissionId,\n          departmentId: item?.departmentId,\n        });\n      }\n\n      setMdrData(options); // Assuming the response.data is an array of DocumentPermissions\n    } catch (error) {\n      console.error(\"Error fetching departments:\", error?.message);\n    }\n  };\n  const onChange = (checkedValues) => {\n    console.log(\"checked = \", checkedValues);\n    setChecked(checkedValues);\n  };\n  const fetchUsers = async () => {\n    try {\n      const response = await axios.get(\n        `http://54.81.250.98:8083/api/users?companyId=${user?.user?.companyId}&roleId=2`,\n        {\n          headers: {\n            Authorization: user?.accessToken,\n            // Add other headers if needed\n          },\n        }\n      );\n      console.log(response?.data, \"UUUAUA\");\n      const options = [];\n      for (const item of response?.data) {\n        options.push({\n          value: item?.id,\n          label: `${item?.firstName} ${item?.lastName}`,\n        });\n      }\n\n      setUserData(options); // Assuming the response.data is an array of DocumentPermissions\n    } catch (error) {\n      console.error(\"Error fetching departments:\", error?.message);\n    }\n  };\n  const DocumentPermissionModalCancel = () => {\n    setMDR(\"\");\n    setDocumentPermissionModalVisible(false);\n  };\n\n  const permissionModalShow = () => {\n    setPermissionModalVisible(true);\n  };\n  const permissionModalCancel = () => {\n    setPermissionModalVisible(false);\n  };\n  const addDocumentPermission = async () => {};\n\n  const fetchData = async () => {\n    try {\n      const response = await axios.get(\n        `http://54.81.250.98:8083/api/documents/permissions?companyId=${user?.user?.companyId}`,\n        {\n          headers: {\n            Authorization: user?.accessToken,\n            // Add other headers if needed\n          },\n        }\n      );\n      setData(response.data); // Assuming the response.data is an array of departments\n    } catch (error) {\n      console.error(\"Error fetching departments:\", error?.message);\n    }\n  };\n  useEffect(() => {\n    setUser(JSON.parse(localStorage?.getItem(\"user\")));\n    // Fetch data when the component mounts\n    fetchData();\n    fetchUsers();\n    fetchMDR();\n  }, []);\n  return (\n    <>\n      <Modal\n        title=\"Create Permissions\"\n        width={416}\n        centered\n        visible={DocumentPermissionModalVisible}\n        onCancel={DocumentPermissionModalCancel}\n        footer={null}\n        closeIcon={\n          <RiCloseFill className=\"remix-icon text-color-black-100\" size={24} />\n        }\n      >\n        <Form layout=\"vertical\" name=\"basic\">\n          <Form.Item\n            label=\"MDR\"\n            name=\"mdr\"\n            rules={[\n              {\n                required: true,\n                message: \"Please select MDR\",\n              },\n            ]}\n          >\n            <Select\n              options={mdrOptions}\n              value={mdr}\n              onChange={(value) => setMDR(value)}\n            />\n          </Form.Item>\n          <Form.Item\n            label=\"Users\"\n            name=\"users\"\n            rules={[\n              {\n                required: true,\n                message: \"Please select MDR\",\n              },\n            ]}\n          >\n            <Select\n              options={userOptions}\n              value={permissionUser}\n              onChange={(value) => setpermissionUser(value)}\n            />\n          </Form.Item>\n          <Form.Item label=\"Permissions\" name=\"permissions\">\n            <Checkbox.Group\n              options={permissionsOptions}\n              defaultValue={0}\n              onChange={onChange}\n            />\n          </Form.Item>\n\n          <Row>\n            <Col md={12} span={24} className=\"hp-pr-sm-0 hp-pr-12\">\n              <Button\n                block\n                type=\"primary\"\n                htmlType=\"submit\"\n                onClick={() => addPermission()}\n              >\n                Add\n              </Button>\n            </Col>\n\n            <Col md={12} span={24} className=\"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12\">\n              <Button block onClick={DocumentPermissionModalCancel}>\n                Cancel\n              </Button>\n            </Col>\n          </Row>\n        </Form>\n      </Modal>\n\n      <div style={{ textAlign: \"right\", marginBottom: \"16px\" }}>\n        <Button\n          type=\"primary\"\n          onClick={DocumentPermissionModalShow}\n          disabled={user?.user?.roleId != 1}\n        >\n          Add Permissions\n        </Button>\n      </div>\n      <Table columns={columns} dataSource={data} bordered\n      title={() => 'All Documents Permissions'}\n      footer={() => 'You may filter Documents'}/>\n    </>\n  );\n}\n"],"names":["columns","title","dataIndex","key","permissionsOptions","label","value","DocumentPermissions","_localStorage","_user$user5","DocumentPermissionModalVisible","setDocumentPermissionModalVisible","useState","mdrOptions","setMdrData","userOptions","setUserData","permissionUser","setpermissionUser","mdr","setMDR","permissionModalVisible","setPermissionModalVisible","user","setUser","JSON","parse","localStorage","getItem","data","setData","DocumentPermissionOptions","setDocumentPermissions","checked","setChecked","DocumentPermissionId","setDocumentPermissionId","DocumentPermissionModalCancel","fetchData","async","_user$user4","response","axios","concat","companyId","headers","Authorization","accessToken","error","console","message","useEffect","_localStorage2","_user$user3","log","options","item","push","id","firstName","lastName","fetchUsers","_user$user2","departmentId","fetchMDR","_jsxs","_Fragment","children","_jsx","Modal","width","centered","visible","onCancel","footer","closeIcon","RiCloseFill","className","size","Form","layout","name","Item","rules","required","Select","onChange","Checkbox","Group","defaultValue","checkedValues","Row","Col","md","span","Button","block","type","htmlType","onClick","_user$user","_response$data","masterDocumentId","userId","createDocument","includes","reviewDocument","approveDocument","success","addPermission","style","textAlign","marginBottom","DocumentPermissionModalShow","disabled","roleId","Table","dataSource","bordered"],"sourceRoot":""}