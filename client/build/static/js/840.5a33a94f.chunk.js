"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[840],{59408:(e,t,l)=>{l.d(t,{c:()=>o});l(33280);var a=l(83144),n=l(82496);const o=()=>{var e;const t=null===(e=localStorage)||void 0===e?void 0:e.getItem("user");return console.log(t,"loggin"),t?null:(0,n.jsx)(a.Redirect,{to:"/pages/authentication/login"})}},9840:(e,t,l)=>{l.r(t),l.d(t,{default:()=>f});var a=l(69060),n=l(84196),o=l(26701),r=l(39322),i=l(57156),s=l(29512),c=l(38088),d=l(9992),u=l(74421),p=l(80336),m=l(19056),v=l(26536),h=l.n(v),x=l(38112),g=l(59408),y=(l(92948),l(82496));function f(){var e,t,l;const v=[{title:"Department Title",dataIndex:"title",key:"title"},{title:"Author Id",dataIndex:"authorId",key:"authorId"},{title:"Author Name",dataIndex:"authorName",key:"authorName"},{title:"No of Users",dataIndex:"noOfUsers",key:"noOfUsers"},{title:"Action",key:"action",render:(e,t)=>{var l;return(0,y.jsxs)(n.c,{size:"middle",children:[(0,y.jsx)("a",{children:"Delete"}),(0,y.jsx)("a",{onClick:()=>I(t),disabled:1!=(null===D||void 0===D||null===(l=D.user)||void 0===l?void 0:l.roleId),children:"Add User"})]})}}],[f,j]=(0,a.useState)([]),I=e=>{console.log("Add user for department:",e.id),T(e.id),(async()=>{try{var e;const t=await h().get("http://54.81.250.98:8083/api/users?companyId=".concat(null===D||void 0===D||null===(e=D.user)||void 0===e?void 0:e.companyId,"&roleId=2"),{headers:{Authorization:null===D||void 0===D?void 0:D.accessToken}}),l=[];for(const e of null===t||void 0===t?void 0:t.data)l.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.firstName});M(l)}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}})(),J()},[b,S]=(0,a.useState)(!1),[k,z]=(0,a.useState)(!1),[N,w]=(0,a.useState)(null),[C,A]=(0,a.useState)(""),[O,E]=(0,a.useState)(""),[U,T]=(0,a.useState)(""),[D,P]=(0,a.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[q,F]=(0,a.useState)([]),[G,M]=(0,a.useState)([]),[B,R]=(0,a.useState)([]),_=()=>{A(""),S(!1)},J=()=>{z(!0)},$=()=>{A(""),z(!1)},L=0,W=async()=>{try{var e;const t=await h().get("http://54.81.250.98:8083/api/departments?companyId=".concat(null===D||void 0===D||null===(e=D.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===D||void 0===D?void 0:D.accessToken}});console.log(t.data),R(t.data)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}};return(0,a.useEffect)((()=>{var e;P(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),W()}),[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.c,{title:"Add Department",width:400,centered:!0,visible:b,onCancel:_,footer:null,closeIcon:(0,y.jsx)(x.M5$,{className:"remix-icon text-color-black-100",size:24}),children:(0,y.jsx)(i.c,{justify:"space-between",align:"center",children:(0,y.jsx)(s.c,{span:20,children:(0,y.jsxs)(c.c,{layout:"vertical",name:"basic",children:[(0,y.jsx)(c.c.Item,{label:"Department Title",name:"title",rules:[{required:!0,message:"Please input your title"}],children:(0,y.jsx)(d.c,{value:C,onChange:e=>A(e.target.value)})}),(0,y.jsx)(c.c.Item,{label:"Department Suffix",name:"suffix",rules:[{required:!0,message:"Please input your suffix"}],children:(0,y.jsx)(d.c,{value:C,onChange:e=>E(e.target.value)})}),(0,y.jsxs)(i.c,{children:[(0,y.jsx)(s.c,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,y.jsx)(u.c,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{try{var e,t,l,a,n;console.log(D);const r=await h().post("http://54.81.250.98:8083/api/departments/",{title:C,suffix:O,noOfUsers:L,companyId:null===D||void 0===D||null===(e=D.user)||void 0===e?void 0:e.companyId,authorId:null===D||void 0===D||null===(t=D.user)||void 0===t?void 0:t.id,authorName:"".concat(null===D||void 0===D||null===(l=D.user)||void 0===l?void 0:l.firstName," ").concat(null===D||void 0===D||null===(a=D.user)||void 0===a?void 0:a.lastName)},{headers:{Authorization:null===D||void 0===D?void 0:D.accessToken}});console.log("departments response",r),o.cp.success(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message),W(),_()}catch(r){"Request failed with status code 401"==(null===r||void 0===r?void 0:r.message)&&o.cp.error("Unauthorized"),console.error("Error adding departments:",null===r||void 0===r?void 0:r.message)}})(),disabled:1!=(null===D||void 0===D||null===(t=D.user)||void 0===t?void 0:t.roleId),children:"Submit"})}),(0,y.jsx)(s.c,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,y.jsx)(u.c,{block:!0,onClick:_,children:"Cancel"})})]})]})})})}),(0,y.jsx)(r.c,{title:"Add User",width:400,centered:!0,visible:k,onCancel:$,footer:null,closeIcon:(0,y.jsx)(x.M5$,{className:"remix-icon text-color-black-100",size:24}),children:(0,y.jsx)(i.c,{justify:"space-between",align:"center",children:(0,y.jsx)(s.c,{span:20,children:(0,y.jsxs)(c.c,{layout:"vertical",name:"basic",children:[(0,y.jsx)(c.c.Item,{label:"Select User",name:"selectedUser",rules:[{required:!0,message:"Please select a user"}],children:(0,y.jsx)(p.default,{options:G,value:q,onChange:e=>F(e)})}),(0,y.jsxs)(i.c,{children:[(0,y.jsx)(s.c,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,y.jsx)(u.c,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{try{var e,t;console.log(G.find((e=>e.value===q)));const l=await h().post("http://54.81.250.98:8083/api/departments/associate",{title:C,companyId:null===D||void 0===D||null===(e=D.user)||void 0===e?void 0:e.companyId,userId:q,departmentCreator:0,noOfUsers:L+1,departmentId:U},{headers:{Authorization:null===D||void 0===D?void 0:D.accessToken}});console.log("association response",l),o.cp.success(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message),W(),_()}catch(l){"Request failed with status code 401"==(null===l||void 0===l?void 0:l.message)&&o.cp.error("Unauthorized"),console.error("Error adding departments:",null===l||void 0===l?void 0:l.message)}})(),children:"Submit"})}),(0,y.jsx)(s.c,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,y.jsx)(u.c,{block:!0,onClick:$,children:"Cancel"})})]})]})})})}),(0,y.jsx)("div",{style:{textAlign:"right",marginBottom:"16px"},children:(0,y.jsx)(u.c,{type:"primary",onClick:()=>{S(!0)},disabled:1!=(null===D||void 0===D||null===(l=D.user)||void 0===l?void 0:l.roleId),children:"Add Department"})}),(0,y.jsx)("div",{style:{overflowX:"auto"},children:(0,y.jsx)(m.c,{columns:v,dataSource:B})}),"      ",(0,y.jsx)(g.c,{})]})}},84196:(e,t,l)=>{l.d(t,{U:()=>v,c:()=>x});var a=l(45072),n=l(52536),o=l(32920),r=l(69060),i=l(264),s=l.n(i),c=l(6776),d=l(33832);function u(e){var t=e.className,l=e.direction,o=e.index,i=e.marginDirection,s=e.children,c=e.split,d=e.wrap,u=r.useContext(v),p=u.horizontalSize,m=u.verticalSize,h=u.latestIndex,x={};return u.supportFlexGap||("vertical"===l?o<h&&(x={marginBottom:p/(c?2:1)}):x=(0,a.c)((0,a.c)({},o<h&&(0,n.c)({},i,p/(c?2:1))),d&&{paddingBottom:m})),null===s||void 0===s?null:r.createElement(r.Fragment,null,r.createElement("div",{className:t,style:x},s),o<h&&c&&r.createElement("span",{className:"".concat(t,"-split"),style:x},c))}var p=l(38304),m=function(e,t){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(l[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(l[a[n]]=e[a[n]])}return l},v=r.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),h={small:8,middle:16,large:24};const x=function(e){var t,l=r.useContext(d.MT),i=l.getPrefixCls,x=l.space,g=l.direction,y=e.size,f=void 0===y?(null===x||void 0===x?void 0:x.size)||"small":y,j=e.align,I=e.className,b=e.children,S=e.direction,k=void 0===S?"horizontal":S,z=e.prefixCls,N=e.split,w=e.style,C=e.wrap,A=void 0!==C&&C,O=m(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),E=(0,p.c)(),U=r.useMemo((function(){return(Array.isArray(f)?f:[f,f]).map((function(e){return function(e){return"string"===typeof e?h[e]:e||0}(e)}))}),[f]),T=(0,o.c)(U,2),D=T[0],P=T[1],q=(0,c.c)(b,{keepEmpty:!0}),F=void 0===j&&"horizontal"===k?"center":j,G=i("space",z),M=s()(G,"".concat(G,"-").concat(k),(t={},(0,n.c)(t,"".concat(G,"-rtl"),"rtl"===g),(0,n.c)(t,"".concat(G,"-align-").concat(F),F),t),I),B="".concat(G,"-item"),R="rtl"===g?"marginLeft":"marginRight",_=0,J=q.map((function(e,t){return null!==e&&void 0!==e&&(_=t),r.createElement(u,{className:B,key:"".concat(B,"-").concat(t),direction:k,index:t,marginDirection:R,split:N,wrap:A},e)})),$=r.useMemo((function(){return{horizontalSize:D,verticalSize:P,latestIndex:_,supportFlexGap:E}}),[D,P,_,E]);if(0===q.length)return null;var L={};return A&&(L.flexWrap="wrap",E||(L.marginBottom=-P)),E&&(L.columnGap=D,L.rowGap=P),r.createElement("div",(0,a.c)({className:M,style:(0,a.c)((0,a.c)({},L),w)},O),r.createElement(v.Provider,{value:$},J))}},92948:()=>{}}]);
//# sourceMappingURL=840.5a33a94f.chunk.js.map