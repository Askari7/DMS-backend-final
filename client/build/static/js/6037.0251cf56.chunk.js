"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[6037],{23415:(e,t,l)=>{l.d(t,{A:()=>o});l(14556);var n=l(91688),a=l(70579);const o=()=>{var e;const t=null===(e=localStorage)||void 0===e?void 0:e.getItem("user");return console.log(t,"loggin"),t?null:(0,a.jsx)(n.Redirect,{to:"/pages/authentication/login"})}},86037:(e,t,l)=>{l.r(t),l.d(t,{default:()=>y});var n=l(65043),a=l(64435),o=l(15627),r=l(21261),s=l(47419),i=l(11645),d=l(94376),c=l(60521),u=l(89421),m=l(70610),p=l(26412),v=l(40854),h=l.n(v),x=l(22285),f=l(23415),g=(l(25884),l(70579));function y(){var e,t;const l=[{title:"Department Title",dataIndex:"title",key:"title"},{title:"Department Suffix",dataIndex:"suffix",key:"suffix"},{title:"Department Owner",dataIndex:"headLeads",key:"headLeads"},{title:"No of Users",dataIndex:"noOfUsers",key:"noOfUsers",sorter:(e,t)=>e.noOfUsers-t.noOfUsers},{title:"Action",key:"action",render:(e,t)=>{var l;return(0,g.jsxs)(a.A,{size:"middle",children:[(0,g.jsx)("a",{children:"Delete"}),(0,g.jsx)("a",{onClick:()=>A(t),disabled:1!=(null===D||void 0===D||null===(l=D.user)||void 0===l?void 0:l.roleId),children:"Add User"})]})}}],[v,y]=(0,n.useState)([]),A=e=>{console.log("Add user for department:",e.id),U(e.id),(async()=>{try{var e;const t=await h().get("http://54.81.250.98:8083/api/users?companyId=".concat(null===D||void 0===D||null===(e=D.user)||void 0===e?void 0:e.companyId,"&roleId=2"),{headers:{Authorization:null===D||void 0===D?void 0:D.accessToken}}),l=[];for(const e of null===t||void 0===t?void 0:t.data)l.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.firstName});G(l)}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}})(),L()},[j,b]=(0,n.useState)(!1),[I,S]=(0,n.useState)(!1),[k,z]=(0,n.useState)(null),[C,w]=(0,n.useState)(""),[N,O]=(0,n.useState)(""),[E,U]=(0,n.useState)(""),[D,P]=(0,n.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[T,q]=(0,n.useState)([]),[F,G]=(0,n.useState)([]),[B,R]=(0,n.useState)([]),_=()=>{w(""),b(!1)},L=()=>{S(!0)},Q=()=>{w(""),S(!1)},J=0,M=async()=>{try{var e;const t=await h().get("http://54.81.250.98:8083/api/departments?companyId=".concat(null===D||void 0===D||null===(e=D.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===D||void 0===D?void 0:D.accessToken}});console.log(t.data),R(t.data)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}};return(0,n.useEffect)((()=>{var e;P(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),M()}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.A,{title:"Add Department",width:400,centered:!0,visible:j,onCancel:_,footer:null,closeIcon:(0,g.jsx)(x.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,g.jsx)(s.A,{justify:"space-between",align:"center",children:(0,g.jsx)(i.A,{span:20,children:(0,g.jsxs)(d.A,{layout:"vertical",name:"basic",children:[(0,g.jsx)(d.A.Item,{label:"Department Title",name:"title",rules:[{required:!0,message:"Please input your title"}],children:(0,g.jsx)(c.A,{value:C,onChange:e=>w(e.target.value)})}),(0,g.jsx)(d.A.Item,{label:"Department Suffix",name:"suffix",rules:[{required:!0,message:"Please input your suffix"}],children:(0,g.jsx)(c.A,{value:C,onChange:e=>O(e.target.value)})}),(0,g.jsxs)(s.A,{children:[(0,g.jsx)(i.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,g.jsx)(u.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{try{var e,t,l,n,a;console.log(D);const r=await h().post("http://54.81.250.98:8083/api/departments/",{title:C,suffix:N,noOfUsers:J,companyId:null===D||void 0===D||null===(e=D.user)||void 0===e?void 0:e.companyId,authorId:null===D||void 0===D||null===(t=D.user)||void 0===t?void 0:t.id,authorName:"".concat(null===D||void 0===D||null===(l=D.user)||void 0===l?void 0:l.firstName," ").concat(null===D||void 0===D||null===(n=D.user)||void 0===n?void 0:n.lastName)},{headers:{Authorization:null===D||void 0===D?void 0:D.accessToken}});console.log("departments response",r),o.Ay.success(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message),M(),_()}catch(r){"Request failed with status code 401"==(null===r||void 0===r?void 0:r.message)&&o.Ay.error("Unauthorized"),console.error("Error adding departments:",null===r||void 0===r?void 0:r.message)}})(),disabled:1!=(null===D||void 0===D||null===(t=D.user)||void 0===t?void 0:t.roleId),children:"Submit"})}),(0,g.jsx)(i.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,g.jsx)(u.A,{block:!0,onClick:_,children:"Cancel"})})]})]})})})}),(0,g.jsx)(r.A,{title:"Add User",width:400,centered:!0,visible:I,onCancel:Q,footer:null,closeIcon:(0,g.jsx)(x.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,g.jsx)(s.A,{justify:"space-between",align:"center",children:(0,g.jsx)(i.A,{span:20,children:(0,g.jsxs)(d.A,{layout:"vertical",name:"basic",children:[(0,g.jsx)(d.A.Item,{label:"Select User",name:"selectedUser",rules:[{required:!0,message:"Please select a user"}],children:(0,g.jsx)(m.A,{options:F,value:T,onChange:e=>q(e)})}),(0,g.jsxs)(s.A,{children:[(0,g.jsx)(i.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,g.jsx)(u.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{try{var e,t;console.log(F.find((e=>e.value===T)));const l=await h().post("http://54.81.250.98:8083/api/departments/associate",{title:C,companyId:null===D||void 0===D||null===(e=D.user)||void 0===e?void 0:e.companyId,userId:T,departmentCreator:0,noOfUsers:J+1,departmentId:E},{headers:{Authorization:null===D||void 0===D?void 0:D.accessToken}});console.log("association response",l),o.Ay.success(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message),M(),_()}catch(l){"Request failed with status code 401"==(null===l||void 0===l?void 0:l.message)&&o.Ay.error("Unauthorized"),console.error("Error adding departments:",null===l||void 0===l?void 0:l.message)}})(),children:"Submit"})}),(0,g.jsx)(i.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,g.jsx)(u.A,{block:!0,onClick:Q,children:"Cancel"})})]})]})})})}),D&&"1"==(null===D||void 0===D?void 0:D.user.roleId)&&(0,g.jsx)("div",{style:{textAlign:"right",marginBottom:"16px"},children:(0,g.jsx)(u.A,{type:"primary",onClick:()=>{b(!0)},children:"Add Department"})}),(0,g.jsx)("div",{style:{overflowX:"auto"},children:(0,g.jsx)(p.A,{columns:l,dataSource:B,bordered:!0,size:"middle",title:()=>"All Department Information",footer:()=>"You may filter departments"})}),"      ",(0,g.jsx)(f.A,{})]})}},64435:(e,t,l)=>{l.d(t,{e:()=>v,A:()=>x});var n=l(58168),a=l(64467),o=l(5544),r=l(65043),s=l(98139),i=l.n(s),d=l(62149),c=l(25055);function u(e){var t=e.className,l=e.direction,o=e.index,s=e.marginDirection,i=e.children,d=e.split,c=e.wrap,u=r.useContext(v),m=u.horizontalSize,p=u.verticalSize,h=u.latestIndex,x={};return u.supportFlexGap||("vertical"===l?o<h&&(x={marginBottom:m/(d?2:1)}):x=(0,n.A)((0,n.A)({},o<h&&(0,a.A)({},s,m/(d?2:1))),c&&{paddingBottom:p})),null===i||void 0===i?null:r.createElement(r.Fragment,null,r.createElement("div",{className:t,style:x},i),o<h&&d&&r.createElement("span",{className:"".concat(t,"-split"),style:x},d))}var m=l(46058),p=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(l[n[a]]=e[n[a]])}return l},v=r.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),h={small:8,middle:16,large:24};const x=function(e){var t,l=r.useContext(c.QO),s=l.getPrefixCls,x=l.space,f=l.direction,g=e.size,y=void 0===g?(null===x||void 0===x?void 0:x.size)||"small":g,A=e.align,j=e.className,b=e.children,I=e.direction,S=void 0===I?"horizontal":I,k=e.prefixCls,z=e.split,C=e.style,w=e.wrap,N=void 0!==w&&w,O=p(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),E=(0,m.A)(),U=r.useMemo((function(){return(Array.isArray(y)?y:[y,y]).map((function(e){return function(e){return"string"===typeof e?h[e]:e||0}(e)}))}),[y]),D=(0,o.A)(U,2),P=D[0],T=D[1],q=(0,d.A)(b,{keepEmpty:!0}),F=void 0===A&&"horizontal"===S?"center":A,G=s("space",k),B=i()(G,"".concat(G,"-").concat(S),(t={},(0,a.A)(t,"".concat(G,"-rtl"),"rtl"===f),(0,a.A)(t,"".concat(G,"-align-").concat(F),F),t),j),R="".concat(G,"-item"),_="rtl"===f?"marginLeft":"marginRight",L=0,Q=q.map((function(e,t){return null!==e&&void 0!==e&&(L=t),r.createElement(u,{className:R,key:"".concat(R,"-").concat(t),direction:S,index:t,marginDirection:_,split:z,wrap:N},e)})),J=r.useMemo((function(){return{horizontalSize:P,verticalSize:T,latestIndex:L,supportFlexGap:E}}),[P,T,L,E]);if(0===q.length)return null;var M={};return N&&(M.flexWrap="wrap",E||(M.marginBottom=-T)),E&&(M.columnGap=P,M.rowGap=T),r.createElement("div",(0,n.A)({className:B,style:(0,n.A)((0,n.A)({},M),C)},O),r.createElement(v.Provider,{value:J},Q))}},25884:()=>{}}]);
//# sourceMappingURL=6037.0251cf56.chunk.js.map