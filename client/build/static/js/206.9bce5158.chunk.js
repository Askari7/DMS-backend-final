"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[206],{23415:(e,t,a)=>{a.d(t,{A:()=>o});a(14556);var n=a(91688),l=a(70579);const o=()=>{var e;const t=null===(e=localStorage)||void 0===e?void 0:e.getItem("user");return console.log(t,"loggin"),t?null:(0,l.jsx)(n.Redirect,{to:"/pages/authentication/login"})}},19206:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(65043),l=a(64435),o=a(15627),i=a(21261),r=a(94376),s=a(62967),c=a(33733),d=a(79170),u=a(47419),m=a(11645),p=a(89421),v=a(26412),h=a(73754),x=a(40854),y=a.n(x),g=a(23415),j=a(70579);const A=[{title:"Project Id",dataIndex:"id",key:"id"},{title:"Project Title",dataIndex:"title",key:"title"},{title:"Project Code",dataIndex:"code",key:"code"},{title:"Client Email",dataIndex:"clientEmail",key:"clientEmail"},{title:"Author Name",dataIndex:"authorName",key:"authorName"},{title:"Status",dataIndex:"status",key:"status"},{title:"No of Workers",dataIndex:"noOfUsers",key:"noOfUsers"},{title:"Start Date",dataIndex:"startedDate",key:"startedDate"},{title:"End Date",dataIndex:"endedDate",key:"endedDate"},{title:"Action",key:"action",render:(e,t)=>(0,j.jsx)(l.A,{size:"middle",children:(0,j.jsx)("a",{onClick:()=>(e=>{e.delete=!0,fetchData().catch((e=>{console.error("Error deleting project:",e)}))})(t),children:"Delete"})})}];function f(){var e,t;const[a,l]=(0,n.useState)([]),[x,f]=(0,n.useState)(""),[I,N]=(0,n.useState)(!1),[k,b]=(0,n.useState)(!1),[C,D]=(0,n.useState)(""),[E,w]=(0,n.useState)(""),[z,P]=(0,n.useState)(""),[O,G]=(0,n.useState)(""),[T,B]=(0,n.useState)(""),[F,_]=(0,n.useState)([]),[q,L]=(0,n.useState)(""),[Q,U]=(0,n.useState)(""),[J,M]=(0,n.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[R,W]=(0,n.useState)([]),[H,K]=(0,n.useState)([]),[V,X]=(0,n.useState)([]),[Y,Z]=(0,n.useState)([]),[$,ee]=(0,n.useState)(""),te=()=>{U(""),L(""),D(""),P(""),f(""),_([]),N(!1)},ae=async()=>{console.log("inside"),console.log("dates",O,T);try{var e,t,a,n,l;const i=await y().post("http://127.0.0.1:8083/api/projects/",{title:C,status:"Initialized",noOfUsers:0,clientEmail:z,code:Q,companyId:null===J||void 0===J||null===(e=J.user)||void 0===e?void 0:e.companyId,authorId:null===J||void 0===J||null===(t=J.user)||void 0===t?void 0:t.id,authorName:"".concat(null===J||void 0===J||null===(a=J.user)||void 0===a?void 0:a.firstName," ").concat(null===J||void 0===J||null===(n=J.user)||void 0===n?void 0:n.lastName),startedDate:O,endedDate:T},{headers:{Authorization:null===J||void 0===J?void 0:J.accessToken}});console.log(i),o.Ay.success(null===i||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message),U(""),L(""),D(""),P(""),_([]),N(!1),ne()}catch(i){console.error("Error adding projects:",i)}},ne=async()=>{try{var e;const t=await y().get("http://127.0.0.1:8083/api/projects?companyId=".concat(null===J||void 0===J||null===(e=J.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===J||void 0===J?void 0:J.accessToken}});console.log("Project response data",t.data);const a=t.data.map((e=>{const t=new Date(e.startedDate).toLocaleDateString("en-GB"),a=new Date(e.endedDate).toLocaleDateString("en-GB");return{...e,startedDate:t,endedDate:a}}));W(a);const n=[];for(const e of null===t||void 0===t?void 0:t.data)n.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title});console.log(n),X(n)}catch(t){console.error("Error fetching projects:",null===t||void 0===t?void 0:t.message)}};(0,n.useEffect)((()=>{var e;M(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),(async()=>{try{var e;const t=await y().get("http://127.0.0.1:8083/api/clients?companyId=".concat(null===J||void 0===J||null===(e=J.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===J||void 0===J?void 0:J.accessToken}}),a=new Set,n=null===t||void 0===t?void 0:t.data.reduce(((e,t)=>(a.has(t.companyName)||(a.add(t.com),e.push({value:t.companyName,label:t.companyName,name:t.companyName})),e)),[]);Z(n)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}})(),(async()=>{try{var e;const t=await y().get("http://127.0.0.1:8083/api/departments?companyId=".concat(null===J||void 0===J||null===(e=J.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===J||void 0===J?void 0:J.accessToken}}),a=[];for(const e of null===t||void 0===t?void 0:t.data)a.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title});K(a)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}})(),ne()}),[]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(i.A,{title:"Add Project",width:416,centered:!0,onFinish:()=>{ae(),U(""),L(""),D(""),P(""),_([]),N(!1)},visible:I,onCancel:te,footer:null,closeIcon:(0,j.jsx)(h.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,j.jsxs)(r.A,{layout:"vertical",name:"basic",children:[(0,j.jsx)(r.A.Item,{label:"Project Code",name:"projCode",children:(0,j.jsx)(s.A,{value:E,onChange:e=>U(e.target.value)})}),"          ",(0,j.jsx)(r.A.Item,{label:"Project Name",name:"projName",children:(0,j.jsx)(s.A,{value:C,onChange:e=>D(e.target.value)})}),(0,j.jsx)(r.A.Item,{label:"Client Email",name:"clientEmail",rules:[{required:!0,message:"Please select Client Email"}],children:(0,j.jsx)(c.A,{options:Y,value:z,onChange:e=>P(e)})}),(0,j.jsx)(r.A.Item,{label:"Start Date",name:"startedDate",rules:[{required:!0,message:"Please select start date"}],children:(0,j.jsx)(d.A,{style:{width:"100%"},onChange:e=>{G(e)}})}),(0,j.jsx)(r.A.Item,{label:"End Date",name:"endedDate",rules:[{required:!0,message:"Please select end date"}],children:(0,j.jsx)(d.A,{style:{width:"100%"},onChange:e=>{B(e)}})}),(0,j.jsxs)(u.A,{children:[(0,j.jsx)(m.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,j.jsx)(p.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>ae(),children:"Add"})}),(0,j.jsx)(m.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,j.jsx)(p.A,{block:!0,onClick:te,children:"Cancel"})})]})]})}),(0,j.jsx)(i.A,{title:"Document Permissions",width:416,centered:!0,visible:k,onCancel:()=>{b(!1)},footer:null,closeIcon:(0,j.jsx)(h.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,j.jsxs)(r.A,{layout:"vertical",name:"basic",children:[(0,j.jsx)(r.A.Item,{label:"Project Name",name:"projectId",children:(0,j.jsx)(c.A,{options:V,value:$,onChange:e=>ee(e)})}),(0,j.jsxs)(u.A,{children:[(0,j.jsx)(m.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,j.jsx)(p.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>ae(),children:"Add"})}),(0,j.jsx)(m.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,j.jsx)(p.A,{block:!0,onClick:te,children:"Cancel"})})]})]})}),(0,j.jsx)("div",{style:{textAlign:"right",marginBottom:"16px"},children:(0,j.jsx)(p.A,{type:"primary",onClick:()=>{N(!0)},disabled:1!=(null===J||void 0===J||null===(t=J.user)||void 0===t?void 0:t.roleId),children:"Add Project"})}),(0,j.jsx)(v.A,{columns:A,dataSource:S(R)}),(0,j.jsx)(g.A,{})]})}const S=e=>{const t={};e.forEach((e=>{const a=e.title;t[a]?t[a].departmentNames.push(e.departmentName+","):t[a]={...e,departmentNames:[e.departmentName+","]}}));return Object.values(t).map((e=>({...e,departmentName:e.departmentNames.join("")})))}},64435:(e,t,a)=>{a.d(t,{e:()=>v,A:()=>x});var n=a(58168),l=a(64467),o=a(5544),i=a(65043),r=a(98139),s=a.n(r),c=a(62149),d=a(25055);function u(e){var t=e.className,a=e.direction,o=e.index,r=e.marginDirection,s=e.children,c=e.split,d=e.wrap,u=i.useContext(v),m=u.horizontalSize,p=u.verticalSize,h=u.latestIndex,x={};return u.supportFlexGap||("vertical"===a?o<h&&(x={marginBottom:m/(c?2:1)}):x=(0,n.A)((0,n.A)({},o<h&&(0,l.A)({},r,m/(c?2:1))),d&&{paddingBottom:p})),null===s||void 0===s?null:i.createElement(i.Fragment,null,i.createElement("div",{className:t,style:x},s),o<h&&c&&i.createElement("span",{className:"".concat(t,"-split"),style:x},c))}var m=a(46058),p=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]])}return a},v=i.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),h={small:8,middle:16,large:24};const x=function(e){var t,a=i.useContext(d.QO),r=a.getPrefixCls,x=a.space,y=a.direction,g=e.size,j=void 0===g?(null===x||void 0===x?void 0:x.size)||"small":g,A=e.align,f=e.className,S=e.children,I=e.direction,N=void 0===I?"horizontal":I,k=e.prefixCls,b=e.split,C=e.style,D=e.wrap,E=void 0!==D&&D,w=p(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),z=(0,m.A)(),P=i.useMemo((function(){return(Array.isArray(j)?j:[j,j]).map((function(e){return function(e){return"string"===typeof e?h[e]:e||0}(e)}))}),[j]),O=(0,o.A)(P,2),G=O[0],T=O[1],B=(0,c.A)(S,{keepEmpty:!0}),F=void 0===A&&"horizontal"===N?"center":A,_=r("space",k),q=s()(_,"".concat(_,"-").concat(N),(t={},(0,l.A)(t,"".concat(_,"-rtl"),"rtl"===y),(0,l.A)(t,"".concat(_,"-align-").concat(F),F),t),f),L="".concat(_,"-item"),Q="rtl"===y?"marginLeft":"marginRight",U=0,J=B.map((function(e,t){return null!==e&&void 0!==e&&(U=t),i.createElement(u,{className:L,key:"".concat(L,"-").concat(t),direction:N,index:t,marginDirection:Q,split:b,wrap:E},e)})),M=i.useMemo((function(){return{horizontalSize:G,verticalSize:T,latestIndex:U,supportFlexGap:z}}),[G,T,U,z]);if(0===B.length)return null;var R={};return E&&(R.flexWrap="wrap",z||(R.marginBottom=-T)),z&&(R.columnGap=G,R.rowGap=T),i.createElement("div",(0,n.A)({className:q,style:(0,n.A)((0,n.A)({},R),C)},w),i.createElement(v.Provider,{value:M},J))}}}]);
//# sourceMappingURL=206.9bce5158.chunk.js.map