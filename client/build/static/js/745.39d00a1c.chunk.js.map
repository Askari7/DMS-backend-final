{"version":3,"file":"static/js/745.39d00a1c.chunk.js","mappings":"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","sources":["view/pages/document-permission/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nimport {\r\n  Button,\r\n  Form,\r\n  Row,\r\n  Col,\r\n  Space,\r\n  Table,\r\n  Select,\r\n  Input,\r\n  DatePicker,\r\n  TimePicker,\r\n  Modal,\r\n  message,\r\n  Upload,\r\n} from \"antd\";\r\nimport { RiCloseFill, RiCalendarLine } from \"react-icons/ri\";\r\nimport axios from \"axios\";\r\nimport { Checkbox } from \"antd\";\r\n\r\n// import InfoProfile from \"./personel-information\";\r\n// import MenuProfile from \"./menu\";\r\n// import PasswordProfile from \"./password-change\";\r\n// import ProtectedAppPage from \"../Protected\";\r\n\r\nconst columns = [\r\n  {\r\n    title: \"ID\",\r\n    dataIndex: \"id\",\r\n    key: \"id\",\r\n  },\r\n  {\r\n    title: \"MDR ID\",\r\n    dataIndex: \"masterDocumentId\",\r\n    key: \"masterDocumentId\",\r\n  },\r\n\r\n  {\r\n    title: \"User ID\",\r\n    dataIndex: \"userId\",\r\n    key: \"userId\",\r\n  },\r\n  {\r\n    title: \"Reviewer\",\r\n    dataIndex: \"allowReview\",\r\n    key: \"allowReview\",\r\n  },\r\n\r\n  {\r\n    title: \"Approver\",\r\n    dataIndex: \"allowApprove\",\r\n    key: \"allowApprove\",\r\n  },\r\n\r\n  {\r\n    title: \"Creator\",\r\n    dataIndex: \"allowCreate\",\r\n    key: \"allowCreate\",\r\n  },\r\n];\r\nconst permissionsOptions = [\r\n  {\r\n    label: \"Reviewer\",\r\n    value: \"Reviewer\",\r\n  },\r\n  {\r\n    label: \"Approver\",\r\n    value: \"Approver\",\r\n  },\r\n  {\r\n    label: \"Creator\",\r\n    value: \"Creator\",\r\n  },\r\n];\r\n\r\nexport default function DocumentPermissions() {\r\n  const [DocumentPermissionModalVisible, setDocumentPermissionModalVisible] =\r\n    useState(false);\r\n  const [mdrOptions, setMdrData] = useState([]);\r\n  const [userOptions, setUserData] = useState([]);\r\n  const [permissionUser, setpermissionUser] = useState(\"\");\r\n\r\n  const [mdr, setMDR] = useState(\"\");\r\n\r\n  const [permissionModalVisible, setPermissionModalVisible] = useState(false);\r\n\r\n  const [user, setUser] = useState(JSON.parse(localStorage?.getItem(\"user\")));\r\n  const [data, setData] = useState([]);\r\n  const [DocumentPermissionOptions, setDocumentPermissions] = useState([]);\r\n  const [checked, setChecked] = useState([]);\r\n\r\n  const [DocumentPermissionId, setDocumentPermissionId] = useState(\"\");\r\n\r\n  const DocumentPermissionModalShow = () => {\r\n    setDocumentPermissionModalVisible(true);\r\n  };\r\n  const addPermission = async () => {\r\n    try {\r\n      const response = await axios.post(\r\n        \"http://127.0.0.1:8083/api/documents/permissions\",\r\n        {\r\n          masterDocumentId: mdr,\r\n          userId: permissionUser,\r\n          companyId: user?.user?.companyId,\r\n          createDocument: checked?.includes(\"Creator\"),\r\n          reviewDocument: checked?.includes(\"Reviewer\"),\r\n          approveDocument: checked?.includes(\"Approver\"),\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: user?.accessToken,\r\n            // Add other headers if needed\r\n          },\r\n        }\r\n      );\r\n      // Handle the response as needed\r\n      console.log(response);\r\n      message.success(response?.data?.message);\r\n      setMDR(\"\");\r\n      setpermissionUser(\"\");\r\n      setChecked([]);\r\n      fetchData();\r\n      setDocumentPermissionModalVisible(false);\r\n    } catch (error) {\r\n      // Handle errors\r\n      if (error?.message == \"Request failed with status code 403\") {\r\n        message.error(\"Permission Denied to create document on this MDR\");\r\n      }\r\n    }\r\n  };\r\n  const fetchMDR = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `http://127.0.0.1:8083/api/documents/mdr?companyId=${user?.user?.companyId}`,\r\n        {\r\n          headers: {\r\n            Authorization: user?.accessToken,\r\n            // Add other headers if needed\r\n          },\r\n        }\r\n      );\r\n      const options = [];\r\n      for (const item of response?.data) {\r\n        options.push({\r\n          value: item?.id,\r\n          label: item?.title,\r\n          DocumentPermissionId: item?.DocumentPermissionId,\r\n          departmentId: item?.departmentId,\r\n        });\r\n      }\r\n\r\n      setMdrData(options); // Assuming the response.data is an array of DocumentPermissions\r\n    } catch (error) {\r\n      console.error(\"Error fetching departments:\", error?.message);\r\n    }\r\n  };\r\n  const onChange = (checkedValues) => {\r\n    console.log(\"checked = \", checkedValues);\r\n    setChecked(checkedValues);\r\n  };\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `http://127.0.0.1:8083/api/users?companyId=${user?.user?.companyId}&roleId=2`,\r\n        {\r\n          headers: {\r\n            Authorization: user?.accessToken,\r\n            // Add other headers if needed\r\n          },\r\n        }\r\n      );\r\n      console.log(response?.data, \"UUUAUA\");\r\n      const options = [];\r\n      for (const item of response?.data) {\r\n        options.push({\r\n          value: item?.id,\r\n          label: `${item?.firstName} ${item?.lastName}`,\r\n        });\r\n      }\r\n\r\n      setUserData(options); // Assuming the response.data is an array of DocumentPermissions\r\n    } catch (error) {\r\n      console.error(\"Error fetching departments:\", error?.message);\r\n    }\r\n  };\r\n  const DocumentPermissionModalCancel = () => {\r\n    setMDR(\"\");\r\n    setDocumentPermissionModalVisible(false);\r\n  };\r\n\r\n  const permissionModalShow = () => {\r\n    setPermissionModalVisible(true);\r\n  };\r\n  const permissionModalCancel = () => {\r\n    setPermissionModalVisible(false);\r\n  };\r\n  const addDocumentPermission = async () => {};\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `http://127.0.0.1:8083/api/documents/permissions?companyId=${user?.user?.companyId}`,\r\n        {\r\n          headers: {\r\n            Authorization: user?.accessToken,\r\n            // Add other headers if needed\r\n          },\r\n        }\r\n      );\r\n      setData(response.data); // Assuming the response.data is an array of departments\r\n    } catch (error) {\r\n      console.error(\"Error fetching departments:\", error?.message);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    setUser(JSON.parse(localStorage?.getItem(\"user\")));\r\n    // Fetch data when the component mounts\r\n    fetchData();\r\n    fetchUsers();\r\n    fetchMDR();\r\n  }, []);\r\n  return (\r\n    <>\r\n      <Modal\r\n        title=\"Create Permissions\"\r\n        width={416}\r\n        centered\r\n        visible={DocumentPermissionModalVisible}\r\n        onCancel={DocumentPermissionModalCancel}\r\n        footer={null}\r\n        closeIcon={\r\n          <RiCloseFill className=\"remix-icon text-color-black-100\" size={24} />\r\n        }\r\n      >\r\n        <Form layout=\"vertical\" name=\"basic\">\r\n          <Form.Item\r\n            label=\"MDR\"\r\n            name=\"mdr\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please select MDR\",\r\n              },\r\n            ]}\r\n          >\r\n            <Select\r\n              options={mdrOptions}\r\n              value={mdr}\r\n              onChange={(value) => setMDR(value)}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item\r\n            label=\"Users\"\r\n            name=\"users\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please select MDR\",\r\n              },\r\n            ]}\r\n          >\r\n            <Select\r\n              options={userOptions}\r\n              value={permissionUser}\r\n              onChange={(value) => setpermissionUser(value)}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item label=\"Permissions\" name=\"permissions\">\r\n            <Checkbox.Group\r\n              options={permissionsOptions}\r\n              defaultValue={0}\r\n              onChange={onChange}\r\n            />\r\n          </Form.Item>\r\n\r\n          <Row>\r\n            <Col md={12} span={24} className=\"hp-pr-sm-0 hp-pr-12\">\r\n              <Button\r\n                block\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                onClick={() => addPermission()}\r\n              >\r\n                Add\r\n              </Button>\r\n            </Col>\r\n\r\n            <Col md={12} span={24} className=\"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12\">\r\n              <Button block onClick={DocumentPermissionModalCancel}>\r\n                Cancel\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        </Form>\r\n      </Modal>\r\n\r\n      <div style={{ textAlign: \"right\", marginBottom: \"16px\" }}>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={DocumentPermissionModalShow}\r\n          disabled={user?.user?.roleId != 1}\r\n        >\r\n          Add Permissions\r\n        </Button>\r\n      </div>\r\n      <Table columns={columns} dataSource={data} />\r\n    </>\r\n  );\r\n}\r\n"],"names":["columns","title","dataIndex","key","permissionsOptions","label","value","DocumentPermissions","_localStorage","_user$user5","DocumentPermissionModalVisible","setDocumentPermissionModalVisible","useState","mdrOptions","setMdrData","userOptions","setUserData","permissionUser","setpermissionUser","mdr","setMDR","permissionModalVisible","setPermissionModalVisible","user","setUser","JSON","parse","localStorage","getItem","data","setData","DocumentPermissionOptions","setDocumentPermissions","checked","setChecked","DocumentPermissionId","setDocumentPermissionId","DocumentPermissionModalCancel","fetchData","async","_user$user4","response","axios","concat","companyId","headers","Authorization","accessToken","error","console","message","useEffect","_localStorage2","_user$user3","log","options","item","push","id","firstName","lastName","fetchUsers","_user$user2","departmentId","fetchMDR","_jsxs","_Fragment","children","_jsx","Modal","width","centered","visible","onCancel","footer","closeIcon","RiCloseFill","className","size","Form","layout","name","Item","rules","required","Select","onChange","Checkbox","Group","defaultValue","checkedValues","Row","Col","md","span","Button","block","type","htmlType","onClick","_user$user","_response$data","masterDocumentId","userId","createDocument","includes","reviewDocument","approveDocument","success","addPermission","style","textAlign","marginBottom","DocumentPermissionModalShow","disabled","roleId","Table","dataSource"],"sourceRoot":""}