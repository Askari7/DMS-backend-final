"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[1397],{1397:(e,t,o)=>{o.r(t),o.d(t,{default:()=>U});var s=o(65043),n=o(60521),r=o(64435),a=o(89421),l=o(15627),i=o(21261),c=o(47419),d=o(11645),u=o(94376),p=o(70610),m=o(26412),v=o(22285),h=o(40854),y=o.n(h),g=o(78186),x=o(62058),f=o(16854),A=o.n(f),j=o(91688),S=o(39816),w=o(58168),b=o(64467),C=o(98139),I=o.n(C),O=o(40164),k=o(25055),N=function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(o[s[n]]=e[s[n]])}return o};const R=function(e){var t,o,n=e.prefixCls,r=e.className,a=e.color,l=void 0===a?"blue":a,i=e.dot,c=e.pending,d=void 0!==c&&c,u=(e.position,e.label),p=e.children,m=N(e,["prefixCls","className","color","dot","pending","position","label","children"]),v=(0,s.useContext(k.QO).getPrefixCls)("timeline",n),h=I()((t={},(0,b.A)(t,"".concat(v,"-item"),!0),(0,b.A)(t,"".concat(v,"-item-pending"),d),t),r),y=I()((o={},(0,b.A)(o,"".concat(v,"-item-head"),!0),(0,b.A)(o,"".concat(v,"-item-head-custom"),!!i),(0,b.A)(o,"".concat(v,"-item-head-").concat(l),!0),o));return s.createElement("li",(0,w.A)({},m,{className:h}),u&&s.createElement("div",{className:"".concat(v,"-item-label")},u),s.createElement("div",{className:"".concat(v,"-item-tail")}),s.createElement("div",{className:y,style:{borderColor:/blue|red|green|gray/.test(l||"")?void 0:l}},i),s.createElement("div",{className:"".concat(v,"-item-content")},p))};var D=o(12701),E=function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(o[s[n]]=e[s[n]])}return o},P=function(e){var t,o=s.useContext(k.QO),n=o.getPrefixCls,r=o.direction,a=e.prefixCls,l=e.pending,i=void 0===l?null:l,c=e.pendingDot,d=e.children,u=e.className,p=e.reverse,m=void 0!==p&&p,v=e.mode,h=void 0===v?"":v,y=E(e,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),g=n("timeline",a),x="boolean"===typeof i?null:i,f=i?s.createElement(R,{pending:!!i,dot:c||s.createElement(O.A,null)},x):null,A=s.Children.toArray(d);A.push(f),m&&A.reverse();var j=function(e,t){return"alternate"===h?"right"===e.props.position?"".concat(g,"-item-right"):"left"===e.props.position?"".concat(g,"-item-left"):"".concat(g,t%2===0?"-item-left":"-item-right"):"left"===h?"".concat(g,"-item-left"):"right"===h||"right"===e.props.position?"".concat(g,"-item-right"):""},S=A.filter((function(e){return!!e})),C=s.Children.count(S),N="".concat(g,"-item-last"),P=s.Children.map(S,(function(e,t){var o=t===C-2?N:"",s=t===C-1?N:"";return(0,D.Ob)(e,{className:I()([e.props.className,!m&&i?o:s,j(e,t)])})})),T=A.some((function(e){var t;return!!(null===(t=null===e||void 0===e?void 0:e.props)||void 0===t?void 0:t.label)})),z=I()(g,(t={},(0,b.A)(t,"".concat(g,"-pending"),!!i),(0,b.A)(t,"".concat(g,"-reverse"),!!m),(0,b.A)(t,"".concat(g,"-").concat(h),!!h&&!T),(0,b.A)(t,"".concat(g,"-label"),T),(0,b.A)(t,"".concat(g,"-rtl"),"rtl"===r),t),u);return s.createElement("ul",(0,w.A)({},y,{className:z}),P)};P.Item=R;const T=P;var z=o(70579);function B(e){let{data:t,thisOne:o,user:s}=e;const n=o?{[o]:t[o]}:{};return(0,z.jsx)(S.A,{style:{justifyContent:"center",alignItems:"center",border:"5px solid #e8e8e8",borderRadius:"10px",padding:"32px",marginBottom:"20px"},children:(0,z.jsx)(c.A,{children:(0,z.jsxs)(d.A,{span:32,children:[(0,z.jsx)("h5",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"10px"},children:"Document History"}),(0,z.jsx)(T,{style:{marginTop:"20px"},children:Object.entries(n).map((e=>{let[t,o]=e;return(0,z.jsxs)(T.Item,{children:[(0,z.jsx)("h4",{style:{fontSize:"16px",marginBottom:"10px"},children:t}),(0,z.jsx)(T,{children:o.map(((e,o)=>(0,z.jsxs)(T.Item,{style:{borderLeft:"2px solid #1890ff",paddingLeft:"10px",marginBottom:"10px"},children:[(0,z.jsxs)("p",{children:["Version: ",e.version]}),(0,z.jsxs)("p",{children:[(0,z.jsx)("span",{style:{color:"black"},children:new Date(e.createdAt).toLocaleDateString()})," ",(0,z.jsx)("span",{style:{color:"blue"},children:new Date(e.createdAt).toLocaleTimeString()})]}),e.reviewerComment&&(0,z.jsxs)("p",{style:{marginBottom:"5px",color:"#666"},children:["Reviewer Comments: ",e.reviewerComment]}),e.approverComment&&(0,z.jsxs)("p",{style:{marginBottom:"5px",color:"#666"},children:["Approver Comments: ",e.approverComment]}),(0,z.jsx)(a.A,{type:"primary",style:{marginTop:"10px"},onClick:()=>((e,t)=>{const{version:o}=e,{roleId:n,firstName:r}=s.user,a="".concat("http://54.81.250.98:8083","/uploads/").concat(t,"-").concat(o,".pdf");window.location.href="http://54.81.250.98:3001/react-pdf-highlighter/?docName=".concat(t,".pdf&url=").concat(a,"&allowed=").concat(!0,"&user=").concat(n," ").concat(r)})(e,t),children:"Open"})]},"".concat(t,"-").concat(o))))})]},t)}))})]})})})}o(14556);o.p;o.p;function U(){var e,t;(0,j.useHistory)();const[o,h]=(0,s.useState)(""),[f,S]=(0,s.useState)(""),w=(0,s.useRef)(null),b=(e,t,o)=>{t(),h(e[0]),S(o)},C=e=>({filterDropdown:t=>{let{setSelectedKeys:o,selectedKeys:s,confirm:l,clearFilters:i,close:c}=t;return(0,z.jsxs)("div",{style:{padding:8},children:[(0,z.jsx)(n.A,{ref:w,placeholder:"Search ".concat(e),value:s[0],onChange:e=>o(e.target.value?[e.target.value]:[]),onPressEnter:()=>b(s,l,e),style:{marginBottom:8,display:"block"}}),(0,z.jsxs)(r.A,{children:[(0,z.jsx)(a.A,{type:"primary",onClick:()=>b(s,l,e),icon:(0,z.jsx)(x.A,{}),size:"small",style:{width:90},children:"Search"}),(0,z.jsx)(a.A,{onClick:()=>i&&(e=>{e(),h("")})(i),size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:e=>(0,z.jsx)(x.A,{style:{color:e?"#1677ff":void 0}}),onFilter:(t,o)=>o[e].toString().toLowerCase().includes(t.toLowerCase()),onFilterDropdownOpenChange:e=>{e&&setTimeout((()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.select()}),100)},render:t=>f===e?(0,z.jsx)(A(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[o],autoEscape:!0,textToHighlight:t?t.toString():""}):t}),I="http://54.81.250.98:8083",O=[{title:"Document Name",dataIndex:"docName",key:"docName",...C("docName")},{title:"MDR Code",dataIndex:"masterDocumentCode",key:"masterDocumentCode",...C("masterDocumentCode")},{title:"Approver",dataIndex:"approver",key:"approver",...C("approver")},{title:"Reviewer",dataIndex:"reviewer",key:"reviewer",...C("reviewer")},{title:"Your Role",dataIndex:"yourRole",key:"yourRole"},{title:"Your Status",dataIndex:"yourStatus",key:"yourStatus"},{title:"Overall Approver Status",dataIndex:"approverStatuss",key:"approverStatuss"},{title:"Overall Reviewer Status",dataIndex:"reviewerStatuss",key:"reviewerStatuss"},{title:"Version",dataIndex:"version",key:"version"},{title:"Action",key:"action",render:(e,t)=>(0,z.jsxs)(r.A,{size:"middle",children:[(0,z.jsx)("a",{onClick:()=>Ke(t),children:"Open"}),(0,z.jsx)("a",{onClick:()=>Je(t),children:"Add Status"}),(0,z.jsx)("a",{onClick:()=>Ve(t),children:"Send to Client"}),(0,z.jsx)("a",{onClick:()=>Qe(t),children:"Show Doc History"})]})}],[k,N]=(0,s.useState)(""),[R,D]=(0,s.useState)(""),[E,P]=(0,s.useState)(null),[T,U]=(0,s.useState)(!1),[q,F]=(0,s.useState)(!1),[J,L]=(0,s.useState)([]),[Q,V]=(0,s.useState)(),[M,H]=(0,s.useState)(!1),[_,W]=(0,s.useState)(!1),[Y,K]=(0,s.useState)([]),[G,X]=(0,s.useState)([]),[Z,$]=(0,s.useState)(""),[ee,te]=(0,s.useState)(""),[oe,se]=(0,s.useState)(!1),[ne,re]=(0,s.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[ae,le]=(0,s.useState)([]),[ie,ce]=(0,s.useState)([]),[de,ue]=(0,s.useState)([]),[pe,me]=(0,s.useState)([]),[ve,he]=(0,s.useState)([]),[ye,ge]=(0,s.useState)([]),[xe,fe]=(0,s.useState)([]),[Ae,je]=(0,s.useState)([]),[Se,we]=(0,s.useState)(),[be,Ce]=(0,s.useState)(),[Ie,Oe]=(0,s.useState)([]),[ke,Ne]=(0,s.useState)([]),[Re,De]=(0,s.useState)([]),[Ee,Pe]=(0,s.useState)([]),[Te,ze]=(0,s.useState)(!1),[Be,Ue]=(0,s.useState)(""),[qe,Fe]=(0,s.useState)(""),Je=e=>{P(e),U(!0)},Le=()=>{N(""),U(!1)},Qe=e=>{Fe(e.docName),H(!0)},Ve=e=>{console.log(e,"record");const t=JSON.stringify(e);console.log(t,"record"),V(t),We(),F(!0)},Me=()=>{F(!1)},[He,_e]=(0,s.useState)(""),We=async()=>{try{var e;console.log(Q,"coddd");const t=await y().get("http://54.81.250.98:8083/api/clients?companyId=".concat(null===ne||void 0===ne||null===(e=ne.user)||void 0===e?void 0:e.companyId,"&recordId=").concat(Q),{headers:{Authorization:null===ne||void 0===ne?void 0:ne.accessToken}});console.log(t.data,"received");const o=t.data.map((e=>({value:e.Email,label:e.Email})));console.log("clients",o),ue(o)}catch(t){console.error("Error fetching clients:",null===t||void 0===t?void 0:t.message)}},Ye=async e=>{try{var t;const o=await y().get("http://54.81.250.98:8083/api/documents/establishment?companyId=".concat(null===ne||void 0===ne||null===(t=ne.user)||void 0===t?void 0:t.companyId,"&userId=").concat(ne.user.id,"&docName=").concat(e),{headers:{Authorization:null===ne||void 0===ne?void 0:ne.accessToken}});return console.log(o.data,"received"),o.data}catch(o){console.error("Error fetching documents:",null===o||void 0===o?void 0:o.message)}},Ke=async e=>{const t=await Ye(e.docName);console.log("helllooo",t);const o=e.docName,s="".concat(I,"/uploads/").concat(o,"-").concat(e.version,".pdf");console.log(ne.user.roleId,ne.user.firstName,ne);let n="false";t&&(n="true"),window.location.href="http://54.81.250.98:3001/react-pdf-highlighter/?docName=".concat(o,".pdf&url=").concat(s,"&allowed=").concat(n,"&user=").concat(ne.user.roleId," ").concat(ne.user.firstName)},Ge=()=>{te(""),W(!1)},Xe=async()=>{try{var e,t;const o=await y().get("http://54.81.250.98:8083/api/documents/establishment?companyId=".concat(null===ne||void 0===ne||null===(e=ne.user)||void 0===e?void 0:e.companyId,"&userId=").concat(null===ne||void 0===ne||null===(t=ne.user)||void 0===t?void 0:t.id),{headers:{Authorization:null===ne||void 0===ne?void 0:ne.accessToken}});console.log("response",o.data);const s=[],n=[],r=[],a=[];for(let e of o.data){console.log(e,"response.data",e.id);const t=e.approverStatus.split(",").map((e=>parseInt(e.trim(),10)));console.log(t,"AppStatusArray");const o=e.reviewerStatus.split(",").map((e=>parseInt(e.trim(),10)));console.log(o,"RevStatusArray");const l=e.reviewerId.split(",").map((e=>parseInt(e.trim(),10))),i=e.approverId.split(",").map((e=>parseInt(e.trim(),10)));console.log(l,i,"ID Arrays");const c=e.approverComment.split(","),d=e.reviewerComment.split(",");console.log(c,d,"Comments"),s.push({id:e.id,status:t,comment:c}),n.push({id:e.id,status:o,comment:d}),r.push({id:e.id,status:l}),a.push({id:e.id,status:i}),Pe(r),De(a),je(n),fe(s),e.approverId.includes(ne.user.id)&&e.reviewerId.includes(ne.user.id)?(e.yourRole="Approver and Reviewer",1==t[i.indexOf(ne.user.id)]?e.yourStatus="Rejected":2==t[i.indexOf(ne.user.id)]?e.yourStatus="Accepted":0==t[i.indexOf(ne.user.id)]&&(e.yourStatus="Pending")):i.includes(ne.user.id)?(console.log(i.includes(ne.user.id),"approver ha"),e.yourRole="Approver",Ue(i.indexOf(ne.user.id)),console.log(i.indexOf(ne.user.id),"jjjjj"),console.log(i,ne.user.id,t[i.indexOf(ne.user.id)],"ssss"+typeof t),1==t[i.indexOf(ne.user.id)]?e.yourStatus="Rejected":2==t[i.indexOf(ne.user.id)]?e.yourStatus="Accepted":0==t[i.indexOf(ne.user.id)]&&(e.yourStatus="Pending")):l.includes(ne.user.id)&&(console.log(l.includes(ne.user.id),"reviewer ha"),e.yourRole="Reviewer",Ue(l.indexOf(ne.user.id)),console.log(l.indexOf(ne.user.id),"jjjjj"),console.log(l,ne.user.id,o[l.indexOf(ne.user.id)],"ssss"+typeof o),1==o[l.indexOf(ne.user.id)]?e.yourStatus="Rejected":2==o[l.indexOf(ne.user.id)]?e.yourStatus="Accepted":0==o[l.indexOf(ne.user.id)]&&(e.yourStatus="Pending")),t.every((e=>0===e))?e.approverStatuss="Pending":t.some((e=>0!==e&&2!==e))?e.approverStatuss="Rejected":t.every((e=>2===e))?e.approverStatuss="Sent to Client":e.approverStatuss="Pending",o.every((e=>0===e))?e.reviewerStatuss="Pending":o.every((e=>1===e))?e.reviewerStatuss="Rejected":o.every((e=>2===e))?e.reviewerStatuss="Sent for Approval":e.reviewerStatuss="Pending"}console.log(s,n,r,a,"arrays hain ye "),le(o.data)}catch(o){console.error("Error fetching departments:",null===o||void 0===o?void 0:o.message)}},Ze=async e=>{console.log(e,"record dekhS");const t=e.id,o=Ee.find((e=>e.id===t)),s=Re.find((e=>e.id===t));console.log(o,s,"APPREV");const n=o.status,r=s.status;console.log(n,r,"REVIEWAPPROVE"),console.log(n,r,"ids");const a=Ae.find((e=>e.id===t)),i=xe.find((e=>e.id===t));console.log(a,i,"STATUS OBJ");const c=a.status,d=i.status;console.log(c,d,"STATUS FOR ");const u=a.comment,p=i.comment;if(console.log(u,p,"COmment For"),console.log(d,c,"obj"),"Approver and Reviewer"===e.yourRole&&"Accept"===k)d[r.indexOf(ne.user.id)]=2,c[n.indexOf(ne.user.id)]=2;else if("Approver and Reviewer"===e.yourRole&&"Reject"===k){d[r.indexOf(ne.user.id)]=1,c[n.indexOf(ne.user.id)]=1;const e=r.indexOf(ne.user.id),t=n.indexOf(ne.user.id);p[e]=R,u[t]=R}else if("Approver"===e.yourRole&&"Accept"===k)d[r.indexOf(ne.user.id)]=2;else if("Reviewer"===e.yourRole&&"Accept"===k)c[n.indexOf(ne.user.id)]=2;else if("Approver"===e.yourRole&&"Reject"===k){d[r.indexOf(ne.user.id)]=1;p[r.indexOf(ne.user.id)]=R}else if("Reviewer"===e.yourRole&&"Reject"===k){c[n.indexOf(ne.user.id)]=1;u[n.indexOf(ne.user.id)]=R}console.log(c,"changed Rev"),console.log(d,"changed App"),Ce(c),we(d);const m=JSON.stringify(e);console.log(m,"record bhej rha hun");try{if(R){const t=await y().put("http://54.81.250.98:8083/api/documents/establishment?yourRole=".concat(e.yourRole,"\n          &version=").concat(e.version,"&userName=").concat(e.userName,"&approver=").concat(e.approver,"&reviewer=").concat(e.reviewer,"\n          &reviewerId=").concat(e.reviewerId,"&approverId=").concat(e.approverId,"\n          &docDepartmentId=").concat(e.docDepartmentId,"&masterDocumentCode=").concat(e.masterDocumentCode,"&masterDocumentName=").concat(e.masterDocumentName,"\n          &companyId=").concat(e.companyId,"\n\n          "),{revStatusArr:c.join(","),appStatusArr:d.join(","),reviewerComment:u.join(","),approverComment:p.join(","),docName:e.docName},{headers:{Authorization:null===ne||void 0===ne?void 0:ne.accessToken}});console.log(t.data,"data aya"),l.Ay.success(t.data.message)}else{const t=await y().put("http://54.81.250.98:8083/api/documents/establishment?yourRole=".concat(e.yourRole,"&record=").concat(m),{revStatusArr:c.join(","),appStatusArr:d.join(","),docName:e.docName},{headers:{Authorization:null===ne||void 0===ne?void 0:ne.accessToken}});l.Ay.success(t.data.message),console.log(t.data,"data aya")}N(""),await Xe()}catch(v){console.error(v)}};return(0,s.useEffect)((async()=>{var e;re(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),await Xe(),(async()=>{try{var e;const t=await y().get("http://54.81.250.98:8083/api/users?companyId=".concat(null===ne||void 0===ne||null===(e=ne.user)||void 0===e?void 0:e.companyId,"&roleId=2"),{headers:{Authorization:null===ne||void 0===ne?void 0:ne.accessToken}});console.log(null===t||void 0===t?void 0:t.data,"UUUAUA");const o=[];for(const e of null===t||void 0===t?void 0:t.data)o.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)});X(o)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}})(),(async()=>{try{var e;const t=await y().get("http://54.81.250.98:8083/api/documents/mdr?companyId=".concat(null===ne||void 0===ne||null===(e=ne.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===ne||void 0===ne?void 0:ne.accessToken}}),o=[];for(const e of null===t||void 0===t?void 0:t.data)o.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title,DocumentPermissionId:null===e||void 0===e?void 0:e.DocumentPermissionId,departmentId:null===e||void 0===e?void 0:e.departmentId});K(o)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}})(),(async()=>{try{const e=await y().post("http://54.81.250.98:8083/api/documents/establishment",{companyId:null===ne||void 0===ne?void 0:ne.user.companyId},{headers:{Authorization:null===ne||void 0===ne?void 0:ne.accessToken}});ce(e.data);const t=e=>{const t={};return e.forEach((e=>{const{docName:o,version:s,createdAt:n,reviewerComment:r,approverComment:a}=e;t[o]||(t[o]=[]),t[o].push({version:s,createdAt:n,reviewerComment:r,approverComment:a})})),t},o=t(e.data);console.log(o,"organizedData"),ce(o)}catch(e){console.error(e)}})()}),[]),(0,s.useEffect)((async()=>{await We()}),[Q]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(i.A,{title:"Change Status",width:400,centered:!0,visible:T,onCancel:Le,footer:null,closeIcon:(0,z.jsx)(v.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,z.jsx)(c.A,{justify:"space-between",align:"center",children:(0,z.jsx)(d.A,{span:20,children:(0,z.jsxs)(u.A,{layout:"vertical",name:"basic",children:[(0,z.jsx)(u.A.Item,{label:"Select Status",name:"selectedStatus",rules:[{required:!0,message:"Please select a status"}],children:(0,z.jsx)(p.A,{options:[{label:"Accept",value:"Accept"},{label:"Reject",value:"Reject"}],value:k,onChange:e=>{return N(t=e),void ze("Reject"===t);var t}})}),Te&&(0,z.jsx)(u.A.Item,{label:"Remarks",name:"remarks",rules:[{required:!0,message:"Please provide remarks for rejection"}],children:(0,z.jsx)(n.A.TextArea,{rows:4,placeholder:"Enter remarks for rejection",value:R,onChange:e=>D(e.target.value)})}),(0,z.jsxs)(c.A,{children:[(0,z.jsx)(d.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,z.jsx)(a.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async e=>{console.log("rejection",R),console.log(e,"status bhi aya"),E&&(console.log(E,"document"),console.log(e,"status"),console.log(Ee,Re,"ye bhi dekh"),console.log(Ae,xe,"ye bhi"),await Ze(E),Le())})(k),children:"Submit"})}),(0,z.jsx)(d.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,z.jsx)(a.A,{block:!0,onClick:Le,children:"Cancel"})})]})]})})})}),(0,z.jsx)(i.A,{title:"Timeline",width:400,centered:!0,visible:M,onCancel:()=>{H(!1)},footer:null,closeIcon:(0,z.jsx)(v.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,z.jsx)(c.A,{justify:"space-between",align:"center",children:(0,z.jsx)(d.A,{span:20,children:(0,z.jsx)(B,{data:ie,thisOne:qe,user:ne})})})}),(0,z.jsx)(i.A,{title:"Send To Client",width:400,centered:!0,visible:q,onCancel:Me,footer:null,closeIcon:(0,z.jsx)(v.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,z.jsx)(c.A,{justify:"space-between",align:"center",children:(0,z.jsx)(d.A,{span:20,children:(0,z.jsxs)(u.A,{layout:"vertical",name:"basic",children:[(0,z.jsx)(u.A.Item,{label:"Select Emails",name:"selectedEmails",rules:[{required:!0,message:"Please select a Email"}],children:(0,z.jsx)(p.A,{options:de,value:J,onChange:e=>L(e)})}),(0,z.jsxs)(c.A,{children:[(0,z.jsx)(d.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,z.jsx)(a.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{const e=JSON.parse(Q);console.log("Record:",e.docName);const t=await Ye(e.docName);console.log("helllooo",t);const o=e.docName,s="".concat(I,"/uploads/").concat(o,"-").concat(e.version,".pdf");console.log(ne.user.roleId,ne.user.firstName,ne);let n="false";t&&(n="true");const r="http://54.81.250.98:3001/react-pdf-highlighter/?docName=".concat(o,".pdf&url=").concat(s,"&allowed=").concat(n,"&user=").concat(ne.user.roleId," ").concat(ne.user.firstName);try{var a,i;const e=await y().post("http://54.81.250.98:8083/api/clients/send-email-client",{roleId:ne.user.roleId,companyId:null===ne||void 0===ne||null===(a=ne.user)||void 0===a?void 0:a.companyId,url:r,clientName:J},{headers:{Authorization:null===ne||void 0===ne?void 0:ne.accessToken}});console.log(e),l.Ay.success(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message)}catch(c){console.error("Error Sending Email:",null===c||void 0===c?void 0:c.message)}})(),children:"Send"})}),(0,z.jsx)(d.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,z.jsx)(a.A,{block:!0,onClick:Me,children:"Cancel"})})]})]})})})}),(0,z.jsx)(i.A,{title:"Create Permissions",width:416,centered:!0,visible:_,onCancel:Ge,footer:null,closeIcon:(0,z.jsx)(v.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,z.jsxs)(u.A,{layout:"vertical",name:"basic",children:[(0,z.jsx)(u.A.Item,{label:"MDR",name:"mdr",rules:[{required:!0,message:"Please select MDR"}],children:(0,z.jsx)(p.A,{options:Y,value:ee,onChange:e=>te(e)})}),(0,z.jsx)(u.A.Item,{label:"Users",name:"users",rules:[{required:!0,message:"Please select MDR"}],children:(0,z.jsx)(p.A,{options:G,value:Z,onChange:e=>$(e)})}),(0,z.jsx)(u.A.Item,{label:"Permissions",name:"permissions",children:(0,z.jsx)(g.A.Group,{options:[{label:"Reviewer",value:"Reviewer"},{label:"Approver",value:"Approver"},{label:"Creator",value:"Creator"}],defaultValue:0,onChange:e=>{console.log("checked = ",e),he(e)}})}),(0,z.jsxs)(c.A,{children:[(0,z.jsx)(d.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,z.jsx)(a.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{try{var e,t;const o=await y().post("http://54.81.250.98:8083/api/documents/permissions",{masterDocumentId:ee,userId:Z,companyId:null===ne||void 0===ne||null===(e=ne.user)||void 0===e?void 0:e.companyId,createDocument:null===ve||void 0===ve?void 0:ve.includes("Creator"),reviewDocument:null===ve||void 0===ve?void 0:ve.includes("Reviewer"),approveDocument:null===ve||void 0===ve?void 0:ve.includes("Approver")},{headers:{Authorization:null===ne||void 0===ne?void 0:ne.accessToken}});console.log(o),l.Ay.success(null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.message),te(""),$(""),he([]),await Xe(),W(!1)}catch(o){"Request failed with status code 403"==(null===o||void 0===o?void 0:o.message)&&l.Ay.error("Permission Denied to create document on this MDR")}})(),children:"Add"})}),(0,z.jsx)(d.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,z.jsx)(a.A,{block:!0,onClick:Ge,children:"Cancel"})})]})]})}),(0,z.jsx)("div",{style:{textAlign:"right",marginBottom:"16px"},children:(0,z.jsx)(a.A,{type:"primary",onClick:()=>{W(!0)},disabled:1!=(null===ne||void 0===ne||null===(t=ne.user)||void 0===t?void 0:t.roleId),children:"Add Permissions"})}),(0,z.jsx)("div",{style:{overflowX:"auto"},children:(0,z.jsx)(m.A,{columns:O,dataSource:ae,bordered:!0,size:"middle",title:()=>"All Documents Assessments",footer:()=>"You may filter Documents"})})]})}}}]);
//# sourceMappingURL=1397.48164cc2.chunk.js.map