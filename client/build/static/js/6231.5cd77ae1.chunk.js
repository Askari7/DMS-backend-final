"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[6231],{23415:(e,t,o)=>{o.d(t,{A:()=>s});o(14556);var l=o(91688),a=o(70579);const s=()=>{var e;const t=null===(e=localStorage)||void 0===e?void 0:e.getItem("user");return console.log(t,"loggin"),t?null:(0,a.jsx)(l.Redirect,{to:"/pages/authentication/login"})}},71129:(e,t,o)=>{o.r(t),o.d(t,{default:()=>U});var l=o(65043),a=o(91688),s=o(62058),r=o(69223),n=o.n(r),i=o(16854),d=o.n(i);const c="data:image/png;base64,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",u=o.p+"static/media/novacon.a515b904ac897e82b975.png";var m=o(44411),p=o(15627),v=o(94376),h=o(60521),g=o(64435),f=o(89421),x=o(86904),A=o(21261),j=o(47419),y=o(11645),I=o(79940),b=o(78186),N=o(43886),S=o(75932),C=o(40854),w=o.n(C),k=o(73754),q=(o(14556),o(92823),o(25884),o(23415)),D=o(7313),T=o(70579);const R=e=>{let{percentage:t}=e,o="#ff0000";return t>75?o="#1890ff":t>50&&(o="#fadb14"),(0,T.jsx)(j.A,{justify:"center",align:"middle",style:{width:180},children:(0,T.jsx)(D.A,{percent:t,steps:5,strokeColor:o})})};var O=o(79625);const X=(0,o(59662).A)((0,T.jsx)("path",{d:"M21 11V3h-8l3.29 3.29-10 10L3 13v8h8l-3.29-3.29 10-10z"}),"OpenInFullSharp");var E=o(45069),F=(o(4689),o(208));const{Title:M,Text:z}=m.A;function U(){var e;const[t,o]=(0,l.useState)(""),[r,i]=(0,l.useState)(""),m=(0,l.useRef)(null),[C]=v.A.useForm(),[D]=v.A.useForm(),[M,z]=(0,l.useState)(!1),[U,P]=(0,l.useState)(!1),[J,L]=(0,l.useState)(!1),[V,Z]=(0,l.useState)(!1),[H,G]=(0,l.useState)(!1),[Q]=v.A.useForm(),[Y]=v.A.useForm(),[W,B]=(0,l.useState)(""),[K,$]=(0,l.useState)(""),[_,ee]=(0,l.useState)(""),[te,oe]=(0,l.useState)(""),[le,ae]=(0,l.useState)(""),[se,re]=(0,l.useState)([]),[ne,ie]=(0,l.useState)(""),[de,ce]=(0,l.useState)([]),[ue,me]=(0,l.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[pe,ve]=(0,l.useState)([]),[he,ge]=(0,l.useState)([]),[fe,xe]=(0,l.useState)([]),[Ae,je]=(0,l.useState)([]),[ye,Ie]=(0,l.useState)([]),[be,Ne]=(0,l.useState)([]),[Se,Ce]=(0,l.useState)([]),[we,ke]=(0,l.useState)([]),[qe,De]=(0,l.useState)(!1),[Te,Re]=(0,l.useState)([]),[Oe,Xe]=(0,l.useState)([]),[Ee,Fe]=(0,l.useState)([]),[Me,ze]=(0,l.useState)([]),[Ue,Pe]=(0,l.useState)([]),[Je,Le]=(0,l.useState)([]),[Ve,Ze]=(0,l.useState)(),[He,Ge]=(0,l.useState)(!1),[Qe,Ye]=(0,l.useState)(!1),[We,Be]=(0,l.useState)(),[Ke,$e]=(0,l.useState)(),[_e,et]=(0,l.useState)(),tt=(0,a.useLocation)(),{matchingRecord:ot}=tt.state||{},lt=async()=>{try{const e=await w().put(`https://novacon.live/api/documents/mdr_update?companyId=${null===ue||void 0===ue?void 0:ue.user.companyId}&id=${D.getFieldValue("id")}`,{title:D.getFieldValue("title"),mdrCode:D.getFieldValue("mdrCode")},{headers:{Authorization:null===ue||void 0===ue?void 0:ue.accessToken}});p.Ay.success(e.data.message),dt(),pt()}catch(e){console.error("Error updating departments:",null===e||void 0===e?void 0:e.message)}},at=(e,t,l)=>{t(),o(e[0]),i(l)},st=e=>({filterDropdown:t=>{let{setSelectedKeys:l,selectedKeys:a,confirm:r,clearFilters:n,close:i}=t;return(0,T.jsxs)("div",{style:{padding:8},children:[(0,T.jsx)(h.A,{ref:m,placeholder:`Search ${e}`,value:a[0],onChange:e=>l(e.target.value?[e.target.value]:[]),onPressEnter:()=>at(a,r,e),style:{marginBottom:8,display:"block"}}),(0,T.jsxs)(g.A,{children:[(0,T.jsx)(f.A,{type:"primary",onClick:()=>at(a,r,e),icon:(0,T.jsx)(s.A,{}),size:"small",style:{width:90},children:"Search"}),(0,T.jsx)(f.A,{onClick:()=>n&&(e=>{e(),o("")})(n),size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:e=>(0,T.jsx)(s.A,{style:{color:e?"#1677ff":void 0}}),onFilter:(t,o)=>o[e].toString().toLowerCase().includes(t.toLowerCase()),onFilterDropdownOpenChange:e=>{e&&setTimeout((()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.select()}),100)},render:o=>r===e?(0,T.jsx)(d(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[t],autoEscape:!0,textToHighlight:o?o.toString():""}):o}),rt=(JSON.stringify(Oe),(0,a.useHistory)()),nt=()=>{B(""),$(""),ee(""),z(!1)};const it=()=>{Ye(!1)},dt=()=>{G(!1)},ct=async e=>{ut(e)},ut=async e=>{try{console.log("recorddd",e);const t=await w().get(`https://novacon.live/api/documents?masterDocumentId=${e.mdrCode}&projectId=${e.projectId}&companyId=${e.companyId}`,{headers:{Authorization:null===ue||void 0===ue?void 0:ue.accessToken}});console.log("response",t.data);const o=t.data.map((e=>{const{companyId:t,departmentId:o,projectId:l,masterDocumentId:a,masterDocumentName:s,content:r,extension:n,fileName:i,...d}=e;return d})),l={};o.forEach((e=>{const t=e.title.split("-")[2];l[t]||(l[t]=[]),l[t].push(e)}));const a=Object.keys(l).map((e=>({[e]:l[e]})));Ie(a)}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}};(0,l.useEffect)((()=>{}),[ye]);const mt=async(e,t)=>{if(K&&e)try{const o=t.find((t=>t.id==e)),l=de.find((e=>(null===e||void 0===e?void 0:e.value)==K)),a=(Te.find((e=>(null===e||void 0===e?void 0:e.value)==_)),await w().post("https://novacon.live/api/documents/mdr",{departmentId:o.departmentId,projectId:K,companyId:null===o||void 0===o?void 0:o.companyId,authorId:null===o||void 0===o?void 0:o.id,authorName:null===o||void 0===o?void 0:o.firstName,mdrCode:te,projectCode:null===l||void 0===l?void 0:l.code,departmentName:o.department,status:"Assigned",noOfDocuments:0},{headers:{Authorization:null===ue||void 0===ue?void 0:ue.accessToken}}));P(!1),pt(),x.A.success({message:"Successfully Created",description:`${a.data.message}`,style:{backgroundColor:"#52c41a",color:"#fff"}})}catch(l){var o;409===(null===(o=l.response)||void 0===o?void 0:o.status)?x.A.error({message:"Conflict Error",description:"A MDR with this name or code already exists. Please choose a different name or code.",style:{backgroundColor:"#f5222d",color:"#fff"}}):x.A.error({message:"Error",description:"An error occurred while adding the MDR. Please try again.",style:{backgroundColor:"#f5222d",color:"#fff"}})}else x.A.error({message:"Validation Error",description:"Please fill in all required fields.",style:{backgroundColor:"#f5222d",color:"#fff"}})},pt=async()=>{try{var e,t,o,l,a;const n=await w().get(`https://novacon.live/api/documents/mdr?companyId=${null===ue||void 0===ue||null===(e=ue.user)||void 0===e?void 0:e.companyId}&roleId=${null===ue||void 0===ue?void 0:ue.user.roleId}`,{headers:{Authorization:null===ue||void 0===ue?void 0:ue.accessToken}});if(console.log(n.data,"response aya"),et(n.data.projectCode),3===(null===ue||void 0===ue||null===(t=ue.user)||void 0===t?void 0:t.roleId)||4===(null===ue||void 0===ue||null===(o=ue.user)||void 0===o?void 0:o.roleId)){const e=n.data.filter((e=>{var t;return e.authorId===(null===ue||void 0===ue||null===(t=ue.user)||void 0===t?void 0:t.id)}));ve(e),ge(e)}else if(2===(null===ue||void 0===ue||null===(l=ue.user)||void 0===l?void 0:l.roleId)){var s;console.log(null===ue||void 0===ue||null===(s=ue.user)||void 0===s?void 0:s.departmentId,"departmentId");const e=n.data.filter((e=>{var t,o;return e.departmentId.split(",").includes(null===ue||void 0===ue||null===(t=ue.user)||void 0===t?void 0:t.departmentId)||e.authorId===(null===ue||void 0===ue||null===(o=ue.user)||void 0===o?void 0:o.id)}));console.log("dataaaaaa",e);const t=e.map((e=>e.projectId));re(t),ve(e),ge(e)}else if(6===(null===ue||void 0===ue||null===(a=ue.user)||void 0===a?void 0:a.roleId)){var r;console.log(null===ue||void 0===ue||null===(r=ue.user)||void 0===r?void 0:r.departmentId,"departmentId");const e=n.data.filter((e=>e.clientId==(null===ue||void 0===ue?void 0:ue.user.companyId)));console.log("dataaaaaa",e);const t=e.map((e=>e.projectId));re(t),ve(e),ge(e)}else ve(n.data),ge(n.data)}catch(n){console.error("Error fetching documents:",null===n||void 0===n?void 0:n.message)}},vt=e=>new Promise(((t,o)=>{const l=new Image;l.crossOrigin="Anonymous",l.onload=()=>{const e=document.createElement("canvas");e.width=l.width,e.height=l.height;e.getContext("2d").drawImage(l,0,0);const o=e.toDataURL("image/png");t(o)},l.onerror=e=>{o(e)},l.src=e})),ht=async e=>{console.log(e,"record");const t=await(async e=>{try{var t;const o=await w().get(`https://novacon.live/api/documents/establishment?companyId=${null===ue||void 0===ue||null===(t=ue.user)||void 0===t?void 0:t.companyId}&userId=${ue.user.id}&docName=${e}`,{headers:{Authorization:null===ue||void 0===ue?void 0:ue.accessToken}});return console.log(o.data,"received"),o.data}catch(o){console.error("Error fetching documents:",null===o||void 0===o?void 0:o.message)}})(e.title);console.log("helllooo",t);const o=e.title,l=`https://novacon.live/uploads/${o}-${e.version}.pdf`;console.log(ue.user.roleId,ue.user.firstName,ue);let a="false";t&&(a="true");try{var s;(await w().get(`https://novacon.live/api/documents/checkDocuments?companyId=${null===ue||void 0===ue||null===(s=ue.user)||void 0===s?void 0:s.companyId}&docName=${o}&version=${e.version}`,{headers:{Authorization:null===ue||void 0===ue?void 0:ue.accessToken}})).data.status?window.location.href=`https://novacon.live/react-pdf-highlighter/?docName=${o}.pdf&url=${l}&allowed=${a}&user=${ue.user.roleId} ${ue.user.firstName}`:p.Ay.warning("Document not uploaded yet.")}catch(r){console.error("Error checking document:",r),alert("An error occurred while checking the document.")}};return(0,l.useEffect)((()=>{var e;me(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),(async()=>{try{var e;const t=await w().get(`https://novacon.live/api/departments?companyId=${null===ue||void 0===ue||null===(e=ue.user)||void 0===e?void 0:e.companyId}`,{headers:{Authorization:null===ue||void 0===ue?void 0:ue.accessToken}}),o=[],l=[];for(const e of null===t||void 0===t?void 0:t.data)o.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title}),l.push({value:null===e||void 0===e?void 0:e.suffix,label:null===e||void 0===e?void 0:e.title});Re(o),Xe(l)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}})(),(async()=>{try{var e;const t=await w().get(`https://novacon.live/api/projects?companyId=${null===ue||void 0===ue||null===(e=ue.user)||void 0===e?void 0:e.companyId}`,{headers:{Authorization:null===ue||void 0===ue?void 0:ue.accessToken}}),o=new Set,l=null===t||void 0===t?void 0:t.data.reduce(((e,t)=>(o.has(t.title)||(o.add(t.title),e.push({value:t.id,label:t.title,code:t.code})),e)),[]);console.log(t.data),ce(l),console.log(de)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}})(),(async()=>{try{var e;const o=await w().get(`https://novacon.live/api/users?companyId=${null===ue||void 0===ue||null===(e=ue.user)||void 0===e?void 0:e.companyId}&roleId=2`,{headers:{Authorization:null===ue||void 0===ue?void 0:ue.accessToken}});ke(o.data),console.log(null===o||void 0===o?void 0:o.data,"Users");const l=[],a=[],s=[];for(const e of null===o||void 0===o?void 0:o.data){var t="Engineer";1==e.roleId&&(t="CEO",s[e.id]=`${e.firstName} ${e.lastName}`,l.push({value:{id:null===e||void 0===e?void 0:e.id,name:e.firstName,departmentId:null===e||void 0===e?void 0:e.departmentId,department:e.department},label:`${null===e||void 0===e?void 0:e.firstName} ${t} `})),2==e.roleId&&(t=`HEAD of ${e.department}`,s[e.id]=`${e.firstName} ${e.lastName}`,l.push({value:{id:null===e||void 0===e?void 0:e.id,name:e.firstName},label:`${null===e||void 0===e?void 0:e.firstName} ${t} `}),a.push({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.firstName} ${t} `})),3==e.roleId&&(t=`Senior Engineer ${e.department}`,s[e.id]=`${e.firstName} ${e.lastName}`,l.push({value:{id:null===e||void 0===e?void 0:e.id,name:e.firstName},label:`${null===e||void 0===e?void 0:e.firstName} ${t} `}),a.push({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.firstName} ${t} `})),4==e.roleId&&(t="Junior",s[e.id]=`${e.firstName} ${e.lastName}`),5==e.roleId&&(t="Designer/Draughtsmen",s[e.id]=`${e.firstName} ${e.lastName}`),Pe(s)}const r=l.filter((e=>1!==e.roleId));ze(r),Fe(l),Le(a)}catch(o){console.error("Error fetching departments:",null===o||void 0===o?void 0:o.message)}})(),pt(),console.log(pe)}),[]),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(A.A,{title:"Upload Document",width:400,centered:!0,visible:M,onCancel:nt,footer:null,closeIcon:(0,T.jsx)(k.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,T.jsx)(j.A,{justify:"center",align:"middle",children:(0,T.jsx)(y.A,{span:24,children:(0,T.jsxs)(v.A,{layout:"vertical",name:"basic",children:[(0,T.jsx)(v.A.Item,{label:"MDR Title",name:"docTitle",rules:[{required:!0,message:"Please input your title"}],children:(0,T.jsx)(h.A,{value:W,onChange:e=>B(e.target.value)})}),(0,T.jsx)(v.A.Item,{label:"MDR Code",name:"docCode",rules:[{required:!0,message:"Please input your code"}],children:(0,T.jsx)(h.A,{value:W,onChange:e=>oe(e.target.value)})}),(0,T.jsx)(v.A.Item,{label:"Project Name",name:"projectName",rules:[{required:!0,message:"Please select Project Name"}],children:(0,T.jsx)(I.A,{options:de,value:K,onChange:e=>$(e)})}),(0,T.jsx)(v.A.Item,{label:"Add Reviewers",name:"reviewers",rules:[{required:!0,message:"Please select Reviewers Name"}],children:(0,T.jsx)(b.A.Group,{options:Ee,value:Ae,onChange:je})}),(0,T.jsx)(v.A.Item,{label:"Add Approvers",name:"approvers",rules:[{required:!0,message:"Please select Approvers Name"}],children:(0,T.jsx)(b.A.Group,{options:Ee,value:Se,onChange:Ce})}),(0,T.jsx)(j.A,{justify:"center",children:(0,T.jsx)(y.A,{span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,T.jsx)(f.A,{block:!0,onClick:Ve?()=>{if(!W||!K||!Ae||!Se)return void x.A.error({message:"Validation Error",description:"Please fill in all required fields.",style:{backgroundColor:"#f5222d",color:"#fff"}});const e=de.find((e=>(null===e||void 0===e?void 0:e.value)==K)),t=JSON.stringify(Te),o=JSON.stringify(Oe),l=JSON.stringify(Ve),a=JSON.stringify(de),s=JSON.stringify(Se),r=JSON.stringify(Ae);rt.push(`/pages/initialMDR?projectCode=${e.code}&mdrCode=${te}\n      &departmentOption=${o}&departmentOptions=${t}\n      &projectOptions=${a}&projectId=${K}&projectCode=${_e}\n      &departmentId=${fe}&title=${W}&approver=${s}\n      &reviewer=${r}&record=${l}`)}:()=>{if(!W||!K||!Ae||!Se)return void x.A.error({message:"Validation Error",description:"Please fill in all required fields.",style:{backgroundColor:"#f5222d",color:"#fff"}});const e=de.find((e=>(null===e||void 0===e?void 0:e.value)==K)),t=JSON.stringify(Te),o=JSON.stringify(Oe),l=JSON.stringify(de),a=JSON.stringify(Se),s=JSON.stringify(Ae);rt.push(`/pages/initialMDR?projectCode=${e.code}&mdrCode=${te}\n    &departmentOption=${o}&departmentOptions=${t}\n    &projectOptions=${l}&projectId=${K}&projectCode=${_e}\n    &departmentId=${fe}&title=${W}&approver=${a}&reviewer=${s}`)},type:"primary",htmlType:"submit",children:"MDR template"})})})]})})})}),(0,T.jsxs)(A.A,{title:"Delete Project",width:416,centered:!0,visible:Qe,onCancel:it,footer:null,closeIcon:(0,T.jsx)(k.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:[(0,T.jsx)("div",{children:(0,T.jsx)("p",{children:"Are you sure you want to delete this?"})}),(0,T.jsxs)(j.A,{children:[(0,T.jsx)(y.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,T.jsx)(f.A,{block:!0,type:"primary",danger:!0,onClick:()=>(async e=>{const t=e.id;console.log(t);const o=await w().delete(`https://novacon.live/api/users?delete=4&recordId=${e.id}`,{headers:{Authorization:null===ue||void 0===ue?void 0:ue.accessToken}});p.Ay.success(o.data.message),it(),pt()})(Ve),children:"Delete"})}),(0,T.jsx)(y.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,T.jsx)(f.A,{block:!0,onClick:it,children:"Cancel"})})]})]}),(0,T.jsx)(A.A,{title:"Assign Document",width:400,centered:!0,visible:U,onCancel:()=>{P(!1)},footer:null,closeIcon:(0,T.jsx)(k.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,T.jsx)(j.A,{justify:"space-between",align:"center",children:(0,T.jsx)(y.A,{span:20,children:(0,T.jsxs)(v.A,{form:Q,onFinish:()=>{Q.validateFields().then((e=>{mt(be,we),Q.resetFields()}))},layout:"vertical",name:"basic",children:[(0,T.jsx)(v.A.Item,{label:"Project Name",name:"projectName",rules:[{required:!0,message:"Please select Project Name"}],children:(0,T.jsx)(I.A,{options:de,value:K,onChange:e=>$(e)})}),(0,T.jsx)(v.A.Item,{label:"Assigned MDR to",name:"assignMDR",rules:[{required:!0,message:"Please Assign MDR"}],children:(0,T.jsx)(I.A,{options:Je,value:be,onChange:e=>Ne(e)})}),(0,T.jsx)(j.A,{children:(0,T.jsx)(y.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,T.jsx)(f.A,{block:!0,type:"primary",htmlType:"submit",children:"Assigned"})})}),(0,T.jsx)(j.A,{})]})})})}),(0,T.jsx)(A.A,{title:"Update MDR",width:416,centered:!0,visible:H,onCancel:dt,footer:null,closeIcon:(0,T.jsx)(k.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,T.jsxs)(v.A,{form:D,layout:"vertical",onFinish:()=>{D.validateFields().then((e=>{lt(),D.resetFields()}))},children:[(0,T.jsx)(v.A.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Please enter the mdr title"}],children:(0,T.jsx)(h.A,{placeholder:"Enter MDR title",onChange:e=>D.setFieldsValue({title:e.target.value})})}),(0,T.jsx)(v.A.Item,{label:"MDR Code",name:"mdrCode",rules:[{required:!0,message:"Please enter mdr code"}],children:(0,T.jsx)(h.A,{placeholder:"Enter MDR code",onChange:e=>D.setFieldsValue({mdrCode:e.target.value})})}),(0,T.jsx)(v.A.Item,{children:(0,T.jsx)(j.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,T.jsx)(f.A,{type:"primary",htmlType:"submit",children:"Update"})})})]})}),(0,T.jsx)(A.A,{title:"Show MDR Documents",width:400,centered:!0,visible:V,onCancel:()=>{Z(!1)},footer:null,closeIcon:(0,T.jsx)(k.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,T.jsx)(j.A,{justify:"space-between",align:"center",children:(0,T.jsx)(y.A,{span:20,children:(0,T.jsxs)("div",{children:[(0,T.jsx)("h3",{children:"MDR Documents"}),(0,T.jsx)("ul",{children:ye.map(((e,t)=>(0,T.jsx)("li",{children:Object.entries(e).map((e=>{let[t,o]=e;return(0,T.jsxs)("div",{children:[(0,T.jsxs)("strong",{children:[t,":"]}),(0,T.jsx)("ul",{children:o.map(((e,t)=>(0,T.jsxs)("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px"},children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Document Title:"})," ",e.docTitle," ",(0,T.jsx)("br",{}),(0,T.jsx)("strong",{children:"Code:"})," ",e.title," ",(0,T.jsx)("br",{}),(0,T.jsx)("strong",{children:"Version:"})," ",e.version,"\xa0",(0,T.jsx)("br",{})]}),(0,T.jsx)("button",{style:{backgroundColor:"#1890ff",color:"#fff",border:"none",padding:"3px 10px",borderRadius:"4px",cursor:"pointer"},onClick:()=>ht(e),children:"Open"})]},t)))})]},t)}))},t)))})]})})})}),(0,T.jsxs)("div",{style:{textAlign:"right",marginBottom:"16px"},children:[1==(null===ue||void 0===ue?void 0:ue.user.roleId)&&(0,T.jsx)(f.A,{type:"primary",onClick:()=>{z(!0)},style:{marginRight:"10px"},children:"Create MDR Yourself"}),1==(null===ue||void 0===ue?void 0:ue.user.roleId)&&(0,T.jsx)(f.A,{type:"primary",onClick:()=>{P(!0)},children:"Assign MDR"}),qe&&(0,T.jsx)(MdrTemplate,{})]}),(0,T.jsx)("div",{style:{overflowX:"auto"},children:(0,T.jsx)(N.A,{columns:[{title:"Document Title",dataIndex:"title",key:"title",...st("title")},{title:"Project Code",dataIndex:"projectCode",key:"projectCode",...st("projectCode")},{title:"Dept Name",dataIndex:"departmentName",key:"departmentName",...st("departmentName")},{title:"Author Name",dataIndex:"authorName",key:"authorName",...st("authorName")},{title:"No of Documents",dataIndex:"noOfDocuments",key:"noOfDocuments",sorter:(e,t)=>e.noOfDocuments-t.noOfDocuments},{title:"Status",key:"status",dataIndex:"status",filters:[{text:"Initialized",value:"Initialized"},{text:"Ongoing",value:"Ongoing"},{text:"Completed",value:"Completed"}],onFilter:(e,t)=>t.status===e},{title:"Progress Per Document",key:"percentage",render:(e,t)=>(0,T.jsx)(g.A,{children:null!==t.percentage?(0,T.jsx)(R,{percentage:t.percentage.toFixed(1)}):null})},{title:"Action",key:"action",render:(e,t)=>{var o,l;return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(g.A,{size:"middle",children:[(0,T.jsx)(S.A,{title:"Export CSV",children:(0,T.jsx)(f.A,{size:"middle",icon:(0,T.jsx)(O.A,{}),onClick:()=>(async e=>{const t=(await w().get(`https://novacon.live/api/documents?masterDocumentId=${e.mdrCode}&projectId=${e.projectId}&companyId=${e.companyId}`,{headers:{Authorization:null===ue||void 0===ue?void 0:ue.accessToken}})).data.map((e=>{const{version:t,companyId:o,departmentId:l,projectId:a,masterDocumentId:s,masterDocumentName:r,content:n,extension:i,fileName:d,createdAt:c,updatedAt:u,...m}=e;return m})),o=e=>e?new Date(e).toISOString().split("T")[0]:"";console.log(t,"modified");const l=Object.keys(t[0]).map((e=>({header:e.toUpperCase(),key:e,width:20})));console.log(l,"resultresult");const a=new(n().Workbook),s=a.addWorksheet("MDR Data");s.properties.defaultRowHeight=90,s.columns=l,s.getRow(1).font={bold:!0,size:14};try{const e=await vt(c);console.log(e,"logoBase64");const t=a.addImage({base64:e,extension:"png"});s.addImage(t,{tl:{col:0,row:0},ext:{width:150,height:50}})}catch(p){console.error("Error loading image:",p)}t.forEach((e=>{s.addRow({assignedBy:Ue[e.assignedBy],assignedFrom:Ue[e.assignedFrom],assignedTo:Ue[e.assignedTo],docTitle:e.docTitle,expectedEndedDate:o(e.expectedEndedDate),startedDate:o(e.startedDate),status:e.status,title:e.title})}));const r=await vt(u),i=s.addRow(["Powered by Novacon"]);s.mergeCells(`A${i.number}:J${i.number}`),i.getCell(1).alignment={horizontal:"center"},i.getCell(1).font={bold:!0,size:12};const d=a.addImage({base64:r,extension:"png"}),m=1.3*s.getColumn(1).width;s.addImage(d,{tl:{col:5,row:i.number-1,offsetX:m,offsetY:10},ext:{width:50,height:50}}),a.xlsx.writeBuffer().then((e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=window.URL.createObjectURL(t),l=document.createElement("a");l.href=o,l.download="download.xlsx",l.click(),window.URL.revokeObjectURL(o)}))})(t)})}),1!==ue.user.roleId&&t.authorId===(null===ue||void 0===ue?void 0:ue.user.id)&&"Assigned"==t.status&&(0,T.jsx)(f.A,{onClick:()=>(e=>{console.log("record",e),Ze(e),z(!0)})(t),children:"Create"},null===t||void 0===t?void 0:t.id),(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(S.A,{title:"View MDR Docs",children:(0,T.jsx)(f.A,{size:"middle",icon:(0,T.jsx)(X,{}),onClick:()=>(e=>{console.log("record",e),Ze(e),ct(e),Z(!0)})(t)})})}),(0,T.jsx)(S.A,{title:"Update MDR",children:(0,T.jsx)(f.A,{size:"middle",icon:(0,T.jsx)(F.A,{}),disabled:1!==(null===ue||void 0===ue||null===(o=ue.user)||void 0===o?void 0:o.roleId),onClick:()=>(e=>{$e(e),D.setFieldsValue({id:e.id,title:e.title,mdrCode:e.mdrCode}),G(!0)})(t)})}),(0,T.jsx)(S.A,{title:"Delete",children:(0,T.jsx)(f.A,{size:"middle",icon:(0,T.jsx)(E.A,{}),disabled:1!==(null===ue||void 0===ue||null===(l=ue.user)||void 0===l?void 0:l.roleId),onClick:()=>(e=>{Ze(e),Ye(!0)})(t)})})]})})}}],size:"middle",bordered:!0,title:()=>"All Department Documents",footer:()=>"You may filter MDR",dataSource:pe,rowClassName:e=>ot&&e.id===ot.selectedRecord.id?"highlighted-row":""})}),(0,T.jsx)(q.A,{})]})}}}]);
//# sourceMappingURL=6231.5cd77ae1.chunk.js.map