"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[7521],{14419:(e,t,o)=>{o(65043),o(22019),o(86178),o(70579)},94140:(e,t,o)=>{o.d(t,{A:()=>d});var s=o(65043),a=o(83557),n=o(39816),r=o(47419),l=o(11645),i=o(22019),c=o(70579);function d(e){let{projects:t,projectCount:o,projectsStatusCounts:d}=e;console.log("projects",t,"projectCount",o,"projectsStatusCounts",d);const[p,u]=(0,s.useState)([0,0,0]),[h,m]=(0,s.useState)("");(0,s.useEffect)((()=>{if(t&&t.length>0){let e=0,o=0,s=0;t.forEach((t=>{switch(t.status){case"Initialized":e++;break;case"Completed":o++;break;case"Ongoing":s++}})),u([e,o,s]),console.log(t,"log"),t[0].projectId?m("MDR Progress"):m("Project Progress")}}),[t]);a.A,a.A.Item,a.A.Item,a.A.Item;(0,s.useEffect)((()=>{}),[p]);const[g]=(0,s.useState)({series:p,options:{chart:{dropShadow:{enabled:!0,top:0,left:0,blur:1.5,opacity:.3},fontFamily:"Manrope, sans-serif",type:"donut",toolbar:{show:!0},zoom:{enabled:!0}},colors:["#0010F7","#55B1F3","#1BE7FF"],labels:["Initialized","Completed"," Ongoing"],dataLabels:{style:{colors:["#55B1F3","#0010F7","#1BE7FF"]},enabled:!0},plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,name:{fontSize:"2rem"},value:{fontSize:"16px",formatter:e=>"".concat(e)},total:{show:!0,fontSize:"16px",label:"Total",formatter:function(e){return"".concat(e.globals.seriesTotals.reduce(((e,t)=>e+t)))}}}}}},legend:{itemMargin:{horizontal:24,vertical:12},horizontalAlign:"center",position:"bottom",fontSize:"18px",markers:{radius:12}}}});return(0,c.jsx)(n.A,{className:"hp-border-color-black-40",children:(0,c.jsxs)(r.A,{children:[(0,c.jsx)(l.A,{span:24,children:(0,c.jsx)(r.A,{justify:"space-between",align:"top",children:(0,c.jsx)(l.A,{children:(0,c.jsx)("h4",{className:"hp-mr-8",children:h})})})}),(0,c.jsx)(l.A,{span:24,children:(0,c.jsx)("div",{id:"chart",className:"hp-donut-chart",children:(0,c.jsx)(i.A,{options:g.options,series:p,type:"donut",height:398,legend:"legend"})})})]})})}},37521:(e,t,o)=>{o.r(t),o.d(t,{default:()=>v});var s=o(65043),a=o(47419),n=o(11645),r=o(39816),l=o(70579);var i=o(22019),c=o(86178),d=o.n(c);var p=o(79170);function u(e){let{inputData:t,documents:o,completed:c,remaining:u}=e;console.log(t,"getting ");const[h,m]=(0,s.useState)([]),[g,x]=(0,s.useState)([o]),[f,j]=(0,s.useState)([]),[b,A]=(0,s.useState)([]),[v,S]=(0,s.useState)([]);(0,s.useEffect)((()=>{if(t&&t.length>0){const e=t.map((e=>e.title));console.log(e,"titlesArray"),m(e)}}),[t]),(0,s.useEffect)((()=>{if(o&&o.length>0){const e=[],t=[];for(const s of o){let o=0,a=0;for(const e of s.map((e=>e.status)))console.log(e,"array"),"Completed"===e?o++:a++;e.push(o),t.push(a)}console.log("Completed Counts:",e),console.log("Remaining Counts:",t),A(e),j(t)}x(o)}),[o]);function y(e){if(e&&e.length>0){console.log(e,"filtered");const t=[],o=[];for(const s of e){console.log(s,"document");let e=0,a=0;for(const t of s.map((e=>e.status)))console.log(t,"array"),"Completed"===t?e++:a++;t.push(e),o.push(a)}console.log("Completed Counts:",t),console.log("Remaining Counts:",o),A(t),j(o)}}console.log(b,f);const[C]=(0,s.useState)({series:[{name:"Approved Documents",data:b},{name:"Remaining Documents",data:f}],options:{chart:{fontFamily:"Manrope, sans-serif",type:"bar",toolbar:{show:!1},zoom:{enabled:!0}},labels:{style:{fontSize:"14px"}},dataLabels:{enabled:!0},grid:{borderColor:"#DFE6E9",row:{opacity:.5}},plotOptions:{bar:{horizontal:!1,borderRadius:2,columnWidth:"45%",endingShape:"rounded"},colors:{backgroundBarColors:["#0063F7","#00F7BF"]}},stroke:{show:!0,width:4,colors:["transparent"]},xaxis:{axisTicks:{show:!0,borderType:"solid",color:"#78909C",height:6,offsetX:0,offsetY:0},tickPlacement:"between",labels:{style:{colors:["636E72"],fontSize:"14px"}},categories:h},legend:{horizontalAlign:"right",offsetX:40,position:"top",markers:{radius:12}},yaxis:{labels:{style:{colors:["636E72"],fontSize:"14px"},formatter:e=>e},min:0,max:12,tickAmount:4}}});return(0,l.jsx)(r.A,{className:"hp-border-color-black-40",children:(0,l.jsxs)(a.A,{children:[(0,l.jsx)(n.A,{className:"hp-mb-16",span:24,children:(0,l.jsxs)(a.A,{justify:"space-between",children:[(0,l.jsx)(a.A,{align:"bottom",className:"hp-pb-16",children:(0,l.jsx)("h4",{className:"hp-mr-8",children:"Document Assessment"})}),(0,l.jsx)(n.A,{children:(0,l.jsx)(p.A,{onChange:function(e,t){console.log(e,t,"isko peecha bhej"),(e=>{if(""===e)return x(o),void y(o);console.log(g,"documentss"),console.log(e,"dateString");const t=g.map((t=>t.filter((t=>(console.log(t,"item",t.id),t.startedDate.substring(0,4)===e)))));console.log(b,f),S(t),y(t)})(t)},picker:"year",defaultValue:d()("2020","YYYY")})})]})}),(0,l.jsx)(n.A,{span:24,children:(0,l.jsx)("div",{id:"chart",children:(0,l.jsx)(i.A,{options:{...C.options,xaxis:{...C.options.xaxis,categories:h}},series:[{name:"Approved Documents",data:b},{name:"Remaining Documents",data:f}],type:"bar",height:350,legend:"legend"})})})]})})}o(14419),o(36050);function h(e){let{departments:t,departmentsMembers:o}=e;const[c]=(0,s.useState)({series:[{name:"Department Size",data:o}],options:{chart:{fontFamily:"Manrope, sans-serif",type:"bar",toolbar:{show:!1},zoom:{enabled:!1}},plotOptions:{bar:{borderRadius:8,horizontal:!0}},labels:{style:{fontSize:"14px"}},dataLabels:{enabled:!0},grid:{borderColor:"#DFE6E9",row:{opacity:.5}},fill:{opacity:1,type:"solid"},stroke:{show:!0,width:4,curve:"straight",colors:["transparent"]},xaxis:{axisTicks:{show:!1},labels:{style:{colors:["636E72"],fontSize:"12px"}},categories:t},legend:{horizontalAlign:"right",offsetX:40,position:"top",markers:{radius:12}},colors:["#0063F7"],yaxis:{labels:{style:{colors:["636E72"],fontSize:"14px"}}}}});return(0,l.jsx)(r.A,{className:"hp-border-color-black-40",children:(0,l.jsxs)(a.A,{children:[(0,l.jsx)(n.A,{span:24,children:(0,l.jsx)(a.A,{justify:"space-between",align:"top",children:(0,l.jsx)(n.A,{className:"hp-pb-16",children:(0,l.jsx)("h4",{className:"hp-mr-8",children:"Department Strengths"})})})}),(0,l.jsx)(n.A,{span:24,children:(0,l.jsx)("div",{id:"chart",children:(0,l.jsx)(i.A,{options:c.options,series:[{data:o}],options:{...c.options,xaxis:{...c.options.xaxis,categories:t}},type:"bar",height:350,legend:"legend"})})})]})})}var m=o(94140);var g=o(83557),x=o(49812),f=o(22285);function j(e){let{inputData:t}=e;console.log(t,"inputData");let o=t.reduce(((e,t)=>e+t),0);const c=(0,l.jsxs)(g.A,{children:[(0,l.jsx)(g.A.Item,{children:"Last 7 Days"}),(0,l.jsx)(g.A.Item,{children:"Last Month"}),(0,l.jsx)(g.A.Item,{children:"Last Year"})]}),[d]=(0,s.useState)({series:t,options:{chart:{fontFamily:"Manrope, sans-serif",type:"radialBar",toolbar:{show:!1},zoom:{enabled:!1}},colors:["#00F7BF","#0010F7","#CC6CE7","#7DDA58"],labels:["Reviewed Pending","Approved Pending","Reviewed","Approved"],dataLabels:{enabled:!0},stroke:{lineCap:"round"},plotOptions:{radialBar:{size:50,hollow:{size:"20%"},track:{margin:16},dataLabels:{show:!0,name:{fontSize:"16px"},value:{fontSize:"16px"},total:{show:!0,fontSize:"16px",label:"Total",value:o}}}},legend:{show:!0,itemMargin:{horizontal:24,vertical:0},horizontalAlign:"center",position:"bottom",fontSize:"16px",markers:{radius:12}}}});return(0,l.jsx)(r.A,{className:"hp-border-color-black-40",children:(0,l.jsxs)(a.A,{children:[(0,l.jsx)(n.A,{span:24,children:(0,l.jsxs)(a.A,{justify:"space-between",align:"top",children:[(0,l.jsx)(n.A,{children:(0,l.jsx)("h4",{className:"hp-mr-8",children:"Action Items"})}),(0,l.jsx)(n.A,{children:(0,l.jsx)(x.A,{overlay:c,trigger:["click"],children:(0,l.jsx)(f.QXe,{className:"hp-text-color-dark-0",size:24,onClick:e=>e.preventDefault()})})})]})}),(0,l.jsx)(n.A,{span:24,children:(0,l.jsx)("div",{id:"chart",className:"hp-donut-chart",children:(0,l.jsx)(i.A,{options:d.options,series:t,type:"radialBar",height:400,legend:"legend"})})})]})})}var b=o(40854),A=o.n(b);function v(){const[e,t]=(0,s.useState)(JSON.parse(localStorage.getItem("user"))),[o,i]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[p,g]=(0,s.useState)([]),[x,f]=(0,s.useState)([]),[b,v]=(0,s.useState)([]),[S,y]=(0,s.useState)([]),[C,z]=(0,s.useState)([]),[w,k]=(0,s.useState)([]),[I,F]=(0,s.useState)(),[D,N]=(0,s.useState)(),[E,R]=(0,s.useState)(),[B,M]=(0,s.useState)(),[O,L]=(0,s.useState)([]);return(0,s.useEffect)((()=>{(async(t,o)=>{try{var s;const t=await A().get("http://54.81.250.98:8083/api/projects/info?companyId=".concat(null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.companyId),{headers:{Authorization:null===e||void 0===e?void 0:e.accessToken}});console.log("Response:",t.data),i(t.data);const o=t.data.projects.map((e=>e.title)),a=t.data.departments.map((e=>e.title)),n=t.data.departments.map((e=>e.noOfUsers)),r=t.data.establishments.map((e=>e.reviewerId)),l=t.data.establishments.map((e=>e.approverId)),c=t.data.establishments.map((e=>e.reviewerStatus)),p=t.data.establishments.map((e=>e.approverStatus)),u=r.map(((t,o)=>{var s;const a=t.indexOf(null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.id.toString());return-1!==a?c[o][a]:null})),h=l.map(((t,o)=>{var s;const a=t.indexOf(null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.id.toString());return-1!==a?p[o][a]:null})),m=u.reduce(((e,t)=>e+("1"===t?1:0)),0),x=u.reduce(((e,t)=>e+("0"===t?1:0)),0),j=h.reduce(((e,t)=>e+("1"===t?1:0)),0),b=h.reduce(((e,t)=>e+("0"===t?1:0)),0);console.log("Review Count:",x,m),console.log("Approver Count:",b,j),L([x,b,m,j]),F(x),N(m),R(b),M(j),f(a),v(n);const S=[],y=[];for(const e of t.data.documents){let t=0,o=0;for(const s of e.map((e=>e.status)))console.log(s,"array"),"Completed"===s?t++:o++;S.push(t),y.push(o)}console.log("Completed Counts:",S),console.log("Remaining Counts:",y),g(S),d(y),z(o)}catch(a){console.error(a)}})()}),[]),(0,l.jsxs)(a.A,{gutter:[32,32],className:"hp-mb-32",children:[(0,l.jsx)(n.A,{span:24,children:(0,l.jsx)(r.A,{title:"Hello! ".concat(e.user.firstName," ").concat(e.user.lastName),style:{fontSize:"32px",fontWeight:"bolder",width:"100%",margin:"0 auto",alignItems:"center",textAlign:"center"}})}),e&&1===(null===e||void 0===e?void 0:e.user.roleId)&&(0,l.jsx)(n.A,{xl:12,lg:24,children:(0,l.jsx)(m.A,{projects:o.projects,projectCount:o.projectCount,projectsStatusCounts:o.projectsStatusCounts})}),e&&1===(null===e||void 0===e?void 0:e.user.roleId)&&(0,l.jsx)(n.A,{xl:12,lg:24,children:(0,l.jsx)(m.A,{projects:o.mdrs,projectCount:o.mdrCount,projectsStatusCounts:o.mdrsStatusCounts})}),e&&1===(null===e||void 0===e?void 0:e.user.roleId)&&(0,l.jsx)(n.A,{span:24,children:(0,l.jsx)(u,{inputData:o.projects,documents:o.documents,completed:p,remaining:c})}),(e&&1===(null===e||void 0===e?void 0:e.user.roleId))|(e&&2===(null===e||void 0===e?void 0:e.user.roleId))&&(0,l.jsx)(n.A,{xl:12,lg:24,children:(0,l.jsx)(j,{inputData:O})}),e&&1===(null===e||void 0===e?void 0:e.user.roleId)&&(0,l.jsx)(n.A,{xl:12,lg:24,children:(0,l.jsx)(h,{departments:x,departmentsMembers:b})})]})}},36050:(e,t,o)=>{o(65043),o(22019),o(86178),o(70579)}}]);
//# sourceMappingURL=7521.bb90f496.chunk.js.map