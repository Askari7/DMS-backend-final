"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[5445],{23415:(e,o,t)=>{t.d(o,{A:()=>a});t(14556);var n=t(91688),l=t(70579);const a=()=>{var e;const o=null===(e=localStorage)||void 0===e?void 0:e.getItem("user");return console.log(o,"loggin"),o?null:(0,l.jsx)(n.Redirect,{to:"/pages/authentication/login"})}},85445:(e,o,t)=>{t.r(o),t.d(o,{default:()=>q});var n=t(65043),l=t(46797),a=t(91688),s=t(87942),i=t(62946),d=t(81551),c=t(99380),r=t(39244),u=t(63713),p=t(6117),v=t(40854),m=t.n(v),h=(t(4689),t(70579));const g=(0,d.A)({root:{flexGrow:7,maxWidth:1300},projectNode:{backgroundColor:"#ffffff",fontSize:"30px",padding:"15px",borderRadius:"9px",marginBottom:"15px",transition:"background-color 0.2s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},mdrNode:{backgroundColor:"#ffffff",fontSize:"24px",padding:"15px",borderRadius:"9px",marginLeft:"16px",marginBottom:"12px",transition:"background-color 0.3s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},departmentIdNode:{backgroundColor:"#ffffff",fontSize:"20px",padding:"15px",borderRadius:"9px",marginLeft:"16px",marginBottom:"12px",transition:"background-color 0.3s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},titleNode:{backgroundColor:"#ffffff",fontSize:"20px",padding:"8px",borderRadius:"4px",marginLeft:"16px",transition:"background-color 0.3s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},icon:{marginRight:"8px",fontWeight:"bold"},buttonContainer:{display:"flex",alignItems:"center",marginTop:"8px",padding:"12px"},status:{marginRight:"12px",fontSize:"20px",fontWeight:"bold"}}),f=()=>{var e,o;const[t,l]=(0,n.useState)(),[a]=(0,n.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[d,v]=(0,n.useState)({});console.log("user",a),(0,n.useEffect)((()=>{let e=!0;return(async()=>{try{var o;const t=await m().get("http://54.81.250.98:8083/api/projects/information?companyId=".concat(null===a||void 0===a||null===(o=a.user)||void 0===o?void 0:o.companyId),{headers:{Authorization:null===a||void 0===a?void 0:a.accessToken}});e&&l(t.data)}catch(t){console.error("Error fetching projects:",null===t||void 0===t?void 0:t.message)}})(),()=>{e=!1}}),[null===a||void 0===a||null===(o=a.user)||void 0===o?void 0:o.companyId]),(0,n.useEffect)((()=>{(()=>{if(!t||0===t.length)return;const e={};console.log(t,"information"),t.forEach((o=>{var t,n,l,a,s;e[o.projectCode]||(e[o.projectCode]={}),o.mdrCode&&!e[o.projectCode][o.mdrCode]&&(e[o.projectCode][o.mdrCode]={});const i=null!==(t=null===(n=o.departmentName)||void 0===n?void 0:n.split(","))&&void 0!==t?t:[],d=null!==(l=o.documents)&&void 0!==l?l:[],c=null!==(a=null===(s=o.departmentSuffix)||void 0===s?void 0:s.split(","))&&void 0!==a?a:[];i.forEach(((t,n)=>{const l=t.trim(),a=c[n].trim();e[o.projectCode][o.mdrCode][l]||(e[o.projectCode][o.mdrCode][l]=[]),d.forEach((t=>{const n=t.title.trim();n.includes(a)&&e[o.projectCode][o.mdrCode][l].push({title:t.docTitle,docTitle:n,status:t.status,version:t.version})}))}))})),console.log(e,"newData"),v(e)})()}),[t]);const f=g(),x=async e=>{try{var o;const t=await m().get("http://54.81.250.98:8083/api/documents/establishment?companyId=".concat(null===a||void 0===a||null===(o=a.user)||void 0===o?void 0:o.companyId,"&userId=").concat(a.user.id,"&docName=").concat(e),{headers:{Authorization:null===a||void 0===a?void 0:a.accessToken}});return console.log(t.data,"received"),t.data}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}};return(0,h.jsx)("div",{className:f.root,children:(0,h.jsx)(s.A,{defaultCollapseIcon:(0,h.jsx)(r.A,{}),defaultExpandIcon:(0,h.jsx)(r.A,{}),defaultEndIcon:(0,h.jsx)(c.A,{}),children:Object.entries(d).map((e=>{let[o,t]=e;return(0,h.jsx)(i.A,{nodeId:o,label:"Project ID: ".concat(o),className:f.projectNode,icon:(0,h.jsx)(r.A,{className:f.icon}),sx:{display:"inline-flex"},children:Object.entries(t).map((e=>{let[t,n]=e;return(0,h.jsx)(i.A,{nodeId:"".concat(o,"-").concat(t),label:"MDR: ".concat(t),className:f.mdrNode,icon:(0,h.jsx)(u.A,{className:f.icon}),sx:{display:"inline-flex"},children:Object.entries(n).map((e=>{let[n,l]=e;return(0,h.jsx)(i.A,{nodeId:"".concat(o,"-").concat(t,"-").concat(n),label:"Department Name: ".concat(n),className:f.departmentIdNode,icon:(0,h.jsx)(r.A,{className:f.icon}),sx:{display:"inline-flex"},children:l.map(((e,l)=>(0,h.jsx)(i.A,{nodeId:"".concat(o,"-").concat(t,"-").concat(n,"-").concat(l),label:"Title: ".concat(e.docTitle," (").concat(e.title,")"),className:f.titleNode,icon:(0,h.jsx)(c.A,{className:f.icon}),sx:{display:"inline-flex"},children:(0,h.jsxs)("div",{className:f.buttonContainer,children:[(0,h.jsxs)("span",{className:f.status,children:["Status: ",e.status]}),(0,h.jsx)(p.A,{onClick:()=>(async e=>{console.log("documentsss",e),alert("Opening document: ".concat(e.docTitle));const o=await x(e.docTitle);console.log("helllooo",o);const t=e.docTitle,n="".concat("http://54.81.250.98:8083","/uploads/").concat(t,"-").concat(e.version,".pdf");console.log(a.user.roleId,a.user.firstName,a);let l="false";o&&(l="true"),window.location.href="http://54.81.250.98:3001/react-pdf-highlighter/?docName=".concat(t,".pdf&url=").concat(n,"&allowed=").concat(l,"&user=").concat(a.user.roleId," ").concat(a.user.firstName)})(e),variant:"outlined",color:"primary",children:"Open Document"})]})},"".concat(o,"-").concat(t,"-").concat(n,"-").concat(l))))},"".concat(o,"-").concat(t,"-").concat(n))}))},"".concat(o,"-").concat(t))}))},o)}))})})};var x=t(15627),j=t(83557),I=t(60521),y=t(64435),A=t(89421),b=t(21261),C=t(47419),S=t(11645),k=t(94376),N=t(70610),w=t(78186),D=t(26412),T=t(22285),z=(t(14556),t(23415)),E=t(92823),R=t.n(E),P=(t(25884),t(62058)),O=t(16854),F=t.n(O);function q(){var e,o,t;j.A,j.A.Item,j.A.Item,j.A.Item,j.A.Item,j.A.Item;const s=()=>{ce(re)},i=()=>{ce(re)},d=()=>{ce(re)},c=()=>{const e=re.filter((e=>"completed"===e.status));ce(e)},r=()=>{const e=re.filter((e=>"ongoing"===e.status));ce(e)},u=(e,o,t)=>{o(),ze(e[0]),Re(t)},p=e=>({filterDropdown:o=>{let{setSelectedKeys:t,selectedKeys:n,confirm:l,clearFilters:a,close:s}=o;return(0,h.jsxs)("div",{style:{padding:8},children:[(0,h.jsx)(I.A,{ref:Pe,placeholder:"Search ".concat(e),value:n[0],onChange:e=>t(e.target.value?[e.target.value]:[]),onPressEnter:()=>u(n,l,e),style:{marginBottom:8,display:"block"}}),(0,h.jsxs)(y.A,{children:[(0,h.jsx)(A.A,{type:"primary",onClick:()=>u(n,l,e),icon:(0,h.jsx)(P.A,{}),size:"small",style:{width:90},children:"Search"}),(0,h.jsx)(A.A,{onClick:()=>a&&(e=>{e(),ze("")})(a),size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:e=>(0,h.jsx)(P.A,{style:{color:e?"#1677ff":void 0}}),onFilter:(o,t)=>t[e].toString().toLowerCase().includes(o.toLowerCase()),onFilterDropdownOpenChange:e=>{e&&setTimeout((()=>{var e;return null===(e=Pe.current)||void 0===e?void 0:e.select()}),100)},render:o=>Ee===e?(0,h.jsx)(F(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[Te],autoEscape:!0,textToHighlight:o?o.toString():""}):o}),v=((0,a.useHistory)(),[{title:"Mdr Code",dataIndex:"masterDocumentId",key:"masterDocumentId",...p("masterDocumentId")},{title:"Document Name",dataIndex:"title",key:"title",...p("title")},{title:"Version",dataIndex:"version",key:"version"},{title:"Status",key:"status",dataIndex:"status",filters:[{text:"Initialized",value:"Initialized"},{text:"Reviewed",value:"Reviewed"},{text:"Approved",value:"Approved"},{text:"Completed",value:"Completed"},{text:"Uploaded",value:"Uploaded"}],onFilter:(e,o)=>o.status===e},{title:"Assigned To",dataIndex:"assignedTo",key:"assignedTo"},{title:"Action",key:"action",render:(e,o)=>(0,h.jsx)(y.A,{size:"middle",children:1!=se.user.roleId?"Initialized"==o.status||"Reviewers Rejected"==o.status||"Approvers Rejected"==o.status?(0,h.jsxs)(y.A,{size:"middle",children:[(0,h.jsx)("input",{type:"file",onChange:e=>He(e,o)}),(0,h.jsx)("a",{onClick:()=>Oe(o),children:"Assign Document"})]}):se.user.id==o.assignedTo?(0,h.jsxs)(y.A,{size:"middle",children:[(0,h.jsx)("a",{onClick:()=>Fe(o),children:"Open"}),(0,h.jsx)("input",{type:"file",onChange:e=>He(e,o)})]}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("a",{onClick:()=>Fe(o),children:"Open"})}):"Initialized"==o.status?(0,h.jsx)("a",{onClick:()=>Oe(o),children:"Assign Document"}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("a",{onClick:()=>Fe(o),children:"Open"})})})}]),[g,E]=(0,n.useState)(!1),[O,q]=(0,n.useState)(null),[W,H]=(0,n.useState)(!1),[B,U]=(0,n.useState)(""),[J,M]=(0,n.useState)(""),[L,_]=(0,n.useState)(""),[G,Q]=(0,n.useState)(""),[K,Z]=(0,n.useState)(""),[V,X]=(0,n.useState)(null),[Y,$]=(0,n.useState)(""),[ee,oe]=(0,n.useState)([]),[te,ne]=(0,n.useState)([]),[le,ae]=(0,n.useState)([]),[se,ie]=(0,n.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[de,ce]=(0,n.useState)([]),[re,ue]=(0,n.useState)([]),[pe,ve]=(0,n.useState)(""),[me,he]=(0,n.useState)(""),[ge,fe]=(0,n.useState)(""),[xe,je]=(0,n.useState)([]),[Ie,ye]=(0,n.useState)([]),[Ae,be]=(0,n.useState)(!1),[Ce,Se]=(0,n.useState)([]),[ke,Ne]=(0,n.useState)([]),[we,De]=(0,n.useState)({}),[Te,ze]=(0,n.useState)(""),[Ee,Re]=(0,n.useState)(""),Pe=(0,n.useRef)(null),Oe=async e=>{console.log("recorddddd",e),De(e),console.log("hellloooo",we),await Be(),E(!0)},Fe=async e=>{const o=await We(e.title);console.log("helllooo",o);const t=e.title,n="".concat("http://54.81.250.98:8083","/uploads/").concat(t,"-").concat(e.version,".pdf");console.log(se.user.roleId,se.user.firstName,se);let l="false";o&&(l="true"),window.location.href="http://54.81.250.98:3001/react-pdf-highlighter/?docName=".concat(t,".pdf&url=").concat(n,"&allowed=").concat(l,"&user=").concat(se.user.roleId," ").concat(se.user.firstName)},qe=()=>{Z(""),U(""),Q(""),M(""),_(""),$(""),H(!1)},We=async e=>{try{var o;const t=await m().get("http://54.81.250.98:8083/api/documents/establishment?companyId=".concat(null===se||void 0===se||null===(o=se.user)||void 0===o?void 0:o.companyId,"&userId=").concat(se.user.id,"&docName=").concat(e),{headers:{Authorization:null===se||void 0===se?void 0:se.accessToken}});return console.log(t.data,"received"),t.data}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}},He=async(e,o)=>{const t=new FormData,n=e.target.files[0];console.log(o);const l=o.title;if(console.log(o.title,o.version),n.name==="".concat(o.title,"-").concat(o.version,".pdf")){var a,s,i,d,c;X(n),console.log(t,"formdata"),console.log("Uploaded file:",n);const e={title:l,companyId:null===se||void 0===se||null===(a=se.user)||void 0===a?void 0:a.companyId,roleId:null===se||void 0===se||null===(s=se.user)||void 0===s?void 0:s.roleId,userId:null===se||void 0===se||null===(i=se.user)||void 0===i?void 0:i.id,userName:"".concat(null===se||void 0===se||null===(d=se.user)||void 0===d?void 0:d.firstName," ").concat(null===se||void 0===se||null===(c=se.user)||void 0===c?void 0:c.lastName),file:n};Object.entries(e).forEach((e=>{let[o,n]=e;t.append(o,n)}));try{var r;const e=await m().post("http://54.81.250.98:8083/api/documents/upload",t,{headers:{Authorization:null===se||void 0===se?void 0:se.accessToken}});console.log(e),x.Ay.success(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)}catch(u){x.Ay.error(u)}}else x.Ay.error("File name does not match "+o.title),e.target.value=null},Be=async()=>{try{var e;const o=await m().get("http://54.81.250.98:8083/api/users?companyId=".concat(null===se||void 0===se||null===(e=se.user)||void 0===e?void 0:e.companyId,"&roleId=2"),{headers:{Authorization:null===se||void 0===se?void 0:se.accessToken}});console.log(null===o||void 0===o?void 0:o.data,"Users");const t=[];let n="";if(console.log("uuuu",null===se||void 0===se?void 0:se.user.roleId,null===se||void 0===se?void 0:se.user.companyId,null===se||void 0===se?void 0:se.user.id),1==se.user.roleId)for(const e of null===o||void 0===o?void 0:o.data)console.log(we,we.departmentId,e.departmentId,"data"),2==e.roleId&&-1!==we.departmentId.indexOf(e.departmentId)&&(n="Head of ".concat(e.department),t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(n," ")}));if(2==se.user.roleId)for(const e of null===o||void 0===o?void 0:o.data)3==e.roleId&&e.departmentId==se.user.departmentId&&(n="Senior Engineer ".concat(e.department),t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(n," ")}));if(3==se.user.roleId)for(const e of null===o||void 0===o?void 0:o.data)3==e.roleId&&e.departmentId==se.user.departmentId&&(n="Senior Engineer ".concat(e.department),t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(n," ")})),4==e.roleId&&e.departmentId==se.user.departmentId&&(n="Junior ".concat(e.department),t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(n," ")})),5==e.roleId&&e.departmentId==se.user.departmentId&&(n="Designer/Draughtsmen",t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(n," ")}));console.log("option",t),Se(t)}catch(o){console.error("Error fetching Users:",null===o||void 0===o?void 0:o.message)}},Ue=async()=>{try{var e;const o=await m().get("http://54.81.250.98:8083/api/documents?companyId=".concat(null===se||void 0===se||null===(e=se.user)||void 0===e?void 0:e.companyId,"&assignedBy=").concat(se.user.roleId,"&userId=").concat(se.user.id,"&department=").concat(se.user.departmentId),{headers:{Authorization:null===se||void 0===se?void 0:se.accessToken}});console.log(o.data,"received");const t=Array.isArray(o.data)?o.data:[];ue([...t]),ce([...t])}catch(o){console.error("Error fetching documents:",null===o||void 0===o?void 0:o.message)}},[Je,Me]=(0,n.useState)(!1),[Le,_e]=(0,n.useState)(""),Ge=()=>{_e(""),Me(!1)},[Qe,Ke]=(0,n.useState)([]);(0,n.useEffect)((()=>{var e;ie(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),(async()=>{try{var e;const o=await m().get("http://54.81.250.98:8083/api/departments?companyId=".concat(null===se||void 0===se||null===(e=se.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===se||void 0===se?void 0:se.accessToken}});je(o.data);const t=[];for(const e of null===o||void 0===o?void 0:o.data)t.push({value:null===e||void 0===e?void 0:e.suffix,label:null===e||void 0===e?void 0:e.suffix});oe(t)}catch(o){console.error("Error fetching departments:",null===o||void 0===o?void 0:o.message)}})(),(async()=>{try{var e;const o=await m().get("http://54.81.250.98:8083/api/projects?companyId=".concat(null===se||void 0===se||null===(e=se.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===se||void 0===se?void 0:se.accessToken}});ye(o.data);const t=[];for(const e of null===o||void 0===o?void 0:o.data)t.push({value:null===e||void 0===e?void 0:e.code,label:null===e||void 0===e?void 0:e.code});ne(t)}catch(o){console.error("Error fetching departments:",null===o||void 0===o?void 0:o.message)}})(),(async()=>{try{var e;const o=await m().get("http://54.81.250.98:8083/api/documents/mdr?companyId=".concat(null===se||void 0===se||null===(e=se.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===se||void 0===se?void 0:se.accessToken}}),t=[];for(const e of null===o||void 0===o?void 0:o.data)t.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title,projectId:null===e||void 0===e?void 0:e.projectId,departmentId:null===e||void 0===e?void 0:e.departmentId});ae(t)}catch(o){console.error("Error fetching departments:",null===o||void 0===o?void 0:o.message)}})(),Ue(),Be()}),[we]),(0,n.useEffect)((()=>{ce(Qe)}),[Qe]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b.A,{title:"Change Status",width:400,centered:!0,visible:Je,onCancel:Ge,footer:null,closeIcon:(0,h.jsx)(T.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,h.jsx)(C.A,{justify:"space-between",align:"center",children:(0,h.jsx)(S.A,{span:20,children:(0,h.jsxs)(k.A,{layout:"vertical",name:"basic",children:[(0,h.jsx)(k.A.Item,{label:"Select Status",name:"selectedStatus",rules:[{required:!0,message:"Please select a status"}],children:(0,h.jsx)(N.A,{options:[{label:"In-Progress",value:"in-progress"},{label:"Hold",value:"hold"},{label:"Pending Review (In-House)",value:"pending-review-in-house"},{label:"Pending Approval (In-House)",value:"pending-approval-in-house"},{label:"Reviewed (In-House)",value:"reviewed-in-house"},{label:"Approved (In-House)",value:"approved-in-house"},{label:"Pending Review (Client)",value:"pending-review-client"},{label:"Pending Endorsement (Client)",value:"pending-endorsement-client"},{label:"Endorsed (Client)",value:"endorsed-client"},{label:"Document Ready to Publish",value:"ready-to-publish"}],value:Le,onChange:e=>_e(e)})}),(0,h.jsxs)(C.A,{children:[(0,h.jsx)(S.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,h.jsx)(A.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(()=>{if(O){const e={...O,status:Le},o=de.map((o=>o.id===O.id?e:o));console.log(O),(0,l.iu)(O.id,{status:Le});const t=(0,l.Ze)(O.id);console.log("status",t),Ke(o),Ge()}})(),children:"Submit"})}),(0,h.jsx)(S.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,h.jsx)(A.A,{block:!0,onClick:Ge,children:"Cancel"})})]})]})})})}),(0,h.jsx)(b.A,{title:"Assign Document",width:400,centered:!0,visible:g,onCancel:()=>{E(!1)},footer:null,closeIcon:(0,h.jsx)(T.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,h.jsx)(C.A,{justify:"space-between",align:"center",children:(0,h.jsx)(S.A,{span:20,children:(0,h.jsxs)(k.A,{layout:"vertical",name:"basic",children:[(0,h.jsx)(k.A.Item,{label:"Assign Document to",name:"assignDoc",rules:[{required:!0,message:"Please Assign Document"}],children:(0,h.jsx)(w.A.Group,{options:Ce,value:ke,onChange:e=>Ne(e)})}),(0,h.jsx)(C.A,{children:(0,h.jsx)(S.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,h.jsx)(A.A,{block:!0,onClick:()=>(async(e,o)=>{try{console.log(e,"employees"),console.log("aaaa",o.title),te.find((e=>(null===e||void 0===e?void 0:e.value)==J)),ee.find((e=>(null===e||void 0===e?void 0:e.value)==L)),await m().put("http://54.81.250.98:8083/api/documents/?assignedTo=".concat(e,"&assignedBy=").concat(se.user.roleId,"&assignedFrom=").concat(se.user.id,"&docName=").concat(o.title),{},{headers:{Authorization:null===se||void 0===se?void 0:se.accessToken}}),E(!1),Ue()}catch(t){console.error("Error assigning documents:",t)}})(ke,we),type:"primary",htmlType:"submit",children:"Assign"})})})]})})})}),(0,h.jsx)(b.A,{title:"Upload Document",width:1e3,centered:!0,visible:W,onCancel:qe,footer:null,closeIcon:(0,h.jsx)(T.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,h.jsxs)(C.A,{justify:"space-between",align:"center",children:[(0,h.jsx)(S.A,{span:15,children:(0,h.jsx)(R(),{style:{height:"300px"},theme:"snow",value:Y,onChange:$})}),(0,h.jsx)(S.A,{span:7,children:(0,h.jsxs)(k.A,{layout:"vertical",name:"basic",children:[(0,h.jsx)(k.A.Item,{label:"Document Title",name:"docTitle",rules:[{required:!0,message:"Please input your title"}],children:(0,h.jsx)(I.A,{value:B,onChange:e=>U(e.target.value)})}),(0,h.jsx)(k.A.Item,{label:"MDR",name:"mdr",rules:[{required:!0,message:"Please select MDR"}],children:(0,h.jsx)(N.A,{options:le,value:K,onChange:e=>Z(e)})}),(0,h.jsx)(k.A.Item,{label:"Project Code",name:"projectCode",rules:[{required:!0,message:"Please select Project Code"}],children:(0,h.jsx)(N.A,{options:te,value:pe,onChange:e=>ve(e)})}),(0,h.jsx)(k.A.Item,{label:"Area Code",name:"areaCode",rules:[{required:!0,message:"Please select Area Code"}],children:(0,h.jsx)(N.A,{options:[{label:"01",value:"01"},{label:"02",value:"02"}],value:me,onChange:e=>he(e)})}),(0,h.jsx)(k.A.Item,{label:"Department Suffix",name:"deptSuffix",rules:[{required:!0,message:"Please Add Department Suffix"}],children:(0,h.jsx)(N.A,{options:ee,value:ge,onChange:e=>fe(e)})}),(0,h.jsx)(k.A.Item,{label:"Extension",name:"extension",rules:[{required:!0,message:"Please select Extention"}],children:(0,h.jsx)(N.A,{options:[{value:".pdf",label:".pdf"},{value:".docx",label:".docx"}],value:G,onChange:e=>Q(e)})}),(0,h.jsx)("input",{type:"file",onChange:e=>{const o=e.target.files[0];X(o),console.log("Uploaded file:",o)}}),(0,h.jsxs)(C.A,{children:[(0,h.jsx)(S.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,h.jsx)(A.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{try{var e,o,t,n,l,a;const s=new FormData;s.append("file",V);const i=le.find((e=>(null===e||void 0===e?void 0:e.value)==K));console.log(i,K,se);const d={title:B,departmentId:null===i||void 0===i?void 0:i.departmentId,projectId:null===i||void 0===i?void 0:i.projectId,masterDocumentId:K,content:Y,extension:G,companyId:null===se||void 0===se||null===(e=se.user)||void 0===e?void 0:e.companyId,roleId:null===se||void 0===se||null===(o=se.user)||void 0===o?void 0:o.roleId,userId:null===se||void 0===se||null===(t=se.user)||void 0===t?void 0:t.id,userName:"".concat(null===se||void 0===se||null===(n=se.user)||void 0===n?void 0:n.firstName," ").concat(null===se||void 0===se||null===(l=se.user)||void 0===l?void 0:l.lastName)};Object.entries(d).forEach((e=>{let[o,t]=e;s.append(o,t)})),console.log(s);const c=await m().post("http://54.81.250.98:8083/api/documents/?projectCode=".concat(pe,"&areaCode=").concat(me,"&deptSuffix=").concat(ge),s,{headers:{Authorization:null===se||void 0===se?void 0:se.accessToken}});console.log(c),x.Ay.success(null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.message),await Ue(),qe()}catch(s){"Request failed with status code 403"==(null===s||void 0===s?void 0:s.message)&&x.Ay.error("Permission Denied to create document on this MDR")}})(),children:"Submit"})}),(0,h.jsx)(S.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,h.jsx)(A.A,{block:!0,onClick:qe,children:"Cancel"})})]})]})})]})}),(0,h.jsxs)("div",{style:{textAlign:"right",marginBottom:"16px",padding:"15px",gap:"15px"},children:[(0,h.jsx)(A.A,{type:"primary",onClick:()=>{H(!0)},style:{marginRight:"10px"},disabled:3==(null===se||void 0===se||null===(o=se.user)||void 0===o?void 0:o.roleId),children:"Add Documents"}),(0,h.jsx)(A.A,{type:"primary",onClick:()=>{console.log("clicked"),be(!0)},disabled:3==(null===se||void 0===se||null===(t=se.user)||void 0===t?void 0:t.roleId),onDoubleClick:()=>{be(!1)},children:"Document Tree"})]}),Ae?(0,h.jsx)(f,{}):(0,h.jsx)("div",{style:{overflowX:"auto"},children:(0,h.jsx)(D.A,{columns:v,dataSource:de,bordered:!0,size:"middle",title:()=>"All Documents Information",footer:()=>"You may filter Documents"})}),(0,h.jsx)(z.A,{})]})}},46797:(e,o,t)=>{t.d(o,{Ze:()=>l,iu:()=>n});const n=(e,o)=>{const t={...l(e)||{},...o};document.cookie="".concat(e,"=").concat(JSON.stringify(t),"; expires=Fri, 31 Dec 9999 23:59:59 GMT")},l=e=>{const o=document.cookie.split("; ").find((o=>o.startsWith("".concat(e,"="))));return o?JSON.parse(o.split("=")[1]):null}}}]);
//# sourceMappingURL=5445.896a4b13.chunk.js.map