"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[6037],{23415:(e,t,l)=>{l.d(t,{A:()=>o});l(14556);var a=l(91688),n=l(70579);const o=()=>{var e;const t=null===(e=localStorage)||void 0===e?void 0:e.getItem("user");return console.log(t,"loggin"),t?null:(0,n.jsx)(a.Redirect,{to:"/pages/authentication/login"})}},86037:(e,t,l)=>{l.r(t),l.d(t,{default:()=>A});var a=l(65043),n=l(64435),o=l(15627),r=l(86904),s=l(21261),i=l(47419),d=l(11645),c=l(94376),u=l(60521),m=l(89421),p=l(70610),v=l(26412),h=l(40854),f=l.n(h),x=l(22285),g=l(23415),y=(l(25884),l(70579));function A(){var e,t;const l=[{title:"Department Title",dataIndex:"title",key:"title"},{title:"Department Suffix",dataIndex:"suffix",key:"suffix"},{title:"Department Owner",dataIndex:"headLeads",key:"headLeads"},{title:"No of Users",dataIndex:"noOfUsers",key:"noOfUsers",sorter:(e,t)=>e.noOfUsers-t.noOfUsers},{title:"Action",key:"action",render:(e,t)=>{var l;return(0,y.jsxs)(n.A,{size:"middle",children:[(0,y.jsx)("a",{children:"Delete"}),(0,y.jsx)("a",{onClick:()=>j(t),disabled:1!=(null===P||void 0===P||null===(l=P.user)||void 0===l?void 0:l.roleId),children:"Add User"})]})}}],[h,A]=(0,a.useState)([]),j=e=>{console.log("Add user for department:",e.id),D(e.id),(async()=>{try{var e;const t=await f().get("http://54.81.250.98:8083/api/users?companyId=".concat(null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.companyId,"&roleId=2"),{headers:{Authorization:null===P||void 0===P?void 0:P.accessToken}}),l=[];for(const e of null===t||void 0===t?void 0:t.data)l.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.firstName});B(l)}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}})(),Q()},[b,I]=(0,a.useState)(!1),[S,k]=(0,a.useState)(!1),[C,z]=(0,a.useState)(null),[w,N]=(0,a.useState)(""),[O,E]=(0,a.useState)(""),[U,D]=(0,a.useState)(""),[P,T]=(0,a.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[q,F]=(0,a.useState)([]),[G,B]=(0,a.useState)([]),[R,_]=(0,a.useState)([]),L=()=>{N(""),I(!1)},Q=()=>{k(!0)},J=()=>{N(""),k(!1)},M=0,V=async()=>{try{var e;const t=await f().get("http://54.81.250.98:8083/api/departments?companyId=".concat(null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===P||void 0===P?void 0:P.accessToken}});console.log(t.data),_(t.data)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}};return(0,a.useEffect)((()=>{var e;T(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),V()}),[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.A,{title:"Add Department",width:400,centered:!0,visible:b,onCancel:L,footer:null,closeIcon:(0,y.jsx)(x.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,y.jsx)(i.A,{justify:"space-between",align:"center",children:(0,y.jsx)(d.A,{span:20,children:(0,y.jsxs)(c.A,{layout:"vertical",name:"basic",children:[(0,y.jsx)(c.A.Item,{label:"Department Title",name:"title",rules:[{required:!0,message:"Please input your title"}],children:(0,y.jsx)(u.A,{value:w,onChange:e=>N(e.target.value)})}),(0,y.jsx)(c.A.Item,{label:"Department Suffix",name:"suffix",rules:[{required:!0,message:"Please input your suffix"}],children:(0,y.jsx)(u.A,{value:w,onChange:e=>E(e.target.value)})}),(0,y.jsxs)(i.A,{children:[(0,y.jsx)(d.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,y.jsx)(m.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{if(w&&O)try{var e,t,l,a,n;console.log(P);const o=await f().post("http://54.81.250.98:8083/api/departments/",{title:w,suffix:O,noOfUsers:M,companyId:null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.companyId,authorId:null===P||void 0===P||null===(t=P.user)||void 0===t?void 0:t.id,authorName:"".concat(null===P||void 0===P||null===(l=P.user)||void 0===l?void 0:l.firstName," ").concat(null===P||void 0===P||null===(a=P.user)||void 0===a?void 0:a.lastName)},{headers:{Authorization:null===P||void 0===P?void 0:P.accessToken}});console.log("departments response",o),r.A.success({message:"".concat(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.message),style:{backgroundColor:"#52c41a",color:"#fff"}}),V(),L()}catch(s){"Request failed with status code 401"==(null===s||void 0===s?void 0:s.message)&&o.Ay.error("Unauthorized"),console.error("Error adding departments:",null===s||void 0===s?void 0:s.message)}else r.A.error({message:"Validation Error",description:"Please fill in all required fields.",style:{backgroundColor:"#f5222d",color:"#fff"}})})(),disabled:1!=(null===P||void 0===P||null===(t=P.user)||void 0===t?void 0:t.roleId),children:"Submit"})}),(0,y.jsx)(d.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,y.jsx)(m.A,{block:!0,onClick:L,children:"Cancel"})})]})]})})})}),(0,y.jsx)(s.A,{title:"Add User",width:400,centered:!0,visible:S,onCancel:J,footer:null,closeIcon:(0,y.jsx)(x.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,y.jsx)(i.A,{justify:"space-between",align:"center",children:(0,y.jsx)(d.A,{span:20,children:(0,y.jsxs)(c.A,{layout:"vertical",name:"basic",children:[(0,y.jsx)(c.A.Item,{label:"Select User",name:"selectedUser",rules:[{required:!0,message:"Please select a user"}],children:(0,y.jsx)(p.A,{options:G,value:q,onChange:e=>F(e)})}),(0,y.jsxs)(i.A,{children:[(0,y.jsx)(d.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,y.jsx)(m.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{try{var e,t;console.log(G.find((e=>e.value===q)));const l=await f().post("http://54.81.250.98:8083/api/departments/associate",{title:w,companyId:null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.companyId,userId:q,departmentCreator:0,noOfUsers:M+1,departmentId:U},{headers:{Authorization:null===P||void 0===P?void 0:P.accessToken}});console.log("association response",l),o.Ay.success(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message),V(),L()}catch(l){"Request failed with status code 401"==(null===l||void 0===l?void 0:l.message)&&o.Ay.error("Unauthorized"),console.error("Error adding departments:",null===l||void 0===l?void 0:l.message)}})(),children:"Submit"})}),(0,y.jsx)(d.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,y.jsx)(m.A,{block:!0,onClick:J,children:"Cancel"})})]})]})})})}),P&&"1"==(null===P||void 0===P?void 0:P.user.roleId)&&(0,y.jsx)("div",{style:{textAlign:"right",marginBottom:"16px"},children:(0,y.jsx)(m.A,{type:"primary",onClick:()=>{I(!0)},children:"Add Department"})}),(0,y.jsx)("div",{style:{overflowX:"auto"},children:(0,y.jsx)(v.A,{columns:l,dataSource:R,bordered:!0,size:"middle",title:()=>"All Department Information",footer:()=>"You may filter departments"})}),"      ",(0,y.jsx)(g.A,{})]})}},64435:(e,t,l)=>{l.d(t,{e:()=>v,A:()=>f});var a=l(58168),n=l(64467),o=l(5544),r=l(65043),s=l(98139),i=l.n(s),d=l(62149),c=l(25055);function u(e){var t=e.className,l=e.direction,o=e.index,s=e.marginDirection,i=e.children,d=e.split,c=e.wrap,u=r.useContext(v),m=u.horizontalSize,p=u.verticalSize,h=u.latestIndex,f={};return u.supportFlexGap||("vertical"===l?o<h&&(f={marginBottom:m/(d?2:1)}):f=(0,a.A)((0,a.A)({},o<h&&(0,n.A)({},s,m/(d?2:1))),c&&{paddingBottom:p})),null===i||void 0===i?null:r.createElement(r.Fragment,null,r.createElement("div",{className:t,style:f},i),o<h&&d&&r.createElement("span",{className:"".concat(t,"-split"),style:f},d))}var m=l(46058),p=function(e,t){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(l[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(l[a[n]]=e[a[n]])}return l},v=r.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),h={small:8,middle:16,large:24};const f=function(e){var t,l=r.useContext(c.QO),s=l.getPrefixCls,f=l.space,x=l.direction,g=e.size,y=void 0===g?(null===f||void 0===f?void 0:f.size)||"small":g,A=e.align,j=e.className,b=e.children,I=e.direction,S=void 0===I?"horizontal":I,k=e.prefixCls,C=e.split,z=e.style,w=e.wrap,N=void 0!==w&&w,O=p(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),E=(0,m.A)(),U=r.useMemo((function(){return(Array.isArray(y)?y:[y,y]).map((function(e){return function(e){return"string"===typeof e?h[e]:e||0}(e)}))}),[y]),D=(0,o.A)(U,2),P=D[0],T=D[1],q=(0,d.A)(b,{keepEmpty:!0}),F=void 0===A&&"horizontal"===S?"center":A,G=s("space",k),B=i()(G,"".concat(G,"-").concat(S),(t={},(0,n.A)(t,"".concat(G,"-rtl"),"rtl"===x),(0,n.A)(t,"".concat(G,"-align-").concat(F),F),t),j),R="".concat(G,"-item"),_="rtl"===x?"marginLeft":"marginRight",L=0,Q=q.map((function(e,t){return null!==e&&void 0!==e&&(L=t),r.createElement(u,{className:R,key:"".concat(R,"-").concat(t),direction:S,index:t,marginDirection:_,split:C,wrap:N},e)})),J=r.useMemo((function(){return{horizontalSize:P,verticalSize:T,latestIndex:L,supportFlexGap:E}}),[P,T,L,E]);if(0===q.length)return null;var M={};return N&&(M.flexWrap="wrap",E||(M.marginBottom=-T)),E&&(M.columnGap=P,M.rowGap=T),r.createElement("div",(0,a.A)({className:B,style:(0,a.A)((0,a.A)({},M),z)},O),r.createElement(v.Provider,{value:J},Q))}},25884:()=>{}}]);
//# sourceMappingURL=6037.2243a431.chunk.js.map