"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[5445],{23415:(e,o,t)=>{t.d(o,{A:()=>s});t(14556);var n=t(91688),l=t(70579);const s=()=>{var e;const o=null===(e=localStorage)||void 0===e?void 0:e.getItem("user");return console.log(o,"loggin"),o?null:(0,l.jsx)(n.Redirect,{to:"/pages/authentication/login"})}},85445:(e,o,t)=>{t.r(o),t.d(o,{default:()=>M});var n=t(65043),l=t(46797),s=t(91688),a=t(87942),i=t(62946),d=t(81551),c=t(99380),r=t(39244),u=t(63713),m=t(55328),p=t(40854),v=t.n(p),h=t(70579);const g=(0,d.A)({root:{flexGrow:7,maxWidth:1300},projectNode:{backgroundColor:"#ffffff",fontSize:"30px",padding:"15px",borderRadius:"9px",marginBottom:"15px",transition:"background-color 0.2s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},mdrNode:{backgroundColor:"#ffffff",fontSize:"24px",padding:"15px",borderRadius:"9px",marginLeft:"16px",marginBottom:"12px",transition:"background-color 0.3s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},departmentIdNode:{backgroundColor:"#ffffff",fontSize:"20px",padding:"15px",borderRadius:"9px",marginLeft:"16px",marginBottom:"12px",transition:"background-color 0.3s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},titleNode:{backgroundColor:"#ffffff",fontSize:"20px",padding:"8px",borderRadius:"4px",marginLeft:"16px",transition:"background-color 0.3s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},icon:{marginRight:"8px",fontWeight:"bold"},buttonContainer:{display:"flex",alignItems:"center",marginTop:"8px",padding:"6px"},status:{marginRight:"12px",fontSize:"14px",fontWeight:"bold"}}),f=()=>{var e,o;const[t,l]=(0,n.useState)(),[s]=(0,n.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[d,p]=(0,n.useState)({});console.log("user",s),(0,n.useEffect)((()=>{let e=!0;return(async()=>{try{var o;const t=await v().get("http://127.0.0.1:8083/api/projects/information?companyId=".concat(null===s||void 0===s||null===(o=s.user)||void 0===o?void 0:o.companyId),{headers:{Authorization:null===s||void 0===s?void 0:s.accessToken}});e&&l(t.data)}catch(t){console.error("Error fetching projects:",null===t||void 0===t?void 0:t.message)}})(),()=>{e=!1}}),[null===s||void 0===s||null===(o=s.user)||void 0===o?void 0:o.companyId]),(0,n.useEffect)((()=>{(()=>{if(!t||0===t.length)return;const e={};console.log(t,"information"),t.forEach((o=>{e[o.title]||(e[o.title]={},console.log(e,"newData1")),o.mdrs.forEach((t=>{var n,l,s,a,i;e[o.title][t.title]||(e[o.title][t.title]={}),console.log(e,"newData2");const d=null!==(n=null===(l=t.departmentName)||void 0===l?void 0:l.split(","))&&void 0!==n?n:[],c=null!==(s=t.documents)&&void 0!==s?s:[],r=null!==(a=null===(i=o.departmentSuffix)||void 0===i?void 0:i.split(","))&&void 0!==a?a:[];d.forEach(((n,l)=>{var s;const a=n.trim(),i=null===(s=r[l])||void 0===s?void 0:s.trim();console.log(a,"trimmedDepartmentName",i,"trimmedSuffix"),console.log(e,"newData"),e[o.title][t.title][a]||(e[o.title][t.title][a]=[]),c.forEach((n=>{const l=n.title.trim();i&&l.includes(i)&&e[o.title][t.title][a].push({title:n.title,docTitle:l,status:n.status,version:n.version})}))}))}))})),console.log(e,"finalNewData"),console.log(e,"newData"),p(e)})()}),[t]);const f=g(),x=async e=>{try{var o;const t=await v().get("http://127.0.0.1:8083/api/documents/establishment?companyId=".concat(null===s||void 0===s||null===(o=s.user)||void 0===o?void 0:o.companyId,"&userId=").concat(s.user.id,"&docName=").concat(e),{headers:{Authorization:null===s||void 0===s?void 0:s.accessToken}});return console.log(t.data,"received"),t.data}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}};return(0,h.jsx)("div",{className:f.root,children:(0,h.jsx)(a.A,{defaultCollapseIcon:(0,h.jsx)(r.A,{}),defaultExpandIcon:(0,h.jsx)(r.A,{}),defaultEndIcon:(0,h.jsx)(c.A,{}),children:Object.entries(d).map((e=>{let[o,t]=e;return(0,h.jsx)(i.A,{nodeId:o,label:"Project Title: ".concat(o),className:f.projectNode,icon:(0,h.jsx)(r.A,{className:f.icon}),sx:{display:"inline-flex"},children:Object.entries(t).map((e=>{let[t,n]=e;return(0,h.jsx)(i.A,{nodeId:"".concat(o,"-").concat(t),label:"MDR Title: ".concat(t),className:f.mdrNode,icon:(0,h.jsx)(u.A,{className:f.icon}),sx:{display:"inline-flex"},children:Object.entries(n).map((e=>{let[n,l]=e;return(0,h.jsx)(i.A,{nodeId:"".concat(o,"-").concat(t,"-").concat(n),label:"Department Name: ".concat(n),className:f.departmentIdNode,icon:(0,h.jsx)(r.A,{className:f.icon}),sx:{display:"inline-flex"},children:l.map(((e,l)=>(0,h.jsx)(i.A,{nodeId:"".concat(o,"-").concat(t,"-").concat(n,"-").concat(l),label:"Title: ".concat(e.docTitle," (").concat(e.title,")"),className:f.titleNode,icon:(0,h.jsx)(c.A,{className:f.icon}),sx:{display:"inline-flex"},children:(0,h.jsxs)("div",{className:f.buttonContainer,children:[(0,h.jsxs)("span",{className:f.status,children:["Status: ",e.status]}),(0,h.jsx)(m.A,{onClick:()=>(async e=>{console.log("documentsss",e),alert("Opening document: ".concat(e.docTitle));const o=await x(e.docTitle);console.log("helllooo",o);const t=e.docTitle,n="".concat("http://127.0.0.1:8083","/uploads/").concat(t,"-").concat(e.version,".pdf");console.log(s.user.roleId,s.user.firstName,s);let l="false";o&&(l="true"),window.location.href="http://127.0.0.1:3001/react-pdf-highlighter/?docName=".concat(t,".pdf&url=").concat(n,"&allowed=").concat(l,"&user=").concat(s.user.roleId," ").concat(s.user.firstName)})(e),variant:"outlined",color:"primary",size:"10px",children:"Open Document"})]})},"".concat(o,"-").concat(t,"-").concat(n,"-").concat(l))))},"".concat(o,"-").concat(t,"-").concat(n))}))},"".concat(o,"-").concat(t))}))},o)}))})})};var x=t(15627),A=t(83557),j=t(60521),y=t(64435),I=t(89421),b=t(94376),C=t(75932),S=t(86904),k=t(21261),N=t(47419),w=t(11645),D=t(70610),T=t(78186),z=t(79539),E=t(43886),R=t(98294),P=t(73754),F=(t(14556),t(23415)),O=t(92823),q=t.n(O),W=(t(25884),t(62058)),H=t(16854),B=t.n(H),J=t(15337),U=t(40862),L=t(45069);function M(){var e,o;A.A,A.A.Item,A.A.Item,A.A.Item,A.A.Item,A.A.Item;const t=()=>{ge(fe)},a=()=>{ge(fe)},i=()=>{ge(fe)},d=()=>{const e=fe.filter((e=>"completed"===e.status));ge(e)},c=()=>{const e=fe.filter((e=>"ongoing"===e.status));ge(e)},r=(e,o,t)=>{o(),Ke(e[0]),Ze(t)},u=e=>({filterDropdown:o=>{let{setSelectedKeys:t,selectedKeys:n,confirm:l,clearFilters:s,close:a}=o;return(0,h.jsxs)("div",{style:{padding:8},children:[(0,h.jsx)(j.A,{ref:Xe,placeholder:"Search ".concat(e),value:n[0],onChange:e=>t(e.target.value?[e.target.value]:[]),onPressEnter:()=>r(n,l,e),style:{marginBottom:8,display:"block"}}),(0,h.jsxs)(y.A,{children:[(0,h.jsx)(I.A,{type:"primary",onClick:()=>r(n,l,e),icon:(0,h.jsx)(W.A,{}),size:"small",style:{width:90},children:"Search"}),(0,h.jsx)(I.A,{onClick:()=>s&&(e=>{e(),Ke("")})(s),size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:e=>(0,h.jsx)(W.A,{style:{color:e?"#1677ff":void 0}}),onFilter:(o,t)=>t[e].toString().toLowerCase().includes(o.toLowerCase()),onFilterDropdownOpenChange:e=>{e&&setTimeout((()=>{var e;return null===(e=Xe.current)||void 0===e?void 0:e.select()}),100)},render:o=>Ve===e?(0,h.jsx)(B(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[Ge],autoEscape:!0,textToHighlight:o?o.toString():""}):o}),[m,p]=((0,s.useHistory)(),(0,n.useState)(!1)),[g,O]=(0,n.useState)(null),[H,M]=(0,n.useState)(!1),[Q,_]=(0,n.useState)(""),[G,K]=(0,n.useState)(""),[V,Z]=(0,n.useState)(""),[X,Y]=(0,n.useState)(""),[$,ee]=(0,n.useState)(""),[oe,te]=(0,n.useState)(null),[ne,le]=(0,n.useState)(""),[se,ae]=(0,n.useState)([]),[ie,de]=(0,n.useState)([]),[ce,re]=(0,n.useState)([]),[ue,me]=(0,n.useState)([]),[pe,ve]=(0,n.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[he,ge]=(0,n.useState)([]),[fe,xe]=(0,n.useState)([]),[Ae,je]=(0,n.useState)(""),[ye,Ie]=(0,n.useState)(""),[be,Ce]=(0,n.useState)(""),[Se,ke]=(0,n.useState)(""),[Ne,we]=(0,n.useState)(""),[De,Te]=(0,n.useState)([]),[ze,Ee]=(0,n.useState)([]),[Re,Pe]=(0,n.useState)(!1),[Fe,Oe]=(0,n.useState)([]),[qe,We]=(0,n.useState)(),[He,Be]=(0,n.useState)([]),[Je,Ue]=(0,n.useState)(null),[Le,Me]=(0,n.useState)(!1),[Qe,_e]=(0,n.useState)({}),[Ge,Ke]=(0,n.useState)(""),[Ve,Ze]=(0,n.useState)(""),Xe=(0,n.useRef)(null),[Ye]=b.A.useForm(),[$e]=b.A.useForm(),eo=[{title:"Document Code",dataIndex:"masterDocumentId",key:"masterDocumentId",...u("masterDocumentId")},{title:"Document Name",dataIndex:"title",key:"title",...u("title")},{title:"Version",dataIndex:"version",key:"version"},{title:"Status",key:"status",dataIndex:"status",filters:[{text:"Initialized",value:"Initialized"},{text:"Reviewed",value:"Reviewed"},{text:"Approved",value:"Approved"},{text:"Completed",value:"Completed"},{text:"Uploaded",value:"Uploaded"}],onFilter:(e,o)=>o.status===e},{title:"Assigned To",dataIndex:"assignedToName",key:"assignedToName",render:(e,o)=>{if(o.assignedToName)return o.assignedToName;const t=o.assignedTo,n=null===t||void 0===t?void 0:t.split(",");return n&&(0,h.jsx)(y.A,{size:"middle",children:n.map(((e,o)=>(0,h.jsx)("span",{children:qe&&qe[e]},o)))})}},{title:"Action",key:"action",render:(e,o)=>{var t;return(0,h.jsxs)(y.A,{size:"middle",children:[1!=pe.user.roleId?"Initialized"==o.status||"Reviewers Rejected"==o.status||"Approvers Rejected"==o.status?(0,h.jsxs)(y.A,{size:"middle",children:[(0,h.jsx)("input",{type:"file",onChange:e=>io(e,o)}),(0,h.jsx)(C.A,{title:"Assign Doc",children:(0,h.jsx)(I.A,{size:"middle",icon:(0,h.jsx)(J.A,{}),onClick:()=>no(o)})})]}):pe.user.id==o.assignedTo?(0,h.jsxs)(y.A,{size:"middle",children:[(0,h.jsx)(C.A,{title:"Open",children:(0,h.jsx)(I.A,{size:"middle",icon:(0,h.jsx)(U.A,{}),onClick:()=>lo(o)})}),(0,h.jsx)("input",{type:"file",onChange:e=>io(e,o)})]}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(C.A,{title:"Open",children:(0,h.jsx)(I.A,{size:"middle",icon:(0,h.jsx)(U.A,{}),onClick:()=>lo(o)})})}):"Initialized"==o.status?(0,h.jsx)(C.A,{title:"Assign Doc",children:(0,h.jsx)(I.A,{size:"middle",icon:(0,h.jsx)(J.A,{}),onClick:()=>no(o)})}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(C.A,{title:"Open",children:(0,h.jsx)(I.A,{size:"middle",icon:(0,h.jsx)(U.A,{}),onClick:()=>lo(o)})})}),(0,h.jsx)(C.A,{title:"Delete",children:(0,h.jsx)(I.A,{size:"middle",icon:(0,h.jsx)(L.A,{}),disabled:1!==(null===pe||void 0===pe||null===(t=pe.user)||void 0===t?void 0:t.roleId),onClick:()=>oo(o)})})]})}}],oo=e=>{Ue(e),Me(!0)},to=()=>{Me(!1)},no=async e=>{console.log(Fe,"Options"),console.log("recorddddd",e),_e(e),console.log("hellloooo",Qe),p(!0)},lo=async e=>{const o=await ao(e.title);console.log("helllooo",o);const t=e.title,n="".concat("http://127.0.0.1:8083","/uploads/").concat(t,"-").concat(e.version,".pdf");console.log(pe.user.roleId,pe.user.firstName,pe);let l="false";o&&(l="true"),window.location.href="http://127.0.0.1:3001/react-pdf-highlighter/?docName=".concat(t,".pdf&url=").concat(n,"&allowed=").concat(l,"&user=").concat(pe.user.roleId," ").concat(pe.user.firstName)},so=()=>{ee(""),_(""),Y(""),K(""),Z(""),le(""),M(!1)},ao=async e=>{try{var o;const t=await v().get("http://127.0.0.1:8083/api/documents/establishment?companyId=".concat(null===pe||void 0===pe||null===(o=pe.user)||void 0===o?void 0:o.companyId,"&userId=").concat(pe.user.id,"&docName=").concat(e),{headers:{Authorization:null===pe||void 0===pe?void 0:pe.accessToken}});return console.log(t.data,"received"),t.data}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}},io=async(e,o)=>{const t=new FormData,n=e.target.files[0];console.log(o);const l=o.title;if(console.log(o.title,o.version),n.name==="".concat(o.title,"-").concat(o.version,".pdf")){var s,a,i,d,c;te(n),console.log(t,"formdata"),console.log("Uploaded file:",n);const e={title:l,companyId:null===pe||void 0===pe||null===(s=pe.user)||void 0===s?void 0:s.companyId,roleId:null===pe||void 0===pe||null===(a=pe.user)||void 0===a?void 0:a.roleId,userId:null===pe||void 0===pe||null===(i=pe.user)||void 0===i?void 0:i.id,userName:"".concat(null===pe||void 0===pe||null===(d=pe.user)||void 0===d?void 0:d.firstName," ").concat(null===pe||void 0===pe||null===(c=pe.user)||void 0===c?void 0:c.lastName),file:n};Object.entries(e).forEach((e=>{let[o,n]=e;t.append(o,n)}));try{var r;const e=await v().post("http://127.0.0.1:8083/api/documents/upload",t,{headers:{Authorization:null===pe||void 0===pe?void 0:pe.accessToken}});console.log(e),x.Ay.success(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)}catch(u){x.Ay.error(u)}}else x.Ay.error("File name does not match "+o.title),e.target.value=null},co=async()=>{if(Q&&$&&Ae&&Se&&ye&&Ne)try{var e,o,t,n,l,s;const a=await v().post("http://127.0.0.1:8083/api/documents/addingDoc",{title:Q,masterDocumentCode:$,projectCode:Ae,areaCode:Se,docType:ye,deptSuffix:Ne,companyId:null===pe||void 0===pe||null===(e=pe.user)||void 0===e?void 0:e.companyId,roleId:null===pe||void 0===pe||null===(o=pe.user)||void 0===o?void 0:o.roleId,userId:null===pe||void 0===pe||null===(t=pe.user)||void 0===t?void 0:t.id,userName:"".concat(null===pe||void 0===pe||null===(n=pe.user)||void 0===n?void 0:n.firstName," ").concat(null===pe||void 0===pe||null===(l=pe.user)||void 0===l?void 0:l.lastName),count:be},{headers:{Authorization:null===pe||void 0===pe?void 0:pe.accessToken}});console.log(a,"responses"),x.Ay.success(null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message),await ro(),so()}catch(a){"Request failed with status code 403"==(null===a||void 0===a?void 0:a.message)&&x.Ay.error("Permission Denied to create document on this MDR")}else S.A.error({message:"Validation Error",description:"Please fill in all required fields.",style:{backgroundColor:"#f5222d",color:"#fff"}})},ro=async()=>{try{var e;const o=await v().get("http://127.0.0.1:8083/api/documents?companyId=".concat(null===pe||void 0===pe||null===(e=pe.user)||void 0===e?void 0:e.companyId,"&assignedBy=").concat(pe.user.roleId,"&userId=").concat(pe.user.id,"&department=").concat(pe.user.departmentId),{headers:{Authorization:null===pe||void 0===pe?void 0:pe.accessToken}});console.log(o.data,"received");const t=o.data;console.log(t,"dat");const n=t.filter((e=>0==e.removed));console.log(n,"filter"),xe([...n]),ge([...n])}catch(o){console.error("Error fetching documents:",null===o||void 0===o?void 0:o.message)}},[uo,mo]=(0,n.useState)(!1),[po,vo]=(0,n.useState)(""),ho=()=>{vo(""),mo(!1)},[go,fo]=(0,n.useState)([]);(0,n.useEffect)((()=>{var e;ve(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),(async()=>{try{var e;const o=await v().get("http://127.0.0.1:8083/api/departments?companyId=".concat(null===pe||void 0===pe||null===(e=pe.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===pe||void 0===pe?void 0:pe.accessToken}});Te(o.data);const t=[];for(const e of null===o||void 0===o?void 0:o.data)t.push({value:null===e||void 0===e?void 0:e.suffix,label:null===e||void 0===e?void 0:e.suffix});ae(t)}catch(o){console.error("Error fetching departments:",null===o||void 0===o?void 0:o.message)}})(),(async()=>{try{var e;const o=await v().get("http://127.0.0.1:8083/api/projects?companyId=".concat(null===pe||void 0===pe||null===(e=pe.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===pe||void 0===pe?void 0:pe.accessToken}});Ee(o.data);const t=[];for(const e of null===o||void 0===o?void 0:o.data)t.push({value:null===e||void 0===e?void 0:e.code,label:null===e||void 0===e?void 0:e.code});de(t)}catch(o){console.error("Error fetching departments:",null===o||void 0===o?void 0:o.message)}})(),(async()=>{try{var e;const o=await v().get("http://127.0.0.1:8083/api/users?companyId=".concat(null===pe||void 0===pe||null===(e=pe.user)||void 0===e?void 0:e.companyId,"&roleId=2"),{headers:{Authorization:null===pe||void 0===pe?void 0:pe.accessToken}});console.log(null===o||void 0===o?void 0:o.data,"Users");const t=[];let n={},l="";if(console.log("uuuu",null===pe||void 0===pe?void 0:pe.user.roleId,null===pe||void 0===pe?void 0:pe.user.companyId,null===pe||void 0===pe?void 0:pe.user.id),1==pe.user.roleId)for(const e of null===o||void 0===o?void 0:o.data)console.log(Qe,Qe.departmentId,e.departmentId,"data"),n[e.id]="".concat(e.firstName),2==e.roleId&&(l="Head of ".concat(e.department),t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(l," ")}));if(2==pe.user.roleId)for(const e of null===o||void 0===o?void 0:o.data)3==e.roleId&&e.departmentId==pe.user.departmentId&&(l="Senior Engineer ".concat(e.department),t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(l," ")}));if(3==pe.user.roleId)for(const e of null===o||void 0===o?void 0:o.data)3==e.roleId&&e.departmentId==pe.user.departmentId&&(l="Senior Engineer ".concat(e.department),t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(l," ")})),4==e.roleId&&e.departmentId==pe.user.departmentId&&(l="Junior ".concat(e.department),t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(l," ")})),5==e.roleId&&e.departmentId==pe.user.departmentId&&(l="Designer/Draughtsmen",t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(l," ")}));console.log("option",t),Oe(t),We(n)}catch(o){console.error("Error fetching Users:",null===o||void 0===o?void 0:o.message)}})(),ro()}),[Qe]),(0,n.useEffect)((()=>{ge(go)}),[go]);const xo=async(e,o)=>{try{console.log(e,"employees"),console.log("aaaa",o.title);ie.find((e=>(null===e||void 0===e?void 0:e.value)==G)),se.find((e=>(null===e||void 0===e?void 0:e.value)==V)),await v().put("http://127.0.0.1:8083/api/documents/?assignedTo=".concat(e,"&assignedBy=").concat(pe.user.roleId,"&assignedFrom=").concat(pe.user.id,"&companyId=").concat(pe.user.companyId,"&docName=").concat(o.title),{},{headers:{Authorization:null===pe||void 0===pe?void 0:pe.accessToken}});p(!1),ro()}catch(t){console.error("Error assigning documents:",t)}};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(k.A,{title:"Change Status",width:400,centered:!0,visible:uo,onCancel:ho,footer:null,closeIcon:(0,h.jsx)(P.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,h.jsx)(N.A,{justify:"space-between",align:"center",children:(0,h.jsx)(w.A,{span:20,children:(0,h.jsxs)(b.A,{layout:"vertical",name:"basic",children:[(0,h.jsx)(b.A.Item,{label:"Select Status",name:"selectedStatus",rules:[{required:!0,message:"Please select a status"}],children:(0,h.jsx)(D.A,{options:[{label:"In-Progress",value:"in-progress"},{label:"Hold",value:"hold"},{label:"Pending Review (In-House)",value:"pending-review-in-house"},{label:"Pending Approval (In-House)",value:"pending-approval-in-house"},{label:"Reviewed (In-House)",value:"reviewed-in-house"},{label:"Approved (In-House)",value:"approved-in-house"},{label:"Pending Review (Client)",value:"pending-review-client"},{label:"Pending Endorsement (Client)",value:"pending-endorsement-client"},{label:"Endorsed (Client)",value:"endorsed-client"},{label:"Document Ready to Publish",value:"ready-to-publish"}],value:po,onChange:e=>vo(e)})}),(0,h.jsxs)(N.A,{children:[(0,h.jsx)(w.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,h.jsx)(I.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(()=>{if(g){const e={...g,status:po},o=he.map((o=>o.id===g.id?e:o));console.log(g),(0,l.iu)(g.id,{status:po});const t=(0,l.Ze)(g.id);console.log("status",t),fo(o),ho()}})(),children:"Submit"})}),(0,h.jsx)(w.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,h.jsx)(I.A,{block:!0,onClick:ho,children:"Cancel"})})]})]})})})}),(0,h.jsxs)(k.A,{title:"Delete Project",width:416,centered:!0,visible:Le,onCancel:to,footer:null,closeIcon:(0,h.jsx)(P.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:[(0,h.jsx)("div",{children:(0,h.jsx)("p",{children:"Are you sure you want to delete this?"})}),(0,h.jsxs)(N.A,{children:[(0,h.jsx)(w.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,h.jsx)(I.A,{block:!0,type:"primary",danger:!0,onClick:()=>(async e=>{const o=e.id;console.log(o);const t=await v().delete("http://127.0.0.1:8083/api/users?delete=5&recordId=".concat(e.id),{headers:{Authorization:null===pe||void 0===pe?void 0:pe.accessToken}});x.Ay.success(t.data.message),to(),ro()})(Je),children:"Delete"})}),(0,h.jsx)(w.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,h.jsx)(I.A,{block:!0,onClick:to,children:"Cancel"})})]})]}),(0,h.jsx)(k.A,{title:"Assign Document",width:400,centered:!0,visible:m,onCancel:()=>{p(!1)},footer:null,closeIcon:(0,h.jsx)(P.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,h.jsx)(N.A,{justify:"space-between",align:"center",children:(0,h.jsx)(w.A,{span:20,children:(0,h.jsxs)(b.A,{form:Ye,onFinish:()=>{Ye.validateFields().then((e=>{xo(He,Qe),Ye.resetFields()}))},layout:"vertical",name:"basic",children:[(0,h.jsx)(b.A.Item,{label:"Assign Document to",name:"assignDoc",rules:[{required:!0,message:"Please Assign Document"}],children:(0,h.jsx)(T.A.Group,{options:Fe,value:He,onChange:e=>Be(e)})}),(0,h.jsx)(N.A,{children:(0,h.jsx)(w.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,h.jsx)(I.A,{block:!0,type:"primary",htmlType:"submit",children:"Assign"})})})]})})})}),(0,h.jsx)(k.A,{title:"Upload Document",width:1e3,centered:!0,visible:H,onCancel:so,footer:null,closeIcon:(0,h.jsx)(P.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,h.jsxs)(N.A,{justify:"space-between",align:"center",children:[(0,h.jsx)(w.A,{span:15,children:(0,h.jsx)(q(),{style:{height:"300px"},theme:"snow",value:ne,onChange:le})}),(0,h.jsx)(w.A,{span:7,children:(0,h.jsxs)(b.A,{layout:"vertical",name:"basic",form:$e,onFinish:()=>{$e.validateFields().then((e=>{co(),$e.resetFields()}))},children:[(0,h.jsx)(b.A.Item,{label:"Document Title",name:"docTitle",rules:[{required:!0,message:"Please input your title"}],children:(0,h.jsx)(j.A,{value:Q,onChange:e=>_(e.target.value)})}),(0,h.jsx)(b.A.Item,{label:"Project Code",name:"projectCode",rules:[{required:!0,message:"Please select Project Code"}],children:(0,h.jsx)(D.A,{options:ie,value:Ae,onChange:e=>{je(e),(async e=>{try{var o;const t=await v().get("http://127.0.0.1:8083/api/documents/mdr?companyId=".concat(null===pe||void 0===pe||null===(o=pe.user)||void 0===o?void 0:o.companyId),{headers:{Authorization:null===pe||void 0===pe?void 0:pe.accessToken}}),n=[];for(const o of null===t||void 0===t?void 0:t.data)o.projectCode==e&&n.push({value:null===o||void 0===o?void 0:o.mdrCode,label:null===o||void 0===o?void 0:o.title});me(n)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}})(e)}})}),(0,h.jsx)(b.A.Item,{label:"MDR",name:"mdr",rules:[{required:!0,message:"Please select MDR"}],children:(0,h.jsx)(D.A,{options:ue,value:$,onChange:e=>ee(e)})}),(0,h.jsx)(b.A.Item,{label:"Area Code",name:"areaCode",rules:[{required:!0,message:"Please select Area Code"}],children:(0,h.jsx)(D.A,{options:[{label:"01",value:"01"},{label:"02",value:"02"}],value:Se,onChange:e=>ke(e)})}),(0,h.jsx)(b.A.Item,{label:"Department Suffix",name:"deptSuffix",rules:[{required:!0,message:"Please Add Department Suffix"}],children:(0,h.jsx)(D.A,{options:se,value:Ne,onChange:e=>{we(e),(async e=>{try{const o=R.filter((o=>o.departmentCode===e));if(o.length>0){const e=[];for(const t of o)e.push({value:null===t||void 0===t?void 0:t.documentContentCode,label:"".concat(t.documentTitle," (").concat(t.documentContentCode,")")});return re(e),o.map((e=>e.documentContentCode))}throw new Error("No documents found for the specified department code")}catch(o){console.error("Error fetching document codes:",null===o||void 0===o?void 0:o.message)}})(e)}})}),(0,h.jsx)(b.A.Item,{label:"Document Type",name:"docType",rules:[{required:!0,message:"Please Add Document Type"}],children:(0,h.jsx)(D.A,{options:ce,value:ye,onChange:e=>Ie(e)})}),(0,h.jsx)(b.A.Item,{label:"Count",name:"count",rules:[{required:!0,message:"Please input the count"},{type:"number",min:1,message:"Count must be at least 1"}],children:(0,h.jsx)(z.A,{min:1,value:be,onChange:e=>Ce(e),style:{width:"100%"}})}),(0,h.jsxs)(N.A,{children:[(0,h.jsx)(w.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,h.jsx)(I.A,{block:!0,type:"primary",htmlType:"submit",children:"Submit"})}),(0,h.jsx)(w.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,h.jsx)(I.A,{block:!0,onClick:so,children:"Cancel"})})]})]})})]})}),(0,h.jsxs)("div",{style:{textAlign:"right",marginBottom:"16px",padding:"15px",gap:"15px"},children:[(0,h.jsx)(I.A,{type:"primary",onClick:()=>{M(!0)},style:{marginRight:"10px"},disabled:3==(null===pe||void 0===pe||null===(o=pe.user)||void 0===o?void 0:o.roleId),children:"Add Documents"}),(0,h.jsx)(I.A,{type:"primary",onClick:()=>{console.log("clicked"),Pe(!0)},onDoubleClick:()=>{Pe(!1)},children:"Document Tree"})]}),Re?(0,h.jsx)(f,{}):(0,h.jsx)("div",{style:{overflowX:"auto"},children:(0,h.jsx)(E.A,{columns:eo,dataSource:he,bordered:!0,size:"middle",title:()=>"All Documents Information",footer:()=>"You may filter Documents"})}),(0,h.jsx)(F.A,{})]})}},46797:(e,o,t)=>{t.d(o,{Ze:()=>l,iu:()=>n});const n=(e,o)=>{const t={...l(e)||{},...o};document.cookie="".concat(e,"=").concat(JSON.stringify(t),"; expires=Fri, 31 Dec 9999 23:59:59 GMT")},l=e=>{const o=document.cookie.split("; ").find((o=>o.startsWith("".concat(e,"="))));return o?JSON.parse(o.split("=")[1]):null}}}]);
//# sourceMappingURL=5445.ffe29da1.chunk.js.map