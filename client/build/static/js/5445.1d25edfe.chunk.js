"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[5445],{23415:(e,o,t)=>{t.d(o,{A:()=>s});t(14556);var l=t(91688),n=t(70579);const s=()=>{var e;const o=null===(e=localStorage)||void 0===e?void 0:e.getItem("user");return console.log(o,"loggin"),o?null:(0,n.jsx)(l.Redirect,{to:"/pages/authentication/login"})}},85445:(e,o,t)=>{t.r(o),t.d(o,{default:()=>L});var l=t(65043),n=t(46797),s=t(91688),i=t(87942),a=t(62946),d=t(81551),r=t(99380),c=t(39244),u=t(63713),m=t(86748),v=t(40854),p=t.n(v),h=t(15627),g=t(70579);const f=(0,d.A)({root:{flexGrow:7,maxWidth:1300},projectNode:{backgroundColor:"#ffffff",fontSize:"30px",padding:"15px",borderRadius:"9px",marginBottom:"15px",transition:"background-color 0.2s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},mdrNode:{backgroundColor:"#ffffff",fontSize:"24px",padding:"15px",borderRadius:"9px",marginLeft:"16px",marginBottom:"12px",transition:"background-color 0.3s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},departmentIdNode:{backgroundColor:"#ffffff",fontSize:"20px",padding:"15px",borderRadius:"9px",marginLeft:"16px",marginBottom:"12px",transition:"background-color 0.3s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},titleNode:{backgroundColor:"#ffffff",fontSize:"20px",padding:"8px",borderRadius:"4px",marginLeft:"16px",transition:"background-color 0.3s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},icon:{marginRight:"8px",fontWeight:"bold"},buttonContainer:{display:"flex",alignItems:"center",marginTop:"8px",padding:"6px"},status:{marginRight:"12px",fontSize:"14px",fontWeight:"bold"}}),x=()=>{var e,o;const[t,n]=(0,l.useState)(),[s]=(0,l.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[d,v]=(0,l.useState)({});console.log("user",s),(0,l.useEffect)((()=>{let e=!0;return(async()=>{try{var o;const t=await p().get(`https://novacon.live/api/projects/information?companyId=${null===s||void 0===s||null===(o=s.user)||void 0===o?void 0:o.companyId}`,{headers:{Authorization:null===s||void 0===s?void 0:s.accessToken}});e&&n(t.data)}catch(t){console.error("Error fetching projects:",null===t||void 0===t?void 0:t.message)}})(),()=>{e=!1}}),[null===s||void 0===s||null===(o=s.user)||void 0===o?void 0:o.companyId]),(0,l.useEffect)((()=>{(()=>{if(!t||0===t.length)return;const e={};console.log(t,"information"),t.forEach((o=>{e[o.title]||(e[o.title]={},console.log(e,"newData1")),o.mdrs.forEach((t=>{var l,n,s,i,a;e[o.title][t.title]||(e[o.title][t.title]={}),console.log(e,"newData2");const d=null!==(l=null===(n=t.departmentName)||void 0===n?void 0:n.split(","))&&void 0!==l?l:[],r=null!==(s=t.documents)&&void 0!==s?s:[],c=null!==(i=null===(a=o.departmentSuffix)||void 0===a?void 0:a.split(","))&&void 0!==i?i:[];d.forEach(((l,n)=>{var s;const i=l.trim(),a=null===(s=c[n])||void 0===s?void 0:s.trim();console.log(i,"trimmedDepartmentName",a,"trimmedSuffix"),console.log(e,"newData"),e[o.title][t.title][i]||(e[o.title][t.title][i]=[]),r.forEach((l=>{const n=l.title.trim();a&&n.includes(a)&&e[o.title][t.title][i].push({title:l.title,docTitle:n,status:l.status,version:l.version})}))}))}))})),console.log(e,"finalNewData"),console.log(e,"newData"),v(e)})()}),[t]);const x=f(),A=async e=>{try{var o;const t=await p().get(`https://novacon.live/api/documents/establishment?companyId=${null===s||void 0===s||null===(o=s.user)||void 0===o?void 0:o.companyId}&userId=${s.user.id}&docName=${e}`,{headers:{Authorization:null===s||void 0===s?void 0:s.accessToken}});return console.log(t.data,"received"),t.data}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}};return(0,g.jsx)("div",{className:x.root,children:(0,g.jsx)(i.A,{defaultCollapseIcon:(0,g.jsx)(c.A,{}),defaultExpandIcon:(0,g.jsx)(c.A,{}),defaultEndIcon:(0,g.jsx)(r.A,{}),children:Object.entries(d).map((e=>{let[o,t]=e;return(0,g.jsx)(a.A,{nodeId:o,label:`Project Title: ${o}`,className:x.projectNode,icon:(0,g.jsx)(c.A,{className:x.icon}),sx:{display:"inline-flex"},children:Object.entries(t).map((e=>{let[t,l]=e;return(0,g.jsx)(a.A,{nodeId:`${o}-${t}`,label:`MDR Title: ${t}`,className:x.mdrNode,icon:(0,g.jsx)(u.A,{className:x.icon}),sx:{display:"inline-flex"},children:Object.entries(l).map((e=>{let[l,n]=e;return(0,g.jsx)(a.A,{nodeId:`${o}-${t}-${l}`,label:`Department Name: ${l}`,className:x.departmentIdNode,icon:(0,g.jsx)(c.A,{className:x.icon}),sx:{display:"inline-flex"},children:n.map(((e,n)=>(0,g.jsx)(a.A,{nodeId:`${o}-${t}-${l}-${n}`,label:`Title: ${e.docTitle} (${e.title})`,className:x.titleNode,icon:(0,g.jsx)(r.A,{className:x.icon}),sx:{display:"inline-flex"},children:(0,g.jsxs)("div",{className:x.buttonContainer,children:[(0,g.jsxs)("span",{className:x.status,children:["Status: ",e.status]}),(0,g.jsx)(m.A,{onClick:()=>(async e=>{console.log("documentsss",e),alert(`Opening document: ${e.docTitle}`);const o=await A(e.docTitle);console.log("helllooo",o);const t=`https://novacon.live/uploads/${e.docTitle}-${e.version}.pdf`;console.log(s.user.roleId,s.user.firstName,s);let l="false";o&&(l="true");try{var n;(await p().get(`https://novacon.live/api/documents/checkDocuments?companyId=${null===s||void 0===s||null===(n=s.user)||void 0===n?void 0:n.companyId}&docName=${e.docTitle}&masterDocumentCode=1472-1&version=${e.version}&roleId=${null===s||void 0===s?void 0:s.user.roleId}`,{headers:{Authorization:null===s||void 0===s?void 0:s.accessToken}})).data.status?(console.log("response.data.status"),window.location.href=`http://127.0.0.1:3001/react-pdf-highlighter/?docName=${record.docName}.pdf&url=${t}&allowed=${l}&user=${s.user.roleId} ${s.user.firstName}`):h.Ay.warning("Document not uploaded yet.")}catch(i){console.error("Error checking document:",i),alert("An error occurred while checking the document.")}})(e),variant:"outlined",color:"primary",size:"10px",children:"Open Document"})]})},`${o}-${t}-${l}-${n}`)))},`${o}-${t}-${l}`)}))},`${o}-${t}`)}))},o)}))})})};var A=t(83557),j=t(60521),y=t(64435),I=t(89421),b=t(94376),$=t(75932),C=t(86904),k=t(21261),S=t(47419),N=t(11645),w=t(79940),D=t(78186),T=t(79539),z=t(43886),E=t(98294),R=t(73754),P=(t(14556),t(23415)),F=t(92823),O=t.n(F),q=(t(25884),t(62058)),W=t(16854),H=t.n(W),B=t(15337),J=t(40862),U=t(45069);function L(){var e,o;A.A,A.A.Item,A.A.Item,A.A.Item,A.A.Item,A.A.Item;const t=()=>{ge(fe)},i=()=>{ge(fe)},a=()=>{ge(fe)},d=()=>{const e=fe.filter((e=>"completed"===e.status));ge(e)},r=()=>{const e=fe.filter((e=>"ongoing"===e.status));ge(e)},c=(e,o,t)=>{o(),Ge(e[0]),Ve(t)},u=e=>({filterDropdown:o=>{let{setSelectedKeys:t,selectedKeys:l,confirm:n,clearFilters:s,close:i}=o;return(0,g.jsxs)("div",{style:{padding:8},children:[(0,g.jsx)(j.A,{ref:Ze,placeholder:`Search ${e}`,value:l[0],onChange:e=>t(e.target.value?[e.target.value]:[]),onPressEnter:()=>c(l,n,e),style:{marginBottom:8,display:"block"}}),(0,g.jsxs)(y.A,{children:[(0,g.jsx)(I.A,{type:"primary",onClick:()=>c(l,n,e),icon:(0,g.jsx)(q.A,{}),size:"small",style:{width:90},children:"Search"}),(0,g.jsx)(I.A,{onClick:()=>s&&(e=>{e(),Ge("")})(s),size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:e=>(0,g.jsx)(q.A,{style:{color:e?"#1677ff":void 0}}),onFilter:(o,t)=>t[e].toString().toLowerCase().includes(o.toLowerCase()),onFilterDropdownOpenChange:e=>{e&&setTimeout((()=>{var e;return null===(e=Ze.current)||void 0===e?void 0:e.select()}),100)},render:o=>Ke===e?(0,g.jsx)(H(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[_e],autoEscape:!0,textToHighlight:o?o.toString():""}):o}),[m,v]=((0,s.useHistory)(),(0,l.useState)(!1)),[f,F]=(0,l.useState)(null),[W,L]=(0,l.useState)(!1),[M,Q]=(0,l.useState)(""),[_,G]=(0,l.useState)(""),[K,V]=(0,l.useState)(""),[Z,X]=(0,l.useState)(""),[Y,ee]=(0,l.useState)(""),[oe,te]=(0,l.useState)(null),[le,ne]=(0,l.useState)(""),[se,ie]=(0,l.useState)([]),[ae,de]=(0,l.useState)([]),[re,ce]=(0,l.useState)([]),[ue,me]=(0,l.useState)([]),[ve,pe]=(0,l.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[he,ge]=(0,l.useState)([]),[fe,xe]=(0,l.useState)([]),[Ae,je]=(0,l.useState)(""),[ye,Ie]=(0,l.useState)(""),[be,$e]=(0,l.useState)(""),[Ce,ke]=(0,l.useState)(""),[Se,Ne]=(0,l.useState)(""),[we,De]=(0,l.useState)([]),[Te,ze]=(0,l.useState)([]),[Ee,Re]=(0,l.useState)(!1),[Pe,Fe]=(0,l.useState)([]),[Oe,qe]=(0,l.useState)(),[We,He]=(0,l.useState)([]),[Be,Je]=(0,l.useState)(null),[Ue,Le]=(0,l.useState)(!1),[Me,Qe]=(0,l.useState)({}),[_e,Ge]=(0,l.useState)(""),[Ke,Ve]=(0,l.useState)(""),Ze=(0,l.useRef)(null),[Xe]=b.A.useForm(),[Ye]=b.A.useForm(),eo=[{title:"Document Code",dataIndex:"masterDocumentId",key:"masterDocumentId",...u("masterDocumentId")},{title:"Document Name",dataIndex:"title",key:"title",...u("title")},{title:"Version",dataIndex:"version",key:"version"},{title:"Status",key:"status",dataIndex:"status",filters:[{text:"Initialized",value:"Initialized"},{text:"Reviewed",value:"Reviewed"},{text:"Approved",value:"Approved"},{text:"Completed",value:"Completed"},{text:"Uploaded",value:"Uploaded"}],onFilter:(e,o)=>o.status===e},{title:"Assigned To",dataIndex:"assignedToName",key:"assignedToName",render:(e,o)=>{if(o.assignedToName)return o.assignedToName;const t=o.assignedTo,l=null===t||void 0===t?void 0:t.split(",");return l&&(0,g.jsx)(y.A,{size:"middle",children:l.map(((e,o)=>(0,g.jsx)("span",{children:Oe&&Oe[e]},o)))})}},{title:"Action",key:"action",render:(e,o)=>{var t;return(0,g.jsxs)(y.A,{size:"middle",children:[1!=ve.user.roleId?"Initialized"==o.status||"Reviewers Rejected"==o.status||"Approvers Rejected"==o.status?(0,g.jsxs)(y.A,{size:"middle",children:[(0,g.jsx)("input",{type:"file",onChange:e=>ao(e,o)}),(0,g.jsx)($.A,{title:"Assign Doc",children:(0,g.jsx)(I.A,{size:"middle",icon:(0,g.jsx)(B.A,{}),onClick:()=>lo(o)})})]}):ve.user.id==o.assignedTo?(0,g.jsxs)(y.A,{size:"middle",children:[(0,g.jsx)($.A,{title:"Open",children:(0,g.jsx)(I.A,{size:"middle",icon:(0,g.jsx)(J.A,{}),onClick:()=>no(o)})}),(0,g.jsx)("input",{type:"file",onChange:e=>ao(e,o)})]}):(0,g.jsx)(g.Fragment,{children:(0,g.jsx)($.A,{title:"Open",children:(0,g.jsx)(I.A,{size:"middle",icon:(0,g.jsx)(J.A,{}),onClick:()=>no(o)})})}):"Initialized"==o.status?(0,g.jsx)($.A,{title:"Assign Doc",children:(0,g.jsx)(I.A,{size:"middle",icon:(0,g.jsx)(B.A,{}),onClick:()=>lo(o)})}):(0,g.jsx)(g.Fragment,{children:(0,g.jsx)($.A,{title:"Open",children:(0,g.jsx)(I.A,{size:"middle",icon:(0,g.jsx)(J.A,{}),onClick:()=>no(o)})})}),(0,g.jsx)($.A,{title:"Delete",children:(0,g.jsx)(I.A,{size:"middle",icon:(0,g.jsx)(U.A,{}),disabled:1!==(null===ve||void 0===ve||null===(t=ve.user)||void 0===t?void 0:t.roleId),onClick:()=>oo(o)})})]})}}],oo=e=>{Je(e),Le(!0)},to=()=>{Le(!1)},lo=async e=>{console.log(Pe,"Options"),console.log("recorddddd",e),Qe(e),console.log("hellloooo",Me),v(!0)},no=async e=>{const o=await io(e.title);console.log("helllooo",o);const t=`https://novacon.live/uploads/${e.title}-${e.version}.pdf`;console.log(ve.user.roleId,ve.user.firstName,ve);let l="false";o&&(l="true");try{var n;(await p().get(`https://novacon.live/api/documents/checkDocuments?companyId=${null===ve||void 0===ve||null===(n=ve.user)||void 0===n?void 0:n.companyId}&docName=${e.title}&masterDocumentCode=${e.masterDocumentId}&version=${e.version}&roleId=${null===ve||void 0===ve?void 0:ve.user.roleId}`,{headers:{Authorization:null===ve||void 0===ve?void 0:ve.accessToken}})).data.status?(console.log("response.data.status"),window.location.href=`http://127.0.0.1:3001/react-pdf-highlighter/?docName=${e.docName}.pdf&url=${t}&allowed=${l}&user=${ve.user.roleId} ${ve.user.firstName}`):h.Ay.warning("Document not uploaded yet.")}catch(s){console.error("Error checking document:",s),alert("An error occurred while checking the document.")}},so=()=>{ee(""),Q(""),X(""),G(""),V(""),ne(""),L(!1)},io=async e=>{try{var o;const t=await p().get(`https://novacon.live/api/documents/establishment?companyId=${null===ve||void 0===ve||null===(o=ve.user)||void 0===o?void 0:o.companyId}&userId=${ve.user.id}&docName=${e}`,{headers:{Authorization:null===ve||void 0===ve?void 0:ve.accessToken}});return console.log(t.data,"received"),t.data}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}},ao=async(e,o)=>{const t=new FormData,l=e.target.files[0];console.log(o);const n=o.title;if(console.log(o.title,o.version),l.name===`${o.title}-${o.version}.pdf`){var s,i,a,d,r;te(l),console.log(t,"formdata"),console.log("Uploaded file:",l);const e={title:n,companyId:null===ve||void 0===ve||null===(s=ve.user)||void 0===s?void 0:s.companyId,roleId:null===ve||void 0===ve||null===(i=ve.user)||void 0===i?void 0:i.roleId,userId:null===ve||void 0===ve||null===(a=ve.user)||void 0===a?void 0:a.id,userName:`${null===ve||void 0===ve||null===(d=ve.user)||void 0===d?void 0:d.firstName} ${null===ve||void 0===ve||null===(r=ve.user)||void 0===r?void 0:r.lastName}`,file:l};Object.entries(e).forEach((e=>{let[o,l]=e;t.append(o,l)}));try{var c;const e=await p().post("https://novacon.live/api/documents/upload",t,{headers:{Authorization:null===ve||void 0===ve?void 0:ve.accessToken}});console.log(e),h.Ay.success(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.message)}catch(u){h.Ay.error(u)}}else h.Ay.error("File name does not match "+o.title),e.target.value=null},ro=async()=>{if(M&&Y&&Ae&&Ce&&ye&&Se)try{var e,o,t,l,n,s;const i=await p().post("https://novacon.live/api/documents/addingDoc",{title:M,masterDocumentCode:Y,projectCode:Ae,areaCode:Ce,docType:ye,deptSuffix:Se,companyId:null===ve||void 0===ve||null===(e=ve.user)||void 0===e?void 0:e.companyId,roleId:null===ve||void 0===ve||null===(o=ve.user)||void 0===o?void 0:o.roleId,userId:null===ve||void 0===ve||null===(t=ve.user)||void 0===t?void 0:t.id,userName:`${null===ve||void 0===ve||null===(l=ve.user)||void 0===l?void 0:l.firstName} ${null===ve||void 0===ve||null===(n=ve.user)||void 0===n?void 0:n.lastName}`,count:be},{headers:{Authorization:null===ve||void 0===ve?void 0:ve.accessToken}});console.log(i,"responses"),h.Ay.success(null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message),await co(),so()}catch(i){"Request failed with status code 403"==(null===i||void 0===i?void 0:i.message)&&h.Ay.error("Permission Denied to create document on this MDR")}else C.A.error({message:"Validation Error",description:"Please fill in all required fields.",style:{backgroundColor:"#f5222d",color:"#fff"}})},co=async()=>{try{var e;const o=await p().get(`https://novacon.live/api/documents?companyId=${null===ve||void 0===ve||null===(e=ve.user)||void 0===e?void 0:e.companyId}&assignedBy=${ve.user.roleId}&userId=${ve.user.id}&department=${ve.user.departmentId}`,{headers:{Authorization:null===ve||void 0===ve?void 0:ve.accessToken}});console.log(o.data,"received");const t=o.data;console.log(t,"dat");const l=t.filter((e=>0==e.removed));console.log(l,"filter"),xe([...l]),ge([...l])}catch(o){console.error("Error fetching documents:",null===o||void 0===o?void 0:o.message)}},[uo,mo]=(0,l.useState)(!1),[vo,po]=(0,l.useState)(""),ho=()=>{po(""),mo(!1)},[go,fo]=(0,l.useState)([]);(0,l.useEffect)((()=>{var e;pe(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),(async()=>{try{var e;const o=await p().get(`https://novacon.live/api/departments?companyId=${null===ve||void 0===ve||null===(e=ve.user)||void 0===e?void 0:e.companyId}`,{headers:{Authorization:null===ve||void 0===ve?void 0:ve.accessToken}});De(o.data);const t=[];for(const e of null===o||void 0===o?void 0:o.data)t.push({value:null===e||void 0===e?void 0:e.suffix,label:null===e||void 0===e?void 0:e.suffix});ie(t)}catch(o){console.error("Error fetching departments:",null===o||void 0===o?void 0:o.message)}})(),(async()=>{try{var e;const o=await p().get(`https://novacon.live/api/projects?companyId=${null===ve||void 0===ve||null===(e=ve.user)||void 0===e?void 0:e.companyId}`,{headers:{Authorization:null===ve||void 0===ve?void 0:ve.accessToken}});ze(o.data);const t=[];for(const e of null===o||void 0===o?void 0:o.data)t.push({value:null===e||void 0===e?void 0:e.code,label:null===e||void 0===e?void 0:e.code});de(t)}catch(o){console.error("Error fetching departments:",null===o||void 0===o?void 0:o.message)}})(),(async()=>{try{var e;const o=await p().get(`https://novacon.live/api/users?companyId=${null===ve||void 0===ve||null===(e=ve.user)||void 0===e?void 0:e.companyId}&roleId=2`,{headers:{Authorization:null===ve||void 0===ve?void 0:ve.accessToken}});console.log(null===o||void 0===o?void 0:o.data,"Users");const t=[];let l={},n="";if(console.log("uuuu",null===ve||void 0===ve?void 0:ve.user.roleId,null===ve||void 0===ve?void 0:ve.user.companyId,null===ve||void 0===ve?void 0:ve.user.id),1==ve.user.roleId)for(const e of null===o||void 0===o?void 0:o.data)console.log(Me,Me.departmentId,e.departmentId,"data"),l[e.id]=`${e.firstName}`,2==e.roleId&&(n=`Head of ${e.department}`,t.push({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.firstName} ${n} `}));if(2==ve.user.roleId)for(const e of null===o||void 0===o?void 0:o.data)3==e.roleId&&e.departmentId==ve.user.departmentId&&(n=`Senior Engineer ${e.department}`,t.push({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.firstName} ${n} `}));if(3==ve.user.roleId)for(const e of null===o||void 0===o?void 0:o.data)3==e.roleId&&e.departmentId==ve.user.departmentId&&(n=`Senior Engineer ${e.department}`,t.push({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.firstName} ${n} `})),4==e.roleId&&e.departmentId==ve.user.departmentId&&(n=`Junior ${e.department}`,t.push({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.firstName} ${n} `})),5==e.roleId&&e.departmentId==ve.user.departmentId&&(n="Designer/Draughtsmen",t.push({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.firstName} ${n} `}));console.log("option",t),Fe(t),qe(l)}catch(o){console.error("Error fetching Users:",null===o||void 0===o?void 0:o.message)}})(),co()}),[Me]),(0,l.useEffect)((()=>{ge(go)}),[go]);const xo=async(e,o)=>{try{console.log(e,"employees"),console.log("aaaa",o.title);ae.find((e=>(null===e||void 0===e?void 0:e.value)==_)),se.find((e=>(null===e||void 0===e?void 0:e.value)==K)),await p().put(`https://novacon.live/api/documents/?assignedTo=${e}&assignedBy=${ve.user.roleId}&assignedFrom=${ve.user.id}&companyId=${ve.user.companyId}&docName=${o.title}`,{},{headers:{Authorization:null===ve||void 0===ve?void 0:ve.accessToken}});v(!1),co()}catch(t){console.error("Error assigning documents:",t)}};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(k.A,{title:"Change Status",width:400,centered:!0,visible:uo,onCancel:ho,footer:null,closeIcon:(0,g.jsx)(R.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,g.jsx)(S.A,{justify:"space-between",align:"center",children:(0,g.jsx)(N.A,{span:20,children:(0,g.jsxs)(b.A,{layout:"vertical",name:"basic",children:[(0,g.jsx)(b.A.Item,{label:"Select Status",name:"selectedStatus",rules:[{required:!0,message:"Please select a status"}],children:(0,g.jsx)(w.A,{options:[{label:"In-Progress",value:"in-progress"},{label:"Hold",value:"hold"},{label:"Pending Review (In-House)",value:"pending-review-in-house"},{label:"Pending Approval (In-House)",value:"pending-approval-in-house"},{label:"Reviewed (In-House)",value:"reviewed-in-house"},{label:"Approved (In-House)",value:"approved-in-house"},{label:"Pending Review (Client)",value:"pending-review-client"},{label:"Pending Endorsement (Client)",value:"pending-endorsement-client"},{label:"Endorsed (Client)",value:"endorsed-client"},{label:"Document Ready to Publish",value:"ready-to-publish"}],value:vo,onChange:e=>po(e)})}),(0,g.jsxs)(S.A,{children:[(0,g.jsx)(N.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,g.jsx)(I.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(()=>{if(f){const e={...f,status:vo},o=he.map((o=>o.id===f.id?e:o));console.log(f),(0,n.iu)(f.id,{status:vo});const t=(0,n.Ze)(f.id);console.log("status",t),fo(o),ho()}})(),children:"Submit"})}),(0,g.jsx)(N.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,g.jsx)(I.A,{block:!0,onClick:ho,children:"Cancel"})})]})]})})})}),(0,g.jsxs)(k.A,{title:"Delete Project",width:416,centered:!0,visible:Ue,onCancel:to,footer:null,closeIcon:(0,g.jsx)(R.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:[(0,g.jsx)("div",{children:(0,g.jsx)("p",{children:"Are you sure you want to delete this?"})}),(0,g.jsxs)(S.A,{children:[(0,g.jsx)(N.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,g.jsx)(I.A,{block:!0,type:"primary",danger:!0,onClick:()=>(async e=>{const o=e.id;console.log(o);const t=await p().delete(`https://novacon.live/api/users?delete=5&recordId=${e.id}`,{headers:{Authorization:null===ve||void 0===ve?void 0:ve.accessToken}});h.Ay.success(t.data.message),to(),co()})(Be),children:"Delete"})}),(0,g.jsx)(N.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,g.jsx)(I.A,{block:!0,onClick:to,children:"Cancel"})})]})]}),(0,g.jsx)(k.A,{title:"Assign Document",width:400,centered:!0,visible:m,onCancel:()=>{v(!1)},footer:null,closeIcon:(0,g.jsx)(R.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,g.jsx)(S.A,{justify:"space-between",align:"center",children:(0,g.jsx)(N.A,{span:20,children:(0,g.jsxs)(b.A,{form:Xe,onFinish:()=>{Xe.validateFields().then((e=>{xo(We,Me),Xe.resetFields()}))},layout:"vertical",name:"basic",children:[(0,g.jsx)(b.A.Item,{label:"Assign Document to",name:"assignDoc",rules:[{required:!0,message:"Please Assign Document"}],children:(0,g.jsx)(D.A.Group,{options:Pe,value:We,onChange:e=>He(e)})}),(0,g.jsx)(S.A,{children:(0,g.jsx)(N.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,g.jsx)(I.A,{block:!0,type:"primary",htmlType:"submit",children:"Assign"})})})]})})})}),(0,g.jsx)(k.A,{title:"Upload Document",width:1e3,centered:!0,visible:W,onCancel:so,footer:null,closeIcon:(0,g.jsx)(R.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,g.jsxs)(S.A,{justify:"space-between",align:"center",children:[(0,g.jsx)(N.A,{span:15,children:(0,g.jsx)(O(),{style:{height:"300px"},theme:"snow",value:le,onChange:ne})}),(0,g.jsx)(N.A,{span:7,children:(0,g.jsxs)(b.A,{layout:"vertical",name:"basic",form:Ye,onFinish:()=>{Ye.validateFields().then((e=>{ro(),Ye.resetFields()}))},children:[(0,g.jsx)(b.A.Item,{label:"Document Title",name:"docTitle",rules:[{required:!0,message:"Please input your title"}],children:(0,g.jsx)(j.A,{value:M,onChange:e=>Q(e.target.value)})}),(0,g.jsx)(b.A.Item,{label:"Project Code",name:"projectCode",rules:[{required:!0,message:"Please select Project Code"}],children:(0,g.jsx)(w.A,{options:ae,value:Ae,onChange:e=>{je(e),(async e=>{try{var o;const t=await p().get(`https://novacon.live/api/documents/mdr?companyId=${null===ve||void 0===ve||null===(o=ve.user)||void 0===o?void 0:o.companyId}`,{headers:{Authorization:null===ve||void 0===ve?void 0:ve.accessToken}}),l=[];for(const o of null===t||void 0===t?void 0:t.data)o.projectCode==e&&l.push({value:null===o||void 0===o?void 0:o.mdrCode,label:null===o||void 0===o?void 0:o.title});me(l)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}})(e)}})}),(0,g.jsx)(b.A.Item,{label:"MDR",name:"mdr",rules:[{required:!0,message:"Please select MDR"}],children:(0,g.jsx)(w.A,{options:ue,value:Y,onChange:e=>ee(e)})}),(0,g.jsx)(b.A.Item,{label:"Area Code",name:"areaCode",rules:[{required:!0,message:"Please select Area Code"}],children:(0,g.jsx)(w.A,{options:[{label:"01",value:"01"},{label:"02",value:"02"}],value:Ce,onChange:e=>ke(e)})}),(0,g.jsx)(b.A.Item,{label:"Department Suffix",name:"deptSuffix",rules:[{required:!0,message:"Please Add Department Suffix"}],children:(0,g.jsx)(w.A,{options:se,value:Se,onChange:e=>{Ne(e),(async e=>{try{const o=E.filter((o=>o.departmentCode===e));if(o.length>0){const e=[];for(const t of o)e.push({value:null===t||void 0===t?void 0:t.documentContentCode,label:`${t.documentTitle} (${t.documentContentCode})`});return ce(e),o.map((e=>e.documentContentCode))}throw new Error("No documents found for the specified department code")}catch(o){console.error("Error fetching document codes:",null===o||void 0===o?void 0:o.message)}})(e)}})}),(0,g.jsx)(b.A.Item,{label:"Document Type",name:"docType",rules:[{required:!0,message:"Please Add Document Type"}],children:(0,g.jsx)(w.A,{options:re,value:ye,onChange:e=>Ie(e)})}),(0,g.jsx)(b.A.Item,{label:"Count",name:"count",rules:[{required:!0,message:"Please input the count"},{type:"number",min:1,message:"Count must be at least 1"}],children:(0,g.jsx)(T.A,{min:1,value:be,onChange:e=>$e(e),style:{width:"100%"}})}),(0,g.jsxs)(S.A,{children:[(0,g.jsx)(N.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,g.jsx)(I.A,{block:!0,type:"primary",htmlType:"submit",children:"Submit"})}),(0,g.jsx)(N.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,g.jsx)(I.A,{block:!0,onClick:so,children:"Cancel"})})]})]})})]})}),(0,g.jsxs)("div",{style:{textAlign:"right",marginBottom:"16px",padding:"15px",gap:"15px"},children:[(0,g.jsx)(I.A,{type:"primary",onClick:()=>{L(!0)},style:{marginRight:"10px"},disabled:3==(null===ve||void 0===ve||null===(o=ve.user)||void 0===o?void 0:o.roleId),children:"Add Documents"}),(0,g.jsx)(I.A,{type:"primary",onClick:()=>{console.log("clicked"),Re(!0)},onDoubleClick:()=>{Re(!1)},children:"Document Tree"})]}),Ee?(0,g.jsx)(x,{}):(0,g.jsx)("div",{style:{overflowX:"auto"},children:(0,g.jsx)(z.A,{columns:eo,dataSource:he,bordered:!0,size:"middle",title:()=>"All Documents Information",footer:()=>"You may filter Documents"})}),(0,g.jsx)(P.A,{})]})}},46797:(e,o,t)=>{t.d(o,{Ze:()=>n,iu:()=>l});const l=(e,o)=>{const t={...n(e)||{},...o};document.cookie=`${e}=${JSON.stringify(t)}; expires=Fri, 31 Dec 9999 23:59:59 GMT`},n=e=>{const o=document.cookie.split("; ").find((o=>o.startsWith(`${e}=`)));return o?JSON.parse(o.split("=")[1]):null}}}]);
//# sourceMappingURL=5445.1d25edfe.chunk.js.map