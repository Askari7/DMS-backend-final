"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[37],{23415:(e,t,l)=>{l.d(t,{A:()=>o});l(14556);var a=l(91688),n=l(70579);const o=()=>{var e;const t=null===(e=localStorage)||void 0===e?void 0:e.getItem("user");return console.log(t,"loggin"),t?null:(0,n.jsx)(a.Redirect,{to:"/pages/authentication/login"})}},86037:(e,t,l)=>{l.r(t),l.d(t,{default:()=>A});var a=l(65043),n=l(64435),o=l(15627),r=l(21261),i=l(47419),s=l(11645),d=l(94376),c=l(62967),u=l(89421),m=l(33733),p=l(26412),v=l(40854),h=l.n(v),x=l(73754),g=l(23415),y=(l(25884),l(70579));function A(){var e,t,l;const v=[{title:"Department Title",dataIndex:"title",key:"title"},{title:"Author Id",dataIndex:"authorId",key:"authorId"},{title:"Author Name",dataIndex:"authorName",key:"authorName"},{title:"No of Users",dataIndex:"noOfUsers",key:"noOfUsers"},{title:"Action",key:"action",render:(e,t)=>{var l;return(0,y.jsxs)(n.A,{size:"middle",children:[(0,y.jsx)("a",{children:"Delete"}),(0,y.jsx)("a",{onClick:()=>j(t),disabled:1!=(null===P||void 0===P||null===(l=P.user)||void 0===l?void 0:l.roleId),children:"Add User"})]})}}],[A,f]=(0,a.useState)([]),j=e=>{console.log("Add user for department:",e.id),D(e.id),(async()=>{try{var e;const t=await h().get("http://127.0.0.1:8083/api/users?companyId=".concat(null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.companyId,"&roleId=2"),{headers:{Authorization:null===P||void 0===P?void 0:P.accessToken}}),l=[];for(const e of null===t||void 0===t?void 0:t.data)l.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.firstName});B(l)}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}})(),J()},[I,b]=(0,a.useState)(!1),[S,k]=(0,a.useState)(!1),[C,z]=(0,a.useState)(null),[N,w]=(0,a.useState)(""),[O,E]=(0,a.useState)(""),[U,D]=(0,a.useState)(""),[P,T]=(0,a.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[q,F]=(0,a.useState)([]),[G,B]=(0,a.useState)([]),[R,_]=(0,a.useState)([]),Q=()=>{w(""),b(!1)},J=()=>{k(!0)},M=()=>{w(""),k(!1)},L=0,W=async()=>{try{var e;const t=await h().get("http://127.0.0.1:8083/api/departments?companyId=".concat(null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===P||void 0===P?void 0:P.accessToken}});console.log(t.data),_(t.data)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}};return(0,a.useEffect)((()=>{var e;T(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),W()}),[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.A,{title:"Add Department",width:400,centered:!0,visible:I,onCancel:Q,footer:null,closeIcon:(0,y.jsx)(x.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,y.jsx)(i.A,{justify:"space-between",align:"center",children:(0,y.jsx)(s.A,{span:20,children:(0,y.jsxs)(d.A,{layout:"vertical",name:"basic",children:[(0,y.jsx)(d.A.Item,{label:"Department Title",name:"title",rules:[{required:!0,message:"Please input your title"}],children:(0,y.jsx)(c.A,{value:N,onChange:e=>w(e.target.value)})}),(0,y.jsx)(d.A.Item,{label:"Department Suffix",name:"suffix",rules:[{required:!0,message:"Please input your suffix"}],children:(0,y.jsx)(c.A,{value:N,onChange:e=>E(e.target.value)})}),(0,y.jsxs)(i.A,{children:[(0,y.jsx)(s.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,y.jsx)(u.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{try{var e,t,l,a,n;console.log(P);const r=await h().post("http://127.0.0.1:8083/api/departments/",{title:N,suffix:O,noOfUsers:L,companyId:null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.companyId,authorId:null===P||void 0===P||null===(t=P.user)||void 0===t?void 0:t.id,authorName:"".concat(null===P||void 0===P||null===(l=P.user)||void 0===l?void 0:l.firstName," ").concat(null===P||void 0===P||null===(a=P.user)||void 0===a?void 0:a.lastName)},{headers:{Authorization:null===P||void 0===P?void 0:P.accessToken}});console.log("departments response",r),o.Ay.success(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message),W(),Q()}catch(r){"Request failed with status code 401"==(null===r||void 0===r?void 0:r.message)&&o.Ay.error("Unauthorized"),console.error("Error adding departments:",null===r||void 0===r?void 0:r.message)}})(),disabled:1!=(null===P||void 0===P||null===(t=P.user)||void 0===t?void 0:t.roleId),children:"Submit"})}),(0,y.jsx)(s.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,y.jsx)(u.A,{block:!0,onClick:Q,children:"Cancel"})})]})]})})})}),(0,y.jsx)(r.A,{title:"Add User",width:400,centered:!0,visible:S,onCancel:M,footer:null,closeIcon:(0,y.jsx)(x.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,y.jsx)(i.A,{justify:"space-between",align:"center",children:(0,y.jsx)(s.A,{span:20,children:(0,y.jsxs)(d.A,{layout:"vertical",name:"basic",children:[(0,y.jsx)(d.A.Item,{label:"Select User",name:"selectedUser",rules:[{required:!0,message:"Please select a user"}],children:(0,y.jsx)(m.A,{options:G,value:q,onChange:e=>F(e)})}),(0,y.jsxs)(i.A,{children:[(0,y.jsx)(s.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,y.jsx)(u.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{try{var e,t;console.log(G.find((e=>e.value===q)));const l=await h().post("http://127.0.0.1:8083/api/departments/associate",{title:N,companyId:null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.companyId,userId:q,departmentCreator:0,noOfUsers:L+1,departmentId:U},{headers:{Authorization:null===P||void 0===P?void 0:P.accessToken}});console.log("association response",l),o.Ay.success(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message),W(),Q()}catch(l){"Request failed with status code 401"==(null===l||void 0===l?void 0:l.message)&&o.Ay.error("Unauthorized"),console.error("Error adding departments:",null===l||void 0===l?void 0:l.message)}})(),children:"Submit"})}),(0,y.jsx)(s.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,y.jsx)(u.A,{block:!0,onClick:M,children:"Cancel"})})]})]})})})}),(0,y.jsx)("div",{style:{textAlign:"right",marginBottom:"16px"},children:(0,y.jsx)(u.A,{type:"primary",onClick:()=>{b(!0)},disabled:1!=(null===P||void 0===P||null===(l=P.user)||void 0===l?void 0:l.roleId),children:"Add Department"})}),(0,y.jsx)("div",{style:{overflowX:"auto"},children:(0,y.jsx)(p.A,{columns:v,dataSource:R})}),"      ",(0,y.jsx)(g.A,{})]})}},64435:(e,t,l)=>{l.d(t,{e:()=>v,A:()=>x});var a=l(58168),n=l(64467),o=l(5544),r=l(65043),i=l(98139),s=l.n(i),d=l(62149),c=l(25055);function u(e){var t=e.className,l=e.direction,o=e.index,i=e.marginDirection,s=e.children,d=e.split,c=e.wrap,u=r.useContext(v),m=u.horizontalSize,p=u.verticalSize,h=u.latestIndex,x={};return u.supportFlexGap||("vertical"===l?o<h&&(x={marginBottom:m/(d?2:1)}):x=(0,a.A)((0,a.A)({},o<h&&(0,n.A)({},i,m/(d?2:1))),c&&{paddingBottom:p})),null===s||void 0===s?null:r.createElement(r.Fragment,null,r.createElement("div",{className:t,style:x},s),o<h&&d&&r.createElement("span",{className:"".concat(t,"-split"),style:x},d))}var m=l(46058),p=function(e,t){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(l[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(l[a[n]]=e[a[n]])}return l},v=r.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),h={small:8,middle:16,large:24};const x=function(e){var t,l=r.useContext(c.QO),i=l.getPrefixCls,x=l.space,g=l.direction,y=e.size,A=void 0===y?(null===x||void 0===x?void 0:x.size)||"small":y,f=e.align,j=e.className,I=e.children,b=e.direction,S=void 0===b?"horizontal":b,k=e.prefixCls,C=e.split,z=e.style,N=e.wrap,w=void 0!==N&&N,O=p(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),E=(0,m.A)(),U=r.useMemo((function(){return(Array.isArray(A)?A:[A,A]).map((function(e){return function(e){return"string"===typeof e?h[e]:e||0}(e)}))}),[A]),D=(0,o.A)(U,2),P=D[0],T=D[1],q=(0,d.A)(I,{keepEmpty:!0}),F=void 0===f&&"horizontal"===S?"center":f,G=i("space",k),B=s()(G,"".concat(G,"-").concat(S),(t={},(0,n.A)(t,"".concat(G,"-rtl"),"rtl"===g),(0,n.A)(t,"".concat(G,"-align-").concat(F),F),t),j),R="".concat(G,"-item"),_="rtl"===g?"marginLeft":"marginRight",Q=0,J=q.map((function(e,t){return null!==e&&void 0!==e&&(Q=t),r.createElement(u,{className:R,key:"".concat(R,"-").concat(t),direction:S,index:t,marginDirection:_,split:C,wrap:w},e)})),M=r.useMemo((function(){return{horizontalSize:P,verticalSize:T,latestIndex:Q,supportFlexGap:E}}),[P,T,Q,E]);if(0===q.length)return null;var L={};return w&&(L.flexWrap="wrap",E||(L.marginBottom=-T)),E&&(L.columnGap=P,L.rowGap=T),r.createElement("div",(0,a.A)({className:B,style:(0,a.A)((0,a.A)({},L),z)},O),r.createElement(v.Provider,{value:M},J))}},25884:()=>{}}]);
//# sourceMappingURL=37.65c7e56f.chunk.js.map