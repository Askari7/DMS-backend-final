"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[5445],{23415:(e,o,t)=>{t.d(o,{A:()=>a});t(14556);var n=t(91688),l=t(70579);const a=()=>{var e;const o=null===(e=localStorage)||void 0===e?void 0:e.getItem("user");return console.log(o,"loggin"),o?null:(0,l.jsx)(n.Redirect,{to:"/pages/authentication/login"})}},85445:(e,o,t)=>{t.r(o),t.d(o,{default:()=>W});var n=t(65043),l=t(46797),a=t(91688),s=t(87942),i=t(62946),d=t(81551),c=t(99380),r=t(39244),u=t(63713),p=t(55328),v=t(40854),m=t.n(v),h=(t(4689),t(70579));const f=(0,d.A)({root:{flexGrow:7,maxWidth:1300},projectNode:{backgroundColor:"#ffffff",fontSize:"30px",padding:"15px",borderRadius:"9px",marginBottom:"15px",transition:"background-color 0.2s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},mdrNode:{backgroundColor:"#ffffff",fontSize:"24px",padding:"15px",borderRadius:"9px",marginLeft:"16px",marginBottom:"12px",transition:"background-color 0.3s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},departmentIdNode:{backgroundColor:"#ffffff",fontSize:"20px",padding:"15px",borderRadius:"9px",marginLeft:"16px",marginBottom:"12px",transition:"background-color 0.3s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},titleNode:{backgroundColor:"#ffffff",fontSize:"20px",padding:"8px",borderRadius:"4px",marginLeft:"16px",transition:"background-color 0.3s ease",fontWeight:"bold","&:hover":{backgroundColor:"#ffffff"}},icon:{marginRight:"8px",fontWeight:"bold"},buttonContainer:{display:"flex",alignItems:"center",marginTop:"8px",padding:"12px"},status:{marginRight:"12px",fontSize:"20px",fontWeight:"bold"}}),g=()=>{var e,o;const[t,l]=(0,n.useState)(),[a]=(0,n.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[d,v]=(0,n.useState)({});console.log("user",a),(0,n.useEffect)((()=>{let e=!0;return(async()=>{try{var o;const t=await m().get("http://54.81.250.98:8083/api/projects/information?companyId=".concat(null===a||void 0===a||null===(o=a.user)||void 0===o?void 0:o.companyId),{headers:{Authorization:null===a||void 0===a?void 0:a.accessToken}});e&&l(t.data)}catch(t){console.error("Error fetching projects:",null===t||void 0===t?void 0:t.message)}})(),()=>{e=!1}}),[null===a||void 0===a||null===(o=a.user)||void 0===o?void 0:o.companyId]),(0,n.useEffect)((()=>{(()=>{if(!t||0===t.length)return;const e={};console.log(t,"information"),t.forEach((o=>{var t,n,l,a,s;e[o.projectCode]||(e[o.projectCode]={}),o.mdrCode&&!e[o.projectCode][o.mdrCode]&&(e[o.projectCode][o.mdrCode]={});const i=null!==(t=null===(n=o.departmentName)||void 0===n?void 0:n.split(","))&&void 0!==t?t:[],d=null!==(l=o.documents)&&void 0!==l?l:[],c=null!==(a=null===(s=o.departmentSuffix)||void 0===s?void 0:s.split(","))&&void 0!==a?a:[];i.forEach(((t,n)=>{const l=t.trim(),a=c[n].trim();e[o.projectCode][o.mdrCode][l]||(e[o.projectCode][o.mdrCode][l]=[]),d.forEach((t=>{const n=t.title.trim();n.includes(a)&&e[o.projectCode][o.mdrCode][l].push({title:t.docTitle,docTitle:n,status:t.status,version:t.version})}))}))})),console.log(e,"newData"),v(e)})()}),[t]);const g=f(),x=async e=>{try{var o;const t=await m().get("http://54.81.250.98:8083/api/documents/establishment?companyId=".concat(null===a||void 0===a||null===(o=a.user)||void 0===o?void 0:o.companyId,"&userId=").concat(a.user.id,"&docName=").concat(e),{headers:{Authorization:null===a||void 0===a?void 0:a.accessToken}});return console.log(t.data,"received"),t.data}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}};return(0,h.jsx)("div",{className:g.root,children:(0,h.jsx)(s.A,{defaultCollapseIcon:(0,h.jsx)(r.A,{}),defaultExpandIcon:(0,h.jsx)(r.A,{}),defaultEndIcon:(0,h.jsx)(c.A,{}),children:Object.entries(d).map((e=>{let[o,t]=e;return(0,h.jsx)(i.A,{nodeId:o,label:"Project ID: ".concat(o),className:g.projectNode,icon:(0,h.jsx)(r.A,{className:g.icon}),sx:{display:"inline-flex"},children:Object.entries(t).map((e=>{let[t,n]=e;return(0,h.jsx)(i.A,{nodeId:"".concat(o,"-").concat(t),label:"MDR: ".concat(t),className:g.mdrNode,icon:(0,h.jsx)(u.A,{className:g.icon}),sx:{display:"inline-flex"},children:Object.entries(n).map((e=>{let[n,l]=e;return(0,h.jsx)(i.A,{nodeId:"".concat(o,"-").concat(t,"-").concat(n),label:"Department Name: ".concat(n),className:g.departmentIdNode,icon:(0,h.jsx)(r.A,{className:g.icon}),sx:{display:"inline-flex"},children:l.map(((e,l)=>(0,h.jsx)(i.A,{nodeId:"".concat(o,"-").concat(t,"-").concat(n,"-").concat(l),label:"Title: ".concat(e.docTitle," (").concat(e.title,")"),className:g.titleNode,icon:(0,h.jsx)(c.A,{className:g.icon}),sx:{display:"inline-flex"},children:(0,h.jsxs)("div",{className:g.buttonContainer,children:[(0,h.jsxs)("span",{className:g.status,children:["Status: ",e.status]}),(0,h.jsx)(p.A,{onClick:()=>(async e=>{console.log("documentsss",e),alert("Opening document: ".concat(e.docTitle));const o=await x(e.docTitle);console.log("helllooo",o);const t=e.docTitle,n="".concat("http://54.81.250.98:8083","/uploads/").concat(t,"-").concat(e.version,".pdf");console.log(a.user.roleId,a.user.firstName,a);let l="false";o&&(l="true"),window.location.href="http://54.81.250.98:3001/react-pdf-highlighter/?docName=".concat(t,".pdf&url=").concat(n,"&allowed=").concat(l,"&user=").concat(a.user.roleId," ").concat(a.user.firstName)})(e),variant:"outlined",color:"primary",children:"Open Document"})]})},"".concat(o,"-").concat(t,"-").concat(n,"-").concat(l))))},"".concat(o,"-").concat(t,"-").concat(n))}))},"".concat(o,"-").concat(t))}))},o)}))})})};var x=t(15627),j=t(83557),I=t(60521),y=t(64435),A=t(89421),b=t(86904),C=t(21261),S=t(47419),k=t(11645),N=t(94376),w=t(70610),D=t(78186),T=t(26412),z=t(22285),E=(t(14556),t(23415)),R=t(92823),P=t.n(R),O=(t(25884),t(62058)),F=t(16854),q=t.n(F);function W(){var e,o,t;j.A,j.A.Item,j.A.Item,j.A.Item,j.A.Item,j.A.Item;const s=()=>{re(ue)},i=()=>{re(ue)},d=()=>{re(ue)},c=()=>{const e=ue.filter((e=>"completed"===e.status));re(e)},r=()=>{const e=ue.filter((e=>"ongoing"===e.status));re(e)},u=(e,o,t)=>{o(),Ee(e[0]),Pe(t)},p=e=>({filterDropdown:o=>{let{setSelectedKeys:t,selectedKeys:n,confirm:l,clearFilters:a,close:s}=o;return(0,h.jsxs)("div",{style:{padding:8},children:[(0,h.jsx)(I.A,{ref:Oe,placeholder:"Search ".concat(e),value:n[0],onChange:e=>t(e.target.value?[e.target.value]:[]),onPressEnter:()=>u(n,l,e),style:{marginBottom:8,display:"block"}}),(0,h.jsxs)(y.A,{children:[(0,h.jsx)(A.A,{type:"primary",onClick:()=>u(n,l,e),icon:(0,h.jsx)(O.A,{}),size:"small",style:{width:90},children:"Search"}),(0,h.jsx)(A.A,{onClick:()=>a&&(e=>{e(),Ee("")})(a),size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:e=>(0,h.jsx)(O.A,{style:{color:e?"#1677ff":void 0}}),onFilter:(o,t)=>t[e].toString().toLowerCase().includes(o.toLowerCase()),onFilterDropdownOpenChange:e=>{e&&setTimeout((()=>{var e;return null===(e=Oe.current)||void 0===e?void 0:e.select()}),100)},render:o=>Re===e?(0,h.jsx)(q(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[ze],autoEscape:!0,textToHighlight:o?o.toString():""}):o}),v=((0,a.useHistory)(),[{title:"Mdr Code",dataIndex:"masterDocumentId",key:"masterDocumentId",...p("masterDocumentId")},{title:"Document Name",dataIndex:"title",key:"title",...p("title")},{title:"Version",dataIndex:"version",key:"version"},{title:"Status",key:"status",dataIndex:"status",filters:[{text:"Initialized",value:"Initialized"},{text:"Reviewed",value:"Reviewed"},{text:"Approved",value:"Approved"},{text:"Completed",value:"Completed"},{text:"Uploaded",value:"Uploaded"}],onFilter:(e,o)=>o.status===e},{title:"Assigned To",dataIndex:"assignedTo",key:"assignedTo"},{title:"Action",key:"action",render:(e,o)=>(0,h.jsx)(y.A,{size:"middle",children:1!=ie.user.roleId?"Initialized"==o.status||"Reviewers Rejected"==o.status||"Approvers Rejected"==o.status?(0,h.jsxs)(y.A,{size:"middle",children:[(0,h.jsx)("input",{type:"file",onChange:e=>Be(e,o)}),(0,h.jsx)("a",{onClick:()=>Fe(o),children:"Assign Document"})]}):ie.user.id==o.assignedTo?(0,h.jsxs)(y.A,{size:"middle",children:[(0,h.jsx)("a",{onClick:()=>qe(o),children:"Open"}),(0,h.jsx)("input",{type:"file",onChange:e=>Be(e,o)})]}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("a",{onClick:()=>qe(o),children:"Open"})}):"Initialized"==o.status?(0,h.jsx)("a",{onClick:()=>Fe(o),children:"Assign Document"}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("a",{onClick:()=>qe(o),children:"Open"})})})}]),[f,R]=(0,n.useState)(!1),[F,W]=(0,n.useState)(null),[H,B]=(0,n.useState)(!1),[U,J]=(0,n.useState)(""),[M,L]=(0,n.useState)(""),[_,G]=(0,n.useState)(""),[Q,K]=(0,n.useState)(""),[V,Z]=(0,n.useState)(""),[X,Y]=(0,n.useState)(null),[$,ee]=(0,n.useState)(""),[oe,te]=(0,n.useState)([]),[ne,le]=(0,n.useState)([]),[ae,se]=(0,n.useState)([]),[ie,de]=(0,n.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[ce,re]=(0,n.useState)([]),[ue,pe]=(0,n.useState)([]),[ve,me]=(0,n.useState)(""),[he,fe]=(0,n.useState)(""),[ge,xe]=(0,n.useState)(""),[je,Ie]=(0,n.useState)([]),[ye,Ae]=(0,n.useState)([]),[be,Ce]=(0,n.useState)(!1),[Se,ke]=(0,n.useState)([]),[Ne,we]=(0,n.useState)([]),[De,Te]=(0,n.useState)({}),[ze,Ee]=(0,n.useState)(""),[Re,Pe]=(0,n.useState)(""),Oe=(0,n.useRef)(null),Fe=async e=>{console.log("recorddddd",e),Te(e),console.log("hellloooo",De),await Ue(),R(!0)},qe=async e=>{const o=await He(e.title);console.log("helllooo",o);const t=e.title,n="".concat("http://54.81.250.98:8083","/uploads/").concat(t,"-").concat(e.version,".pdf");console.log(ie.user.roleId,ie.user.firstName,ie);let l="false";o&&(l="true"),window.location.href="http://54.81.250.98:3001/react-pdf-highlighter/?docName=".concat(t,".pdf&url=").concat(n,"&allowed=").concat(l,"&user=").concat(ie.user.roleId," ").concat(ie.user.firstName)},We=()=>{Z(""),J(""),K(""),L(""),G(""),ee(""),B(!1)},He=async e=>{try{var o;const t=await m().get("http://54.81.250.98:8083/api/documents/establishment?companyId=".concat(null===ie||void 0===ie||null===(o=ie.user)||void 0===o?void 0:o.companyId,"&userId=").concat(ie.user.id,"&docName=").concat(e),{headers:{Authorization:null===ie||void 0===ie?void 0:ie.accessToken}});return console.log(t.data,"received"),t.data}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}},Be=async(e,o)=>{const t=new FormData,n=e.target.files[0];console.log(o);const l=o.title;if(console.log(o.title,o.version),n.name==="".concat(o.title,"-").concat(o.version,".pdf")){var a,s,i,d,c;Y(n),console.log(t,"formdata"),console.log("Uploaded file:",n);const e={title:l,companyId:null===ie||void 0===ie||null===(a=ie.user)||void 0===a?void 0:a.companyId,roleId:null===ie||void 0===ie||null===(s=ie.user)||void 0===s?void 0:s.roleId,userId:null===ie||void 0===ie||null===(i=ie.user)||void 0===i?void 0:i.id,userName:"".concat(null===ie||void 0===ie||null===(d=ie.user)||void 0===d?void 0:d.firstName," ").concat(null===ie||void 0===ie||null===(c=ie.user)||void 0===c?void 0:c.lastName),file:n};Object.entries(e).forEach((e=>{let[o,n]=e;t.append(o,n)}));try{var r;const e=await m().post("http://54.81.250.98:8083/api/documents/upload",t,{headers:{Authorization:null===ie||void 0===ie?void 0:ie.accessToken}});console.log(e),x.Ay.success(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)}catch(u){x.Ay.error(u)}}else x.Ay.error("File name does not match "+o.title),e.target.value=null},Ue=async()=>{try{var e;const o=await m().get("http://54.81.250.98:8083/api/users?companyId=".concat(null===ie||void 0===ie||null===(e=ie.user)||void 0===e?void 0:e.companyId,"&roleId=2"),{headers:{Authorization:null===ie||void 0===ie?void 0:ie.accessToken}});console.log(null===o||void 0===o?void 0:o.data,"Users");const t=[];let n="";if(console.log("uuuu",null===ie||void 0===ie?void 0:ie.user.roleId,null===ie||void 0===ie?void 0:ie.user.companyId,null===ie||void 0===ie?void 0:ie.user.id),1==ie.user.roleId)for(const e of null===o||void 0===o?void 0:o.data)console.log(De,De.departmentId,e.departmentId,"data"),2==e.roleId&&-1!==De.departmentId.indexOf(e.departmentId)&&(n="Head of ".concat(e.department),t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(n," ")}));if(2==ie.user.roleId)for(const e of null===o||void 0===o?void 0:o.data)3==e.roleId&&e.departmentId==ie.user.departmentId&&(n="Senior Engineer ".concat(e.department),t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(n," ")}));if(3==ie.user.roleId)for(const e of null===o||void 0===o?void 0:o.data)3==e.roleId&&e.departmentId==ie.user.departmentId&&(n="Senior Engineer ".concat(e.department),t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(n," ")})),4==e.roleId&&e.departmentId==ie.user.departmentId&&(n="Junior ".concat(e.department),t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(n," ")})),5==e.roleId&&e.departmentId==ie.user.departmentId&&(n="Designer/Draughtsmen",t.push({value:null===e||void 0===e?void 0:e.id,label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(n," ")}));console.log("option",t),ke(t)}catch(o){console.error("Error fetching Users:",null===o||void 0===o?void 0:o.message)}},Je=async()=>{try{var e;const o=await m().get("http://54.81.250.98:8083/api/documents?companyId=".concat(null===ie||void 0===ie||null===(e=ie.user)||void 0===e?void 0:e.companyId,"&assignedBy=").concat(ie.user.roleId,"&userId=").concat(ie.user.id,"&department=").concat(ie.user.departmentId),{headers:{Authorization:null===ie||void 0===ie?void 0:ie.accessToken}});console.log(o.data,"received");const t=Array.isArray(o.data)?o.data:[];pe([...t]),re([...t])}catch(o){console.error("Error fetching documents:",null===o||void 0===o?void 0:o.message)}},[Me,Le]=(0,n.useState)(!1),[_e,Ge]=(0,n.useState)(""),Qe=()=>{Ge(""),Le(!1)},[Ke,Ve]=(0,n.useState)([]);(0,n.useEffect)((()=>{var e;de(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),(async()=>{try{var e;const o=await m().get("http://54.81.250.98:8083/api/departments?companyId=".concat(null===ie||void 0===ie||null===(e=ie.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===ie||void 0===ie?void 0:ie.accessToken}});Ie(o.data);const t=[];for(const e of null===o||void 0===o?void 0:o.data)t.push({value:null===e||void 0===e?void 0:e.suffix,label:null===e||void 0===e?void 0:e.suffix});te(t)}catch(o){console.error("Error fetching departments:",null===o||void 0===o?void 0:o.message)}})(),(async()=>{try{var e;const o=await m().get("http://54.81.250.98:8083/api/projects?companyId=".concat(null===ie||void 0===ie||null===(e=ie.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===ie||void 0===ie?void 0:ie.accessToken}});Ae(o.data);const t=[];for(const e of null===o||void 0===o?void 0:o.data)t.push({value:null===e||void 0===e?void 0:e.code,label:null===e||void 0===e?void 0:e.code});le(t)}catch(o){console.error("Error fetching departments:",null===o||void 0===o?void 0:o.message)}})(),(async()=>{try{var e;const o=await m().get("http://54.81.250.98:8083/api/documents/mdr?companyId=".concat(null===ie||void 0===ie||null===(e=ie.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===ie||void 0===ie?void 0:ie.accessToken}}),t=[];for(const e of null===o||void 0===o?void 0:o.data)t.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title,projectId:null===e||void 0===e?void 0:e.projectId,departmentId:null===e||void 0===e?void 0:e.departmentId});se(t)}catch(o){console.error("Error fetching departments:",null===o||void 0===o?void 0:o.message)}})(),Je(),Ue()}),[De]),(0,n.useEffect)((()=>{re(Ke)}),[Ke]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(C.A,{title:"Change Status",width:400,centered:!0,visible:Me,onCancel:Qe,footer:null,closeIcon:(0,h.jsx)(z.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,h.jsx)(S.A,{justify:"space-between",align:"center",children:(0,h.jsx)(k.A,{span:20,children:(0,h.jsxs)(N.A,{layout:"vertical",name:"basic",children:[(0,h.jsx)(N.A.Item,{label:"Select Status",name:"selectedStatus",rules:[{required:!0,message:"Please select a status"}],children:(0,h.jsx)(w.A,{options:[{label:"In-Progress",value:"in-progress"},{label:"Hold",value:"hold"},{label:"Pending Review (In-House)",value:"pending-review-in-house"},{label:"Pending Approval (In-House)",value:"pending-approval-in-house"},{label:"Reviewed (In-House)",value:"reviewed-in-house"},{label:"Approved (In-House)",value:"approved-in-house"},{label:"Pending Review (Client)",value:"pending-review-client"},{label:"Pending Endorsement (Client)",value:"pending-endorsement-client"},{label:"Endorsed (Client)",value:"endorsed-client"},{label:"Document Ready to Publish",value:"ready-to-publish"}],value:_e,onChange:e=>Ge(e)})}),(0,h.jsxs)(S.A,{children:[(0,h.jsx)(k.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,h.jsx)(A.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(()=>{if(F){const e={...F,status:_e},o=ce.map((o=>o.id===F.id?e:o));console.log(F),(0,l.iu)(F.id,{status:_e});const t=(0,l.Ze)(F.id);console.log("status",t),Ve(o),Qe()}})(),children:"Submit"})}),(0,h.jsx)(k.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,h.jsx)(A.A,{block:!0,onClick:Qe,children:"Cancel"})})]})]})})})}),(0,h.jsx)(C.A,{title:"Assign Document",width:400,centered:!0,visible:f,onCancel:()=>{R(!1)},footer:null,closeIcon:(0,h.jsx)(z.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,h.jsx)(S.A,{justify:"space-between",align:"center",children:(0,h.jsx)(k.A,{span:20,children:(0,h.jsxs)(N.A,{layout:"vertical",name:"basic",children:[(0,h.jsx)(N.A.Item,{label:"Assign Document to",name:"assignDoc",rules:[{required:!0,message:"Please Assign Document"}],children:(0,h.jsx)(D.A.Group,{options:Se,value:Ne,onChange:e=>we(e)})}),(0,h.jsx)(S.A,{children:(0,h.jsx)(k.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,h.jsx)(A.A,{block:!0,onClick:()=>(async(e,o)=>{try{console.log(e,"employees"),console.log("aaaa",o.title),ne.find((e=>(null===e||void 0===e?void 0:e.value)==M)),oe.find((e=>(null===e||void 0===e?void 0:e.value)==_)),await m().put("http://54.81.250.98:8083/api/documents/?assignedTo=".concat(e,"&assignedBy=").concat(ie.user.roleId,"&assignedFrom=").concat(ie.user.id,"&docName=").concat(o.title),{},{headers:{Authorization:null===ie||void 0===ie?void 0:ie.accessToken}}),R(!1),Je()}catch(t){console.error("Error assigning documents:",t)}})(Ne,De),type:"primary",htmlType:"submit",children:"Assign"})})})]})})})}),(0,h.jsx)(C.A,{title:"Upload Document",width:1e3,centered:!0,visible:H,onCancel:We,footer:null,closeIcon:(0,h.jsx)(z.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,h.jsxs)(S.A,{justify:"space-between",align:"center",children:[(0,h.jsx)(k.A,{span:15,children:(0,h.jsx)(P(),{style:{height:"300px"},theme:"snow",value:$,onChange:ee})}),(0,h.jsx)(k.A,{span:7,children:(0,h.jsxs)(N.A,{layout:"vertical",name:"basic",children:[(0,h.jsx)(N.A.Item,{label:"Document Title",name:"docTitle",rules:[{required:!0,message:"Please input your title"}],children:(0,h.jsx)(I.A,{value:U,onChange:e=>J(e.target.value)})}),(0,h.jsx)(N.A.Item,{label:"MDR",name:"mdr",rules:[{required:!0,message:"Please select MDR"}],children:(0,h.jsx)(w.A,{options:ae,value:V,onChange:e=>Z(e)})}),(0,h.jsx)(N.A.Item,{label:"Project Code",name:"projectCode",rules:[{required:!0,message:"Please select Project Code"}],children:(0,h.jsx)(w.A,{options:ne,value:ve,onChange:e=>me(e)})}),(0,h.jsx)(N.A.Item,{label:"Area Code",name:"areaCode",rules:[{required:!0,message:"Please select Area Code"}],children:(0,h.jsx)(w.A,{options:[{label:"01",value:"01"},{label:"02",value:"02"}],value:he,onChange:e=>fe(e)})}),(0,h.jsx)(N.A.Item,{label:"Department Suffix",name:"deptSuffix",rules:[{required:!0,message:"Please Add Department Suffix"}],children:(0,h.jsx)(w.A,{options:oe,value:ge,onChange:e=>xe(e)})}),(0,h.jsx)(N.A.Item,{label:"Extension",name:"extension",rules:[{required:!0,message:"Please select Extention"}],children:(0,h.jsx)(w.A,{options:[{value:".pdf",label:".pdf"},{value:".docx",label:".docx"}],value:Q,onChange:e=>K(e)})}),(0,h.jsx)("input",{type:"file",onChange:e=>{const o=e.target.files[0];Y(o),console.log("Uploaded file:",o)}}),(0,h.jsxs)(S.A,{children:[(0,h.jsx)(k.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,h.jsx)(A.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{var e,o;if(U&&null!==(e=mdrObj)&&void 0!==e&&e.departmentId&&null!==(o=mdrObj)&&void 0!==o&&o.projectId)try{var t,n,l,a,s,i;const e=new FormData;e.append("file",X);const o=ae.find((e=>(null===e||void 0===e?void 0:e.value)==V));console.log(o,V,ie);const d={title:U,departmentId:null===o||void 0===o?void 0:o.departmentId,projectId:null===o||void 0===o?void 0:o.projectId,masterDocumentId:V,content:$,extension:Q,companyId:null===ie||void 0===ie||null===(t=ie.user)||void 0===t?void 0:t.companyId,roleId:null===ie||void 0===ie||null===(n=ie.user)||void 0===n?void 0:n.roleId,userId:null===ie||void 0===ie||null===(l=ie.user)||void 0===l?void 0:l.id,userName:"".concat(null===ie||void 0===ie||null===(a=ie.user)||void 0===a?void 0:a.firstName," ").concat(null===ie||void 0===ie||null===(s=ie.user)||void 0===s?void 0:s.lastName)};Object.entries(d).forEach((o=>{let[t,n]=o;e.append(t,n)})),console.log(e);const c=await m().post("http://54.81.250.98:8083/api/documents/?projectCode=".concat(ve,"&areaCode=").concat(he,"&deptSuffix=").concat(ge),e,{headers:{Authorization:null===ie||void 0===ie?void 0:ie.accessToken}});console.log(c),x.Ay.success(null===c||void 0===c||null===(i=c.data)||void 0===i?void 0:i.message),await Je(),We()}catch(d){"Request failed with status code 403"==(null===d||void 0===d?void 0:d.message)&&x.Ay.error("Permission Denied to create document on this MDR")}else b.A.error({message:"Validation Error",description:"Please fill in all required fields.",style:{backgroundColor:"#f5222d",color:"#fff"}})})(),children:"Submit"})}),(0,h.jsx)(k.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,h.jsx)(A.A,{block:!0,onClick:We,children:"Cancel"})})]})]})})]})}),(0,h.jsxs)("div",{style:{textAlign:"right",marginBottom:"16px",padding:"15px",gap:"15px"},children:[(0,h.jsx)(A.A,{type:"primary",onClick:()=>{B(!0)},style:{marginRight:"10px"},disabled:3==(null===ie||void 0===ie||null===(o=ie.user)||void 0===o?void 0:o.roleId),children:"Add Documents"}),(0,h.jsx)(A.A,{type:"primary",onClick:()=>{console.log("clicked"),Ce(!0)},disabled:3==(null===ie||void 0===ie||null===(t=ie.user)||void 0===t?void 0:t.roleId),onDoubleClick:()=>{Ce(!1)},children:"Document Tree"})]}),be?(0,h.jsx)(g,{}):(0,h.jsx)("div",{style:{overflowX:"auto"},children:(0,h.jsx)(T.A,{columns:v,dataSource:ce,bordered:!0,size:"middle",title:()=>"All Documents Information",footer:()=>"You may filter Documents"})}),(0,h.jsx)(E.A,{})]})}},46797:(e,o,t)=>{t.d(o,{Ze:()=>l,iu:()=>n});const n=(e,o)=>{const t={...l(e)||{},...o};document.cookie="".concat(e,"=").concat(JSON.stringify(t),"; expires=Fri, 31 Dec 9999 23:59:59 GMT")},l=e=>{const o=document.cookie.split("; ").find((o=>o.startsWith("".concat(e,"="))));return o?JSON.parse(o.split("=")[1]):null}}}]);
//# sourceMappingURL=5445.278a9b79.chunk.js.map