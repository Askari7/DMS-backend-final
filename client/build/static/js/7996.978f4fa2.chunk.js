"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[7996],{17996:(e,n,t)=>{t.r(n),t.d(n,{default:()=>m});var r=t(65043),a=t(70610),l=t(94376),o=t(15627),i=t(60521),s=t(78186),c=t(89421),d=t(91688),u=t(40854),p=t.n(u),v=t(70579);const{Option:h}=a.A,f=e=>{var n;let{onSubmit:t}=e;const[u]=l.A.useForm(),[f,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[x,b]=(0,r.useState)(!1),[A,k]=(0,r.useState)(JSON.parse(null===(n=localStorage)||void 0===n?void 0:n.getItem("user"))),[C,j]=(0,r.useState)([]),[E,I]=(0,r.useState)(""),[O,S]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),F=async()=>{try{var e;console.log(w,"department"),console.log("firstName",E);const n=await p().post("http://54.81.250.98:8083/api/users",{email:f,firstName:E,lastName:O,department:w[0].title,departmentId:w[0].id,roleId:g,companyId:null===A||void 0===A||null===(e=A.user)||void 0===e?void 0:e.companyId},{headers:{Authorization:null===A||void 0===A?void 0:A.accessToken}});console.log(n,"response"),o.Ay.success("Employee created successfully!")}catch(n){console.error("Error adding user:",n)}},D=(0,d.useHistory)();return(0,r.useEffect)((()=>{(async()=>{try{var e;const n=await p().get("http://54.81.250.98:8083/api/departments?companyId=".concat(null===A||void 0===A||null===(e=A.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===A||void 0===A?void 0:A.accessToken}}),t=[];for(const e of null===n||void 0===n?void 0:n.data)t.push({value:{id:null===e||void 0===e?void 0:e.id,title:null===e||void 0===e?void 0:e.title},label:null===e||void 0===e?void 0:e.title});j(t)}catch(n){console.error("Error fetching departments:",null===n||void 0===n?void 0:n.message)}})()}),[]),(0,v.jsxs)(l.A,{form:u,onFinish:()=>{u.validateFields().then((e=>{F(),t(e),u.resetFields()}))},layout:"vertical",children:[(0,v.jsx)("div",{style:{textAlign:"center",marginTop:20},children:(0,v.jsx)("h2",{children:"Add Employees"})}),(0,v.jsx)(l.A.Item,{name:"firstName",label:"First Name",rules:[{required:!0}],children:(0,v.jsx)(i.A,{value:E,onChange:e=>I(e.target.value)})}),(0,v.jsx)(l.A.Item,{name:"lastName",label:"Last Name",rules:[{required:!0}],children:(0,v.jsx)(i.A,{value:O,onChange:e=>S(e.target.value)})}),(0,v.jsx)(l.A.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email"}],children:(0,v.jsx)(i.A,{value:f,onChange:e=>m(e.target.value)})}),(0,v.jsx)(l.A.Item,{name:"designation",label:"Designation",rules:[{required:!0}],children:(0,v.jsxs)(a.A,{onChange:e=>{switch(e){case"Head":y("2");break;case"Senior":y("3");break;case"Junior":y("4");break;case"Designer":y("5");break;default:y("")}},children:[(0,v.jsx)(h,{value:"Head",children:"Head of Dept"}),(0,v.jsx)(h,{value:"Senior",children:"Senior Engineer"}),(0,v.jsx)(h,{value:"Junior",children:"Junior Engineer"}),(0,v.jsx)(h,{value:"Designer",children:"Designer"})]})}),(0,v.jsx)(l.A.Item,{name:"department",label:"Department",rules:[{required:!0}],children:(0,v.jsx)(s.A.Group,{options:C,value:w,onChange:N})}),(0,v.jsx)(l.A.Item,{style:{textAlign:"center"},children:(0,v.jsx)(c.A,{type:"primary",htmlType:"submit",children:"Add Employee"})}),(0,v.jsx)("div",{style:{textAlign:"right",marginTop:20},children:(0,v.jsx)(c.A,{type:"primary",htmlType:"submit",onClick:()=>{D.push("/pages/config_document_number")},children:"Proceed"})}),x&&(0,v.jsx)(MdrTemplate,{})]})};t(91439);const m=()=>{const[e,n]=(0,r.useState)([]);return(0,v.jsx)("div",{style:{display:"flex",textAlign:"center"},children:(0,v.jsx)("div",{style:{flex:1,marginRight:"20px"},children:(0,v.jsx)(f,{onSubmit:t=>{if(t.id=e.length+1,"Head"===t.designation)t.managerId=null;else if("Senior"===t.designation){const n=e.find((e=>"Head"===e.designation&&e.department===t.department));t.managerId=n?n.id:null}else if("Junior"===t.designation){const n=e.find((e=>"Senior"===e.designation&&e.department===t.department));t.managerId=n?n.id:null}else if("Designer"===t.designation){const n=e.find((e=>"Junior"===e.designation&&e.department===t.department));t.managerId=n?n.id:null}n([...e,t]),console.log("my employees",t)}})})})}},91439:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(65043),a=t(21450),l=t(40854),o=t.n(l),i=t(70579);const s=e=>{var n;let{employees:t}=e;const[l,s]=(0,r.useState)(JSON.parse(null===(n=localStorage)||void 0===n?void 0:n.getItem("user"))),[c,d]=(0,r.useState)();(0,r.useEffect)((()=>{u()}),[]);const u=async()=>{try{var e;const n=await o().get("http://54.81.250.98:8083/api/users/company/?companyId=".concat(null===l||void 0===l||null===(e=l.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===l||void 0===l?void 0:l.accessToken}});d(n.data)}catch(n){console.error("Error fetching documents:",null===n||void 0===n?void 0:n.message)}},p=(e,n)=>[...e.values()].find((e=>null===e.department&&null===n.department?e.roleId===n.roleId-1:5===n.roleId&&e.department===n.department?2===e.roleId&&e.department===n.department:(e.department===n.department||2===n.roleId)&&e.roleId===n.roleId-1)),v=e=>{const n=0===e.children.length;return(0,i.jsx)(a.n,{label:(0,i.jsxs)("div",{style:{backgroundColor:(e=>{switch(e){case 1:return"#4169E1";case 2:return"#1E90FF";case 3:return"#6495ED";case 4:return"#87CEEB";case 5:return"#ADD8E6";default:return"#FFFFFF"}})(e.roleId),padding:"8px",borderRadius:"8px",display:"inline-block",fontWeight:"bold",cursor:n?"default":"pointer",width:"150px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,i.jsx)("img",{src:null==e.image?"http://54.81.250.98:8083/R.jpg":"http://54.81.250.98:8083/".concat(e.image),alt:"Profile",style:{width:"90px",height:"90px",borderRadius:"50%",objectFit:"cover",marginBottom:"8px"}}),(0,i.jsx)("div",{children:e.lastName}),(0,i.jsx)("div",{children:"CEO"===e.roleTitle?"-":"- ".concat(e.department," -")}),(0,i.jsxs)("div",{children:["Head"===e.roleTitle?"HOD":"","Senior"===e.roleTitle?"Sr Eng":"","Junior"===e.roleTitle?"Jr Eng":"","CEO"===e.roleTitle?"CEO":"","Designer"===e.roleTitle?"Designer":""]})]}),children:e.children.map((e=>v(e)))},e.id.toString())};return(0,i.jsx)("div",{style:{overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",padding:"100px",width:"1224px",backgroundColor:"#ebf2f2",border:"1px solid #ccc",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},children:(0,i.jsx)(a.P,{label:(0,i.jsx)("div",{style:{fontSize:"30px",fontWeight:"bold",color:"#000",lineWidth:"2px",lineColor:"green",lineBorderRadius:"10px"},children:2===l.user.roleId?l.user.department:c}),children:(e=>{const n=new Map;e.forEach((e=>{n.set(e.id,{...e,children:[]})}));const t=[];return n.forEach((e=>{const r=e.roleId,a=e.department;if(2===l.user.roleId||3===l.user.roleId||4===l.user.roleId||5===l.user.roleId)if(a&&2===r)t.push(e);else{const t=p(n,e);t&&t.children.push(e)}else if(a||1!==r){const t=p(n,e);t&&t.children.push(e)}else t.push(e)})),t})(t).map((e=>v(e)))})})}},78186:(e,n,t)=>{t.d(n,{A:()=>j});var r=t(64467),a=t(58168),l=t(65043),o=t(98139),i=t.n(o),s=t(79688),c=t(60436),d=t(5544),u=t(18574),p=t(25055),v=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},h=l.createContext(null),f=function(e,n){var t=e.defaultValue,o=e.children,s=e.options,f=void 0===s?[]:s,m=e.prefixCls,g=e.className,y=e.style,x=e.onChange,b=v(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),A=l.useContext(p.QO),C=A.getPrefixCls,j=A.direction,E=l.useState(b.value||t||[]),I=(0,d.A)(E,2),O=I[0],S=I[1],w=l.useState([]),N=(0,d.A)(w,2),F=N[0],D=N[1];l.useEffect((function(){"value"in b&&S(b.value||[])}),[b.value]);var P=function(){return f.map((function(e){return"string"===typeof e?{label:e,value:e}:e}))},T=C("checkbox",m),K="".concat(T,"-group"),H=(0,u.A)(b,["value","disabled"]);f&&f.length>0&&(o=P().map((function(e){return l.createElement(k,{prefixCls:T,key:e.value.toString(),disabled:"disabled"in e?e.disabled:b.disabled,value:e.value,checked:-1!==O.indexOf(e.value),onChange:e.onChange,className:"".concat(K,"-item"),style:e.style},e.label)})));var J={toggleOption:function(e){var n=O.indexOf(e.value),t=(0,c.A)(O);-1===n?t.push(e.value):t.splice(n,1),"value"in b||S(t);var r=P();null===x||void 0===x||x(t.filter((function(e){return-1!==F.indexOf(e)})).sort((function(e,n){return r.findIndex((function(n){return n.value===e}))-r.findIndex((function(e){return e.value===n}))})))},value:O,disabled:b.disabled,name:b.name,registerValue:function(e){D((function(n){return[].concat((0,c.A)(n),[e])}))},cancelValue:function(e){D((function(n){return n.filter((function(n){return n!==e}))}))}},R=i()(K,(0,r.A)({},"".concat(K,"-rtl"),"rtl"===j),g);return l.createElement("div",(0,a.A)({className:R,style:y},H,{ref:n}),l.createElement(h.Provider,{value:J},o))},m=l.forwardRef(f);const g=l.memo(m);var y=t(5753),x=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},b=function(e,n){var t,o=e.prefixCls,c=e.className,d=e.children,u=e.indeterminate,v=void 0!==u&&u,f=e.style,m=e.onMouseEnter,g=e.onMouseLeave,b=e.skipGroup,A=void 0!==b&&b,k=x(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),C=l.useContext(p.QO),j=C.getPrefixCls,E=C.direction,I=l.useContext(h),O=l.useRef(k.value);l.useEffect((function(){null===I||void 0===I||I.registerValue(k.value),(0,y.A)("checked"in k||!!I||!("value"in k),"Checkbox","`value` is not a valid prop, do you mean `checked`?")}),[]),l.useEffect((function(){if(!A)return k.value!==O.current&&(null===I||void 0===I||I.cancelValue(O.current),null===I||void 0===I||I.registerValue(k.value)),function(){return null===I||void 0===I?void 0:I.cancelValue(k.value)}}),[k.value]);var S=j("checkbox",o),w=(0,a.A)({},k);I&&!A&&(w.onChange=function(){k.onChange&&k.onChange.apply(k,arguments),I.toggleOption&&I.toggleOption({label:d,value:k.value})},w.name=I.name,w.checked=-1!==I.value.indexOf(k.value),w.disabled=k.disabled||I.disabled);var N=i()((t={},(0,r.A)(t,"".concat(S,"-wrapper"),!0),(0,r.A)(t,"".concat(S,"-rtl"),"rtl"===E),(0,r.A)(t,"".concat(S,"-wrapper-checked"),w.checked),(0,r.A)(t,"".concat(S,"-wrapper-disabled"),w.disabled),t),c),F=i()((0,r.A)({},"".concat(S,"-indeterminate"),v));return l.createElement("label",{className:N,style:f,onMouseEnter:m,onMouseLeave:g},l.createElement(s.A,(0,a.A)({},w,{prefixCls:S,className:F,ref:n})),void 0!==d&&l.createElement("span",null,d))},A=l.forwardRef(b);A.displayName="Checkbox";const k=A;var C=k;C.Group=g,C.__ANT_CHECKBOX=!0;const j=C},79688:(e,n,t)=>{t.d(n,{A:()=>f});var r=t(58168),a=t(64467),l=t(80045),o=t(89379),i=t(23029),s=t(92901),c=t(85501),d=t(52962),u=t(65043),p=t(98139),v=t.n(p),h=function(e){(0,c.A)(t,e);var n=(0,d.A)(t);function t(e){var r;(0,i.A)(this,t),(r=n.call(this,e)).handleChange=function(e){var n=r.props,t=n.disabled,a=n.onChange;t||("checked"in r.props||r.setState({checked:e.target.checked}),a&&a({target:(0,o.A)((0,o.A)({},r.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},r.saveInput=function(e){r.input=e};var a="checked"in e?e.checked:e.defaultChecked;return r.state={checked:a},r}return(0,s.A)(t,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,n=this.props,t=n.prefixCls,o=n.className,i=n.style,s=n.name,c=n.id,d=n.type,p=n.disabled,h=n.readOnly,f=n.tabIndex,m=n.onClick,g=n.onFocus,y=n.onBlur,x=n.onKeyDown,b=n.onKeyPress,A=n.onKeyUp,k=n.autoFocus,C=n.value,j=n.required,E=(0,l.A)(n,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),I=Object.keys(E).reduce((function(e,n){return"aria-"!==n.substr(0,5)&&"data-"!==n.substr(0,5)&&"role"!==n||(e[n]=E[n]),e}),{}),O=this.state.checked,S=v()(t,o,(e={},(0,a.A)(e,"".concat(t,"-checked"),O),(0,a.A)(e,"".concat(t,"-disabled"),p),e));return u.createElement("span",{className:S,style:i},u.createElement("input",(0,r.A)({name:s,id:c,type:d,required:j,readOnly:h,disabled:p,tabIndex:f,className:"".concat(t,"-input"),checked:!!O,onClick:m,onFocus:g,onBlur:y,onKeyUp:A,onKeyDown:x,onKeyPress:b,onChange:this.handleChange,autoFocus:k,ref:this.saveInput,value:C},I)),u.createElement("span",{className:"".concat(t,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return"checked"in e?(0,o.A)((0,o.A)({},n),{},{checked:e.checked}):null}}]),t}(u.Component);h.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};const f=h}}]);
//# sourceMappingURL=7996.978f4fa2.chunk.js.map