"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[548],{23415:(e,t,a)=>{a.d(t,{A:()=>i});a(14556);var l=a(91688),n=a(70579);const i=()=>{var e;const t=null===(e=localStorage)||void 0===e?void 0:e.getItem("user");return console.log(t,"loggin"),t?null:(0,n.jsx)(l.Redirect,{to:"/pages/authentication/login"})}},16548:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var l=a(65043),n=a(64435),i=a(15627),r=a(21261),o=a(94376),s=a(62967),d=a(33733),c=a(78186),u=a(47419),m=a(11645),p=a(89421),v=a(26412),g=a(73754),h=a(40854),x=a.n(h),y=a(23415),A=a(70579);const f=[{title:"User ID",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"firstName",key:"firstName"},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",dataIndex:"roleTitle",key:"roleTitle"},{title:"Department",dataIndex:"department",key:"department"},{title:"Action",key:"action",render:(e,t)=>(0,A.jsx)(n.A,{size:"middle",children:(0,A.jsx)("a",{children:"Delete"})})}];function j(){var e,t;const[a,n]=(0,l.useState)(""),[h,j]=(0,l.useState)([]),[b,I]=(0,l.useState)(!1),[S,N]=(0,l.useState)(""),[k,E]=(0,l.useState)(""),[z,C]=(0,l.useState)(""),[w,O]=(0,l.useState)(""),D=/\S+@\S+\.\S+/.test(S),[P,T]=(0,l.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[F,G]=(0,l.useState)([]),q=()=>{I(!1)},B=async()=>{try{var e;const t=await x().get("http://127.0.0.1:8083/api/users?companyId=".concat(null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===P||void 0===P?void 0:P.accessToken}});console.log(t.data),G(t.data)}catch(t){console.error("Error fetching documents:",null===t||void 0===t?void 0:t.message)}};return(0,l.useEffect)((()=>{var e;T(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),(async()=>{try{var e;const t=await x().get("http://127.0.0.1:8083/api/departments?companyId=".concat(null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===P||void 0===P?void 0:P.accessToken}}),a=[];for(const e of null===t||void 0===t?void 0:t.data)a.push({value:{id:null===e||void 0===e?void 0:e.id,title:null===e||void 0===e?void 0:e.title},label:null===e||void 0===e?void 0:e.title});j(a)}catch(t){console.error("Error fetching departments:",null===t||void 0===t?void 0:t.message)}})(),B()}),[]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.A,{title:"Add User",width:416,centered:!0,visible:b,onCancel:q,footer:null,closeIcon:(0,A.jsx)(g.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,A.jsxs)(o.A,{layout:"vertical",name:"basic",children:[(0,A.jsx)(o.A.Item,{label:"First Name",name:"firstName",rules:[{required:!0,message:"Please input your firstName!"}],children:(0,A.jsx)(s.A,{value:z,onChange:e=>C(e.target.value)})}),(0,A.jsx)(o.A.Item,{label:"Last Name",name:"lastName",rules:[{required:!0,message:"Please input your lastName!"}],children:(0,A.jsx)(s.A,{value:w,onChange:e=>O(e.target.value)})}),(0,A.jsx)(o.A.Item,{label:"E-mail :",name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:(0,A.jsx)(s.A,{id:"email",value:S,onChange:e=>N(e.target.value)})}),(0,A.jsx)(o.A.Item,{label:"Role",name:"role",children:(0,A.jsx)(d.A,{defaultValue:"",options:[{value:"head",label:"Head"},{value:"seniorEngineer",label:"Senior Engineer"},{value:"juniorEngineer",label:"Junior Engineer"},{value:"designer",label:"Designer/Draftsmen"}],value:k,onChange:e=>E(e)})}),(0,A.jsx)(o.A.Item,{label:"Select Department",rules:[{required:!0,message:"Please select one department!"}],children:(0,A.jsx)(c.A.Group,{options:h,value:a,onChange:n})}),(0,A.jsxs)(u.A,{children:[(0,A.jsx)(m.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,A.jsx)(p.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{try{var e,t;const l={head:2,seniorEngineer:3,juniorEngineer:4,designer:5};console.log("selectedDeparment",a),console.log(a.id,a.title,"checking");const n=await x().post("http://127.0.0.1:8083/api/users",{roleId:l[k],companyId:null===P||void 0===P||null===(e=P.user)||void 0===e?void 0:e.companyId,departmentId:a[0].id,department:a[0].title,email:S,firstName:z,lastName:w},{headers:{Authorization:null===P||void 0===P?void 0:P.accessToken}});console.log(n),i.Ay.success(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message),B(),q()}catch(l){console.error("Error adding user:",l)}})(),disabled:!(S.length&&z.length&&w.length&&D),className:S.length&&z.length&&w.length&&D?"":"disabled-button",children:"Add"})}),(0,A.jsx)(m.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,A.jsx)(p.A,{block:!0,onClick:q,children:"Cancel"})})]})]})}),(0,A.jsx)("div",{style:{textAlign:"right",marginBottom:"16px"},children:(0,A.jsx)(p.A,{type:"primary",onClick:()=>{I(!0)},disabled:1!=(null===P||void 0===P||null===(t=P.user)||void 0===t?void 0:t.roleId),children:"Add User"})}),(0,A.jsx)(v.A,{columns:f,dataSource:F}),(0,A.jsx)(y.A,{})]})}},64435:(e,t,a)=>{a.d(t,{e:()=>v,A:()=>h});var l=a(58168),n=a(64467),i=a(5544),r=a(65043),o=a(98139),s=a.n(o),d=a(62149),c=a(25055);function u(e){var t=e.className,a=e.direction,i=e.index,o=e.marginDirection,s=e.children,d=e.split,c=e.wrap,u=r.useContext(v),m=u.horizontalSize,p=u.verticalSize,g=u.latestIndex,h={};return u.supportFlexGap||("vertical"===a?i<g&&(h={marginBottom:m/(d?2:1)}):h=(0,l.A)((0,l.A)({},i<g&&(0,n.A)({},o,m/(d?2:1))),c&&{paddingBottom:p})),null===s||void 0===s?null:r.createElement(r.Fragment,null,r.createElement("div",{className:t,style:h},s),i<g&&d&&r.createElement("span",{className:"".concat(t,"-split"),style:h},d))}var m=a(46058),p=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(a[l[n]]=e[l[n]])}return a},v=r.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),g={small:8,middle:16,large:24};const h=function(e){var t,a=r.useContext(c.QO),o=a.getPrefixCls,h=a.space,x=a.direction,y=e.size,A=void 0===y?(null===h||void 0===h?void 0:h.size)||"small":y,f=e.align,j=e.className,b=e.children,I=e.direction,S=void 0===I?"horizontal":I,N=e.prefixCls,k=e.split,E=e.style,z=e.wrap,C=void 0!==z&&z,w=p(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),O=(0,m.A)(),D=r.useMemo((function(){return(Array.isArray(A)?A:[A,A]).map((function(e){return function(e){return"string"===typeof e?g[e]:e||0}(e)}))}),[A]),P=(0,i.A)(D,2),T=P[0],F=P[1],G=(0,d.A)(b,{keepEmpty:!0}),q=void 0===f&&"horizontal"===S?"center":f,B=o("space",N),R=s()(B,"".concat(B,"-").concat(S),(t={},(0,n.A)(t,"".concat(B,"-rtl"),"rtl"===x),(0,n.A)(t,"".concat(B,"-align-").concat(q),q),t),j),_="".concat(B,"-item"),J="rtl"===x?"marginLeft":"marginRight",U=0,L=G.map((function(e,t){return null!==e&&void 0!==e&&(U=t),r.createElement(u,{className:_,key:"".concat(_,"-").concat(t),direction:S,index:t,marginDirection:J,split:k,wrap:C},e)})),M=r.useMemo((function(){return{horizontalSize:T,verticalSize:F,latestIndex:U,supportFlexGap:O}}),[T,F,U,O]);if(0===G.length)return null;var Q={};return C&&(Q.flexWrap="wrap",O||(Q.marginBottom=-F)),O&&(Q.columnGap=T,Q.rowGap=F),r.createElement("div",(0,l.A)({className:R,style:(0,l.A)((0,l.A)({},Q),E)},w),r.createElement(v.Provider,{value:M},L))}}}]);
//# sourceMappingURL=548.bd617db0.chunk.js.map