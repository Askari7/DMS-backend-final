"use strict";(self.webpackChunkyoda_admin_react=self.webpackChunkyoda_admin_react||[]).push([[8360],{70877:(e,l,a)=>{a.d(l,{A:()=>i});var s=a(62582),n=a(11645),o=a(97775),t=a(70579);const i=e=>{const{breadCrumbParent:l,breadCrumbParent2:a,breadCrumbParent3:i,breadCrumbActive:r}=e;return(0,t.jsx)(n.A,{children:(0,t.jsxs)(o.A,{className:"hp-d-flex hp-flex-wrap",children:[(0,t.jsx)(o.A.Item,{children:(0,t.jsx)(s.N_,{to:"/",children:"Home"})}),"Components"===l?(0,t.jsx)(o.A.Item,{children:(0,t.jsx)(s.N_,{to:"/components/components-page",children:"Components"})}):(0,t.jsx)(o.A.Item,{children:l}),a&&(0,t.jsx)(o.A.Item,{children:a}),i&&(0,t.jsx)(o.A.Item,{children:i}),(0,t.jsx)(o.A.Item,{children:r})]})})}},58360:(e,l,a)=>{a.r(l),a.d(l,{default:()=>C});var s=a(65043),n=a(40854),o=a.n(n),t=a(64435),i=a(86904),r=a(15627),c=a(21261),d=a(47419),m=a(11645),u=a(94376),p=a(89421),h=a(60521),v=a(70610),x=a(26412),y=a(39998),A=a(22285),j=(a(70877),a(4689),a(77717)),g=a(70579);function C(){var e,l,a,n;const[C,b]=(0,s.useState)(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),[f,k]=(0,s.useState)([]),I=[{title:"Company Name",dataIndex:"companyName",key:"companyName",render:e=>(0,g.jsx)("a",{children:e})},{title:"Company Address",dataIndex:"companyAddress",key:"companyAddress",render:e=>(0,g.jsx)("a",{children:e})},{title:"Action",key:"action",render:(e,l)=>(0,g.jsx)(t.A,{size:"middle",children:(0,g.jsx)("a",{onClick:()=>le(l),children:"Show Employees"})})}],[N,S]=(0,s.useState)(!1),[w,E]=(0,s.useState)(!1),[z,P]=(0,s.useState)([]),[T,q]=(0,s.useState)(""),[_,O]=(0,s.useState)(!1),[Q,F]=(0,s.useState)(""),[J,V]=(0,s.useState)(""),[B,H]=(0,s.useState)(""),[R,Y]=(0,s.useState)(""),[D,G]=(0,s.useState)(""),[K,L]=(0,s.useState)(""),[M,U]=(0,s.useState)([]),[W,X]=(0,s.useState)([]),Z=async()=>{try{var e;const l=await o().get("http://54.81.250.98:8083/api/clients?companyId=".concat(null===C||void 0===C||null===(e=C.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===C||void 0===C?void 0:C.accessToken}});console.log(l.data,"data");const a=l.data.map((e=>({value:e.id,label:e.companyName})));console.log("Options",a),k(a),X(l.data)}catch(l){console.error("Error fetching clients:",null===l||void 0===l?void 0:l.message)}};(0,s.useEffect)((()=>{var e;b(JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user"))),(async()=>{try{var e;const l=await o().get("http://54.81.250.98:8083/api/projects?companyId=".concat(null===C||void 0===C||null===(e=C.user)||void 0===e?void 0:e.companyId),{headers:{Authorization:null===C||void 0===C?void 0:C.accessToken}});console.log(l);const a=new Set,s=null===l||void 0===l?void 0:l.data.reduce(((e,l)=>(a.has(l.title)||(a.add(l.title),e.push({value:l.id,label:l.title,code:l.code})),e)),[]);U(s)}catch(l){console.error("Error fetching departments:",null===l||void 0===l?void 0:l.message)}})(),Z()}),[]);const $=()=>{O(!1)},ee=()=>{E(!1)},le=e=>{console.log("record",e),console.log(e,"recordingggg"),(async e=>{try{console.log(e,"id");const l=await o().get("http://54.81.250.98:8083/api/clients/official?companyId=".concat(e.id),{headers:{Authorization:null===C||void 0===C?void 0:C.accessToken}});console.log(l.data,"data"),P(l.data)}catch(l){console.error("Error fetching employees:",null===l||void 0===l?void 0:l.message)}})(e),S(!0)},ae=()=>{q(""),S(!1)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.A,{title:"Employees",width:400,centered:!0,visible:N,onCancel:ae,footer:null,closeIcon:(0,g.jsx)(A.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,g.jsx)(d.A,{justify:"space-between",align:"center",children:(0,g.jsx)(m.A,{span:30,children:(0,g.jsxs)(u.A,{layout:"vertical",name:"basic",children:[(0,g.jsxs)(j.A,{children:[(0,g.jsx)("h3",{children:"Our Employees"}),(0,g.jsx)("ul",{children:z.map(((e,l)=>(0,g.jsxs)("li",{children:[(0,g.jsx)("strong",{children:e.clientName})," - ",(0,g.jsx)("span",{style:{color:"blue"},children:e.Email})]},l)))})]}),(0,g.jsx)(d.A,{children:(0,g.jsx)(m.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,g.jsx)(p.A,{block:!0,onClick:ae,children:"Cancel"})})})]})})})}),(0,g.jsx)(c.A,{title:"Add Company",width:416,centered:!0,visible:_,onCancel:$,footer:null,closeIcon:(0,g.jsx)(A.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,g.jsxs)(u.A,{layout:"vertical",name:"basic",children:[(0,g.jsx)(u.A.Item,{label:"Company Name:",name:"firstName",rules:[{required:!0,message:"Please input your Company Name!"}],children:(0,g.jsx)(h.A,{value:Q,onChange:e=>F(e.target.value)})}),(0,g.jsx)(u.A.Item,{label:"Address :",name:"companyAddress",children:(0,g.jsx)(h.A,{id:"companyAddress",value:D,onChange:e=>G(e.target.value)})}),(0,g.jsx)(u.A.Item,{label:"Contact :",name:"companyContact",children:(0,g.jsx)(h.A,{id:"companyContact",value:K,onChange:e=>L(e.target.value)})}),(0,g.jsxs)(d.A,{children:[(0,g.jsx)(m.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,g.jsx)(p.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{if(Q&&D&&K)try{var e,l;const a=await o().post("http://54.81.250.98:8083/api/clients",{companyName:Q,companyId:null===C||void 0===C||null===(e=C.user)||void 0===e?void 0:e.companyId,companyAddress:D,companyContact:K},{headers:{Authorization:null===C||void 0===C?void 0:C.accessToken}});console.log(a),i.A.success({message:"".concat(null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message),style:{backgroundColor:"#52c41a",color:"#fff"}}),Z(),$()}catch(a){console.error("Error adding client:",a),r.Ay.error("Failed to add client. Please try again.")}else i.A.error({message:"Validation Error",description:"Please fill in all required fields.",style:{backgroundColor:"#f5222d",color:"#fff"}})})(),children:"Add Company"})}),(0,g.jsx)(m.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,g.jsx)(p.A,{block:!0,onClick:$,children:"Cancel"})})]})]})}),(0,g.jsx)(c.A,{title:"Add Client",width:416,centered:!0,visible:w,onCancel:ee,footer:null,closeIcon:(0,g.jsx)(A.dCQ,{className:"remix-icon text-color-black-100",size:24}),children:(0,g.jsxs)(u.A,{layout:"vertical",name:"basic",children:[(0,g.jsx)(u.A.Item,{label:"Client Name:",name:"clientName",rules:[{required:!0,message:"Please input your Name!"}],children:(0,g.jsx)(h.A,{value:J,onChange:e=>V(e.target.value)})}),(0,g.jsx)(u.A.Item,{label:"Email :",name:"email",rules:[{required:!0,message:"Please input your Email!"}],children:(0,g.jsx)(h.A,{id:"email",value:B,onChange:e=>H(e.target.value)})}),(0,g.jsx)(u.A.Item,{label:"Company",name:"company",rules:[{required:!0,message:"Please select Company"}],children:(0,g.jsx)(v.A,{options:f,value:R,onChange:e=>Y(e)})}),(0,g.jsxs)(d.A,{children:[(0,g.jsx)(m.A,{md:12,span:24,className:"hp-pr-sm-0 hp-pr-12",children:(0,g.jsx)(p.A,{block:!0,type:"primary",htmlType:"submit",onClick:()=>(async()=>{if(J&&B)try{var e;const l=await o().post("http://54.81.250.98:8083/api/clients",{clientName:J,companyId:R,Email:B},{headers:{Authorization:null===C||void 0===C?void 0:C.accessToken}});console.log(l),i.A.success({message:"".concat(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.message),style:{backgroundColor:"#52c41a",color:"#fff"}}),Z(),ee()}catch(l){console.error("Error adding client official:",l)}else i.A.error({message:"Validation Error",description:"Please fill in all required fields.",style:{backgroundColor:"#f5222d",color:"#fff"}})})(),children:"Add Client"})}),(0,g.jsx)(m.A,{md:12,span:24,className:"hp-mt-sm-12 hp-pl-sm-0 hp-pl-12",children:(0,g.jsx)(p.A,{block:!0,onClick:ee,children:"Cancel"})})]})]})}),(0,g.jsxs)("div",{style:{textAlign:"right",marginBottom:"16px"},children:[(0,g.jsx)(p.A,{type:"primary",onClick:()=>{O(!0)},style:{marginRight:"10px"},disabled:1!=(null===C||void 0===C||null===(l=C.user)||void 0===l?void 0:l.roleId),children:"Add Company"}),(0,g.jsx)(p.A,{type:"primary",onClick:()=>{E(!0)},disabled:1!=(null===C||void 0===C||null===(a=C.user)||void 0===a?void 0:a.roleId),children:"Add Client"})]}),1===(null===C||void 0===C||null===(n=C.user)||void 0===n?void 0:n.roleId)?(0,g.jsx)(x.A,{columns:I,dataSource:W,bordered:!0,size:"middle",title:()=>"All Clients Information"}):(0,g.jsxs)("div",{children:[(0,g.jsx)(y.A,{}),(0,g.jsx)("p",{children:"You do not have permissions to view."})]})]})}}}]);
//# sourceMappingURL=8360.ae789b79.chunk.js.map